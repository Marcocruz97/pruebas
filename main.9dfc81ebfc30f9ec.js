"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[179],{622:()=>{function xe(t){return"function"==typeof t}function Dc(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const zh=Dc(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function ga(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Bn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(xe(r))try{r()}catch(s){e=s instanceof zh?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{hR(s)}catch(o){e=e??[],o instanceof zh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new zh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)hR(e);else{if(e instanceof Bn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ga(n,e)}remove(e){const{_finalizers:n}=this;n&&ga(n,e),e instanceof Bn&&e._removeParent(this)}}Bn.EMPTY=(()=>{const t=new Bn;return t.closed=!0,t})();const lR=Bn.EMPTY;function dR(t){return t instanceof Bn||t&&"closed"in t&&xe(t.remove)&&xe(t.add)&&xe(t.unsubscribe)}function hR(t){xe(t)?t():t.unsubscribe()}const Js={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Gh={setTimeout(t,e,...n){const{delegate:r}=Gh;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Gh;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function fR(t){Gh.setTimeout(()=>{const{onUnhandledError:e}=Js;if(!e)throw t;e(t)})}function pR(){}const yq=Ky("C",void 0,void 0);function Ky(t,e,n){return{kind:t,value:e,error:n}}let Zs=null;function qh(t){if(Js.useDeprecatedSynchronousErrorHandling){const e=!Zs;if(e&&(Zs={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Zs;if(Zs=null,n)throw r}}else t()}class Qy extends Bn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dR(e)&&e.add(this)):this.destination=Cq}static create(e,n,r){return new bc(e,n,r)}next(e){this.isStopped?Xy(function vq(t){return Ky("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Xy(function _q(t){return Ky("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xy(yq,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Iq=Function.prototype.bind;function Yy(t,e){return Iq.call(t,e)}class Eq{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wh(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wh(r)}else Wh(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wh(n)}}}class bc extends Qy{constructor(e,n,r){let i;if(super(),xe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Js.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Yy(e.next,s),error:e.error&&Yy(e.error,s),complete:e.complete&&Yy(e.complete,s)}):i=e}this.destination=new Eq(i)}}function Wh(t){Js.useDeprecatedSynchronousErrorHandling?function wq(t){Js.useDeprecatedSynchronousErrorHandling&&Zs&&(Zs.errorThrown=!0,Zs.error=t)}(t):fR(t)}function Xy(t,e){const{onStoppedNotification:n}=Js;n&&Gh.setTimeout(()=>n(t,e))}const Cq={closed:!0,next:pR,error:function Tq(t){throw t},complete:pR},Jy="function"==typeof Symbol&&Symbol.observable||"@@observable";function ns(t){return t}function gR(t){return 0===t.length?ns:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Ke=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function Sq(t){return t&&t instanceof Qy||function bq(t){return t&&xe(t.next)&&xe(t.error)&&xe(t.complete)}(t)&&dR(t)}(n)?n:new bc(n,r,i);return qh(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=mR(r))((i,s)=>{const o=new bc({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Jy](){return this}pipe(...n){return gR(n)(this)}toPromise(n){return new(n=mR(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function mR(t){var e;return null!==(e=t??Js.Promise)&&void 0!==e?e:Promise}const Aq=Dc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let _i=(()=>{class t extends Ke{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new yR(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Aq}next(n){qh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){qh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){qh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?lR:(this.currentObservers=null,s.push(n),new Bn(()=>{this.currentObservers=null,ga(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Ke;return n.source=this,n}}return t.create=(e,n)=>new yR(e,n),t})();class yR extends _i{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:lR}}class tr extends _i{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function _R(t){return xe(t?.lift)}function Nt(t){return e=>{if(_R(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Mt(t,e,n,r,i){return new xq(t,e,n,r,i)}class xq extends Qy{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function _e(t,e){return Nt((n,r)=>{let i=0;n.subscribe(Mt(r,s=>{r.next(t.call(e,s,i++))}))})}function t_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function rs(t){return this instanceof rs?(this.v=t,this):new rs(t)}function ER(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function r_(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}const TR=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function CR(t){return xe(t?.then)}function DR(t){return xe(t[Jy])}function bR(t){return Symbol.asyncIterator&&xe(t?.[Symbol.asyncIterator])}function SR(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const AR=function Wq(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function xR(t){return xe(t?.[AR])}function RR(t){return function IR(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof rs?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield rs(n.read());if(i)return yield rs(void 0);yield yield rs(r)}}finally{n.releaseLock()}})}function NR(t){return xe(t?.getReader)}function fr(t){if(t instanceof Ke)return t;if(null!=t){if(DR(t))return function Kq(t){return new Ke(e=>{const n=t[Jy]();if(xe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(TR(t))return function Qq(t){return new Ke(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(CR(t))return function Yq(t){return new Ke(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,fR)})}(t);if(bR(t))return MR(t);if(xR(t))return function Xq(t){return new Ke(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(NR(t))return function Jq(t){return MR(RR(t))}(t)}throw SR(t)}function MR(t){return new Ke(e=>{(function Zq(t,e){var n,r,i,s;return function vR(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ER(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function vi(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Gt(t,e,n=1/0){return xe(e)?Gt((r,i)=>_e((s,o)=>e(r,s,i,o))(fr(t(r,i))),n):("number"==typeof e&&(n=e),Nt((r,i)=>function eW(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let m=!1;fr(n(g,l++)).subscribe(Mt(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){const v=u.shift();o?vi(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(Mt(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function ma(t=1/0){return Gt(ns,t)}const Lr=new Ke(t=>t.complete());function i_(t){return t[t.length-1]}function Sc(t){return function nW(t){return t&&xe(t.schedule)}(i_(t))?t.pop():void 0}function Kh(t,e=0){return Nt((n,r)=>{n.subscribe(Mt(r,i=>vi(r,t,()=>r.next(i),e),()=>vi(r,t,()=>r.complete(),e),i=>vi(r,t,()=>r.error(i),e)))})}function Qh(t,e=0){return Nt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function kR(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ke(n=>{vi(n,e,()=>{const r=t[Symbol.asyncIterator]();vi(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function kt(t,e){return e?function lW(t,e){if(null!=t){if(DR(t))return function sW(t,e){return fr(t).pipe(Qh(e),Kh(e))}(t,e);if(TR(t))return function aW(t,e){return new Ke(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(CR(t))return function oW(t,e){return fr(t).pipe(Qh(e),Kh(e))}(t,e);if(bR(t))return kR(t,e);if(xR(t))return function uW(t,e){return new Ke(n=>{let r;return vi(n,e,()=>{r=t[AR](),vi(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>xe(r?.return)&&r.return()})}(t,e);if(NR(t))return function cW(t,e){return kR(RR(t),e)}(t,e)}throw SR(t)}(t,e):fr(t)}function K(...t){return kt(t,Sc(t))}function PR(t={}){const{connector:e=(()=>new _i),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Nt((g,m)=>{c++,!d&&!l&&h();const v=u=u??e();m.add(()=>{c--,0===c&&!d&&!l&&(a=s_(p,i))}),v.subscribe(m),!o&&c>0&&(o=new bc({next:y=>v.next(y),error:y=>{d=!0,h(),a=s_(f,n,y),v.error(y)},complete:()=>{l=!0,h(),a=s_(f,r),v.complete()}}),fr(g).subscribe(o))})(s)}}function s_(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new bc({next:()=>{r.unsubscribe(),t()}});return fr(e(...n)).subscribe(r)}function pr(t,e){return Nt((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Mt(r,u=>{i?.unsubscribe();let c=0;const l=s++;fr(t(u,l)).subscribe(i=Mt(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function fW(t,e){return t===e}function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function Ct(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ct).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function o_(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const pW=De({__forward_ref__:De});function a_(t){return t.__forward_ref__=a_,t.toString=function(){return Ct(this())},t}function X(t){return u_(t)?t():t}function u_(t){return"function"==typeof t&&t.hasOwnProperty(pW)&&t.__forward_ref__===a_}function c_(t){return t&&!!t.\u0275providers}class b extends Error{constructor(e,n){super(function Xh(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Z(t){return"string"==typeof t?t:null==t?"":String(t)}function Jh(t,e){throw new b(-201,!1)}function nr(t,e){null==t&&function Te(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Zh(t){return LR(t,ef)||LR(t,VR)}function LR(t,e){return t.hasOwnProperty(e)?t[e]:null}function FR(t){return t&&(t.hasOwnProperty(l_)||t.hasOwnProperty(EW))?t[l_]:null}const ef=De({\u0275prov:De}),l_=De({\u0275inj:De}),VR=De({ngInjectableDef:De}),EW=De({ngInjectorDef:De});var z=(()=>((z=z||{})[z.Default=0]="Default",z[z.Host=1]="Host",z[z.Self=2]="Self",z[z.SkipSelf=4]="SkipSelf",z[z.Optional=8]="Optional",z))();let d_;function bn(t){const e=d_;return d_=t,e}function BR(t,e,n){const r=Zh(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&z.Optional?null:void 0!==e?e:void Jh(Ct(t))}const Me=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ac={},h_="__NG_DI_FLAG__",tf="ngTempTokenPath",CW=/\n/gm,$R="__source";let ya;function ss(t){const e=ya;return ya=t,e}function SW(t,e=z.Default){if(void 0===ya)throw new b(-203,!1);return null===ya?BR(t,void 0,e):ya.get(t,e&z.Optional?null:void 0,e)}function U(t,e=z.Default){return(function UR(){return d_}()||SW)(X(t),e)}function L(t,e=z.Default){return U(t,nf(e))}function nf(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function f_(t){const e=[];for(let n=0;n<t.length;n++){const r=X(t[n]);if(Array.isArray(r)){if(0===r.length)throw new b(900,!1);let i,s=z.Default;for(let o=0;o<r.length;o++){const a=r[o],u=AW(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(U(i,s))}else e.push(U(r))}return e}function xc(t,e){return t[h_]=e,t.prototype[h_]=e,t}function AW(t){return t[h_]}function wi(t){return{toString:t}.toString()}var Fr=(()=>((Fr=Fr||{})[Fr.OnPush=0]="OnPush",Fr[Fr.Default=1]="Default",Fr))(),jn=(()=>{return(t=jn||(jn={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",jn;var t})();const Vr={},ve=[],rf=De({\u0275cmp:De}),p_=De({\u0275dir:De}),g_=De({\u0275pipe:De}),HR=De({\u0275mod:De}),Ii=De({\u0275fac:De}),Rc=De({__NG_ELEMENT_ID__:De}),zR=De({__NG_ENV_ID__:De});function GR(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function m_(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];WR(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function qR(t){return 3===t||4===t||6===t}function WR(t){return 64===t.charCodeAt(0)}function Nc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||KR(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function KR(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const QR="ng-template";function NW(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==GR(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function YR(t){return 4===t.type&&t.value!==QR}function MW(t,e,n){return e===(4!==t.type||n?t.value:QR)}function kW(t,e,n){let r=4;const i=t.attrs||[],s=function LW(t){for(let e=0;e<t.length;e++)if(qR(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!MW(t,u,n)||""===u&&1===e.length){if(gr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!NW(t.attrs,c,n)){if(gr(r))return!1;o=!0}continue}const d=PW(8&r?"class":u,i,YR(t),n);if(-1===d){if(gr(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==GR(f,c,0)||2&r&&c!==h){if(gr(r))return!1;o=!0}}}}else{if(!o&&!gr(r)&&!gr(u))return!1;if(o&&gr(u))continue;o=!1,r=u|1&r}}return gr(r)||o}function gr(t){return 0==(1&t)}function PW(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function FW(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function XR(t,e,n=!1){for(let r=0;r<e.length;r++)if(kW(t,e[r],n))return!0;return!1}function JR(t,e){return t?":not("+e.trim()+")":e}function UW(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!gr(o)&&(e+=JR(s,i),i=""),r=o,s=s||!gr(r);n++}return""!==i&&(e+=JR(s,i)),e}function _a(t){return wi(()=>{const e=eN(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Fr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||jn.Emulated,styles:t.styles||ve,_:null,schemas:t.schemas||null,tView:null,id:""};tN(n);const r=t.dependencies;return n.directiveDefs=sf(r,!1),n.pipeDefs=sf(r,!0),n.id=function WW(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function HW(t){return Ie(t)||nn(t)}function zW(t){return null!==t}function mr(t){return wi(()=>({type:t.type,bootstrap:t.bootstrap||ve,declarations:t.declarations||ve,imports:t.imports||ve,exports:t.exports||ve,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ZR(t,e){if(null==t)return Vr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function mn(t){return wi(()=>{const e=eN(t);return tN(e),e})}function Ie(t){return t[rf]||null}function nn(t){return t[p_]||null}function An(t){return t[g_]||null}function Hn(t,e){const n=t[HR]||null;if(!n&&!0===e)throw new Error(`Type ${Ct(t)} does not have '\u0275mod' property.`);return n}function eN(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Vr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ve,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ZR(t.inputs,e),outputs:ZR(t.outputs)}}function tN(t){t.features?.forEach(e=>e(t))}function sf(t,e){if(!t)return null;const n=e?An:HW;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(zW)}const Dt=0,P=1,te=2,Qe=3,yr=4,Mc=5,rn=6,wa=7,ft=8,Ia=9,eo=10,ne=11,kc=12,nN=13,Ea=14,pt=15,Pc=16,Ta=17,Ur=18,Oc=19,rN=20,os=21,Ei=22,af=23,uf=24,he=25,y_=1,iN=2,Br=7,Ca=9,sn=11;function zn(t){return Array.isArray(t)&&"object"==typeof t[y_]}function xn(t){return Array.isArray(t)&&!0===t[y_]}function __(t){return 0!=(4&t.flags)}function to(t){return t.componentOffset>-1}function _r(t){return!!t.template}function v_(t){return 0!=(512&t[te])}function no(t,e){return t.hasOwnProperty(Ii)?t[Ii]:null}let ZW=Me.WeakRef??class JW{constructor(e){this.ref=e}deref(){return this.ref}},t3=0,$r=null,df=!1;function Pt(t){const e=$r;return $r=t,e}class cN{constructor(){this.id=t3++,this.ref=function e3(t){return new ZW(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const r=n.producerNode.deref();if(void 0!==r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=df;df=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();void 0!==i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{df=e}}producerAccessed(){if(df)throw new Error("");if(null===$r)return;let e=$r.producers.get(this.id);void 0===e?(e={consumerNode:$r.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:$r.trackingVersion},$r.producers.set(this.id,e),this.consumers.set($r.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=$r.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==$r?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let lN=null;const hN=()=>{};class s3 extends cN{constructor(e,n,r){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=hN,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=Pt(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=hN,this.watch(this.registerOnCleanup)}finally{Pt(e)}}cleanup(){this.cleanupFn()}}class o3{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ro(){return fN}function fN(t){return t.type.prototype.ngOnChanges&&(t.setInput=u3),a3}function a3(){const t=gN(this),e=t?.current;if(e){const n=t.previous;if(n===Vr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function u3(t,e,n,r){const i=this.declaredInputs[n],s=gN(t)||function c3(t,e){return t[pN]=e}(t,{previous:Vr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new o3(u&&u.currentValue,e,a===Vr),t[r]=e}ro.ngInherit=!0;const pN="__ngSimpleChanges__";function gN(t){return t[pN]||null}const jr=function(t,e,n){};function Ve(t){for(;Array.isArray(t);)t=t[Dt];return t}function Rn(t,e){return Ve(e[t.index])}function Gn(t,e){const n=e[t];return zn(n)?n:n[Dt]}function as(t,e){return null==e?null:t[e]}function vN(t){t[Ta]=0}function m3(t){1024&t[te]||(t[te]|=1024,IN(t,1))}function wN(t){1024&t[te]&&(t[te]&=-1025,IN(t,-1))}function IN(t,e){let n=t[Qe];if(null===n)return;n[Mc]+=e;let r=n;for(n=n[Qe];null!==n&&(1===e&&1===r[Mc]||-1===e&&0===r[Mc]);)n[Mc]+=e,r=n,n=n[Qe]}const Q={lFrame:MN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function CN(){return Q.bindingsEnabled}function T(){return Q.lFrame.lView}function ge(){return Q.lFrame.tView}function qt(){let t=DN();for(;null!==t&&64===t.type;)t=t.parent;return t}function DN(){return Q.lFrame.currentTNode}function Hr(t,e){const n=Q.lFrame;n.currentTNode=t,n.isParent=e}function D_(){return Q.lFrame.isParent}function R3(t,e){const n=Q.lFrame;n.bindingIndex=n.bindingRootIndex=t,S_(e)}function S_(t){Q.lFrame.currentDirectiveIndex=t}function x_(t){Q.lFrame.currentQueryIndex=t}function M3(t){const e=t[P];return 2===e.type?e.declTNode:1===e.type?t[rn]:null}function RN(t,e,n){if(n&z.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&z.Host||(i=M3(s),null===i||(s=s[Ea],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Q.lFrame=NN();return r.currentTNode=e,r.lView=t,!0}function R_(t){const e=NN(),n=t[P];Q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function NN(){const t=Q.lFrame,e=null===t?null:t.child;return null===e?MN(t):e}function MN(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function kN(){const t=Q.lFrame;return Q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const PN=kN;function N_(){const t=kN();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function _n(){return Q.lFrame.selectedIndex}function io(t){Q.lFrame.selectedIndex=t}let LN=!0;function gf(){return LN}function us(t){LN=t}function mf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function yf(t,e,n){FN(t,e,3,n)}function _f(t,e,n,r){(3&t[te])===n&&FN(t,e,n,r)}function M_(t,e){let n=t[te];(3&n)===e&&(n&=8191,n+=1,t[te]=n)}function FN(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Ta]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Ta]+=65536),(a<s||-1==s)&&(B3(t,n,e,u),t[Ta]=(4294901760&t[Ta])+u+2),u++}function VN(t,e){jr(4,t,e);const n=Pt(null);try{e.call(t)}finally{Pt(n),jr(5,t,e)}}function B3(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[te]>>13<t[Ta]>>16&&(3&t[te])===e&&(t[te]+=8192,VN(a,s)):VN(a,s)}const Aa=-1;class Vc{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function UN(t){return t!==Aa}function vf(t){return 32767&t}function wf(t,e){let n=function z3(t){return t>>16}(t),r=e;for(;n>0;)r=r[Ea],n--;return r}let P_=!0;function If(t){const e=P_;return P_=t,e}const BN=255,$N=5;let G3=0;const zr={};function Ef(t,e){const n=jN(t,e);if(-1!==n)return n;const r=e[P];r.firstCreatePass&&(t.injectorIndex=e.length,O_(r.data,t),O_(e,null),O_(r.blueprint,null));const i=L_(t,e),s=t.injectorIndex;if(UN(i)){const o=vf(i),a=wf(i,e),u=a[P].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function O_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jN(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function L_(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=YN(i),null===r)return Aa;if(n++,i=i[Ea],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Aa}function F_(t,e,n){!function q3(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Rc)&&(r=n[Rc]),null==r&&(r=n[Rc]=G3++);const i=r&BN;e.data[t+(i>>$N)]|=1<<i}(t,e,n)}function HN(t,e,n){if(n&z.Optional||void 0!==t)return t;Jh()}function zN(t,e,n,r){if(n&z.Optional&&void 0===r&&(r=null),!(n&(z.Self|z.Host))){const i=t[Ia],s=bn(void 0);try{return i?i.get(e,r,n&z.Optional):BR(e,r,n&z.Optional)}finally{bn(s)}}return HN(r,0,n)}function GN(t,e,n,r=z.Default,i){if(null!==t){if(2048&e[te]&&!(r&z.Self)){const o=function X3(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[te]&&!(512&o[te]);){const a=qN(s,o,n,r|z.Self,zr);if(a!==zr)return a;let u=s.parent;if(!u){const c=o[rN];if(c){const l=c.get(n,zr,r);if(l!==zr)return l}u=YN(o),o=o[Ea]}s=u}return i}(t,e,n,r,zr);if(o!==zr)return o}const s=qN(t,e,n,r,zr);if(s!==zr)return s}return zN(e,n,r,i)}function qN(t,e,n,r,i){const s=function Q3(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Rc)?t[Rc]:void 0;return"number"==typeof e?e>=0?e&BN:Y3:e}(n);if("function"==typeof s){if(!RN(e,t,r))return r&z.Host?HN(i,0,r):zN(e,n,r,i);try{const o=s(r);if(null!=o||r&z.Optional)return o;Jh()}finally{PN()}}else if("number"==typeof s){let o=null,a=jN(t,e),u=Aa,c=r&z.Host?e[pt][rn]:null;for((-1===a||r&z.SkipSelf)&&(u=-1===a?L_(t,e):e[a+8],u!==Aa&&KN(r,!1)?(o=e[P],a=vf(u),e=wf(u,e)):a=-1);-1!==a;){const l=e[P];if(WN(s,a,l.data)){const d=K3(a,e,n,o,r,c);if(d!==zr)return d}u=e[a+8],u!==Aa&&KN(r,e[P].data[a+8]===c)&&WN(s,a,e)?(o=l,a=vf(u),e=wf(u,e)):a=-1}}return i}function K3(t,e,n,r,i,s){const o=e[P],a=o.data[t+8],l=function Tf(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&_r(f)&&f.type===n)return u}return null}(a,o,n,null==r?to(a)&&P_:r!=o&&0!=(3&a.type),i&z.Host&&s===a);return null!==l?so(e,o,l,a):zr}function so(t,e,n,r){let i=t[n];const s=e.data;if(function $3(t){return t instanceof Vc}(i)){const o=i;o.resolving&&function gW(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new b(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ee(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Z(t)}(s[n]));const a=If(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?bn(o.injectImpl):null;RN(t,r,z.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function U3(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=fN(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==u&&bn(u),If(a),o.resolving=!1,PN()}}return i}function WN(t,e,n){return!!(n[e+(t>>$N)]&1<<t)}function KN(t,e){return!(t&z.Self||t&z.Host&&e)}class xa{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return GN(this._tNode,this._lView,e,nf(r),n)}}function Y3(){return new xa(qt(),T())}function V_(t){return u_(t)?()=>{const e=V_(X(t));return e&&e()}:no(t)}function YN(t){const e=t[P],n=e.type;return 2===n?e.declTNode:1===n?t[rn]:null}const Na="__parameters__";function ka(t,e,n){return wi(()=>{const r=function U_(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(Na)?u[Na]:Object.defineProperty(u,Na,{value:[]})[Na];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function $c(t,e){t.forEach(n=>Array.isArray(n)?$c(n,e):e(n))}function JN(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Df(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Ot=xc(ka("Optional"),8),Sf=xc(ka("SkipSelf"),4);function Nf(t){return 128==(128&t.flags)}var Nn=(()=>((Nn=Nn||{})[Nn.Important=1]="Important",Nn[Nn.DashCase=2]="DashCase",Nn))();const q_=new Map;let b6=0;const K_="__ngContext__";function on(t,e){zn(e)?(t[K_]=e[Oc],function A6(t){q_.set(t[Oc],t)}(e)):t[K_]=e}let Q_;function Y_(t,e){return Q_(t,e)}function Gc(t){const e=t[Qe];return xn(e)?e[Qe]:e}function vM(t){return IM(t[kc])}function wM(t){return IM(t[yr])}function IM(t){for(;null!==t&&!xn(t);)t=t[yr];return t}function Fa(t,e,n,r,i){if(null!=r){let s,o=!1;xn(r)?s=r:zn(r)&&(o=!0,r=r[Dt]);const a=Ve(r);0===t&&null!==n?null==i?bM(e,n,a):oo(e,n,a,i||null,!0):1===t&&null!==n?oo(e,n,a,i||null,!0):2===t?function Ff(t,e,n){const r=Of(t,e);r&&function W6(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function Y6(t,e,n,r,i){const s=n[Br];s!==Ve(n)&&Fa(e,t,r,s,i);for(let a=sn;a<n.length;a++){const u=n[a];Wc(u[P],u,t,e,r,s)}}(e,t,s,n,i)}}function Pf(t,e,n){return t.createElement(e,n)}function TM(t,e){const n=t[Ca],r=n.indexOf(e);wN(e),n.splice(r,1)}function J_(t,e){if(t.length<=sn)return;const n=sn+e,r=t[n];if(r){const i=r[Pc];null!==i&&i!==t&&TM(i,r),e>0&&(t[n-1][yr]=r[yr]);const s=Df(t,sn+e);!function U6(t,e){Wc(t,e,e[ne],2,null,null),e[Dt]=null,e[rn]=null}(r[P],r);const o=s[Ur];null!==o&&o.detachView(s[P]),r[Qe]=null,r[yr]=null,r[te]&=-129}return r}function CM(t,e){if(!(256&e[te])){const n=e[ne];e[af]?.destroy(),e[uf]?.destroy(),n.destroyNode&&Wc(t,e,n,3,null,null),function j6(t){let e=t[kc];if(!e)return Z_(t[P],t);for(;e;){let n=null;if(zn(e))n=e[kc];else{const r=e[sn];r&&(n=r)}if(!n){for(;e&&!e[yr]&&e!==t;)zn(e)&&Z_(e[P],e),e=e[Qe];null===e&&(e=t),zn(e)&&Z_(e[P],e),n=e&&e[yr]}e=n}}(e)}}function Z_(t,e){if(!(256&e[te])){e[te]&=-129,e[te]|=256,function q6(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Vc)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];jr(4,a,u);try{u.call(a)}finally{jr(5,a,u)}}else{jr(4,i,s);try{s.call(i)}finally{jr(5,i,s)}}}}}(t,e),function G6(t,e){const n=t.cleanup,r=e[wa];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[wa]=null);const i=e[os];if(null!==i){e[os]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[P].type&&e[ne].destroy();const n=e[Pc];if(null!==n&&xn(e[Qe])){n!==e[Qe]&&TM(n,e);const r=e[Ur];null!==r&&r.detachView(t)}!function x6(t){q_.delete(t[Oc])}(e)}}function ev(t,e,n){return function DM(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Dt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===jn.None||s===jn.Emulated)return null}return Rn(r,n)}}(t,e.parent,n)}function oo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function bM(t,e,n){t.appendChild(e,n)}function SM(t,e,n,r,i){null!==r?oo(t,e,n,r,i):bM(t,e,n)}function Of(t,e){return t.parentNode(e)}let tv,sv,RM=function xM(t,e,n){return 40&t.type?Rn(t,n):null};function Lf(t,e,n,r){const i=ev(t,r,e),s=e[ne],a=function AM(t,e,n){return RM(t,e,n)}(r.parent||e[rn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)SM(s,i,n[u],a,!1);else SM(s,i,n,a,!1);void 0!==tv&&tv(s,r,e,n,i)}function qc(t,e){if(null!==e){const n=e.type;if(3&n)return Rn(e,t);if(4&n)return nv(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return qc(t,r);{const i=t[e.index];return xn(i)?nv(-1,i):Ve(i)}}if(32&n)return Y_(e,t)()||Ve(t[e.index]);{const r=MM(t,e);return null!==r?Array.isArray(r)?r[0]:qc(Gc(t[pt]),r):qc(t,e.next)}}return null}function MM(t,e){return null!==e?t[pt][rn].projection[e.projection]:null}function nv(t,e){const n=sn+t+1;if(n<e.length){const r=e[n],i=r[P].firstChild;if(null!==i)return qc(r,i)}return e[Br]}function rv(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&on(Ve(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)rv(t,e,n.child,r,i,s,!1),Fa(e,t,i,a,s);else if(32&u){const c=Y_(n,r);let l;for(;l=c();)Fa(e,t,i,l,s);Fa(e,t,i,a,s)}else 16&u?PM(t,e,r,n,i,s):Fa(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Wc(t,e,n,r,i,s){rv(n,r,t.firstChild,e,i,s,!1)}function PM(t,e,n,r,i,s){const o=n[pt],u=o[rn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Fa(e,t,i,u[c],s);else{let c=u;const l=o[Qe];Nf(r)&&(c.flags|=128),rv(t,e,c,l,i,s,!0)}}function OM(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function LM(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&m_(t,e,r),null!==i&&OM(t,e,i),null!==s&&function J6(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class F{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Jc=new F("ENVIRONMENT_INITIALIZER"),YM=new F("INJECTOR",-1),XM=new F("INJECTOR_DEF_TYPES");class JM{get(e,n=Ac){if(n===Ac){const r=new Error(`NullInjectorError: No provider for ${Ct(e)}!`);throw r.name="NullInjectorError",r}return n}}function D5(...t){return{\u0275providers:ZM(0,t),\u0275fromNgModule:!0}}function ZM(t,...e){const n=[],r=new Set;let i;return $c(e,s=>{const o=s;hv(o,n,[],r)&&(i||=[],i.push(o))}),void 0!==i&&ek(i,n),n}function ek(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];fv(i,s=>{e.push(s)})}}function hv(t,e,n,r){if(!(t=X(t)))return!1;let i=null,s=FR(t);const o=!s&&Ie(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=FR(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)hv(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{$c(s.imports,l=>{hv(l,e,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&ek(c,e)}if(!a){const c=no(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:ve},{provide:XM,useValue:i,multi:!0},{provide:Jc,useValue:()=>U(i),multi:!0})}const u=s.providers;null==u||a||fv(u,l=>{e.push(l)})}}return i!==t&&void 0!==t.providers}function fv(t,e){for(let n of t)c_(n)&&(n=n.\u0275providers),Array.isArray(n)?fv(n,e):e(n)}const b5=De({provide:String,useValue:De});function pv(t){return null!==t&&"object"==typeof t&&b5 in t}function ao(t){return"function"==typeof t}const gv=new F("Set Injector scope."),$f={},A5={};let mv;function jf(){return void 0===mv&&(mv=new JM),mv}class Gr{}class yv extends Gr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vv(e,o=>this.processProvider(o)),this.records.set(YM,Ua(void 0,this)),i.has("environment")&&this.records.set(Gr,Ua(void 0,this));const s=this.records.get(gv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(XM.multi,ve,z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ss(this),r=bn(void 0);try{return e()}finally{ss(n),bn(r)}}get(e,n=Ac,r=z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(zR))return e[zR](this);r=nf(r);const i=ss(this),s=bn(void 0);try{if(!(r&z.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function k5(t){return"function"==typeof t||"object"==typeof t&&t instanceof F}(e)&&Zh(e);a=u&&this.injectableDefInScope(u)?Ua(_v(e),$f):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&z.Self?jf():this.parent).get(e,n=r&z.Optional&&n===Ac?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[tf]=o[tf]||[]).unshift(Ct(e)),i)throw o;return function xW(t,e,n,r){const i=t[tf];throw e[$R]&&i.unshift(e[$R]),t.message=function RW(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Ct(e);if(Array.isArray(e))i=e.map(Ct).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ct(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(CW,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[tf]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{bn(s),ss(i)}}resolveInjectorInitializers(){const e=ss(this),n=bn(void 0);try{const r=this.get(Jc.multi,ve,z.Self);for(const i of r)i()}finally{ss(e),bn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ct(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new b(205,!1)}processProvider(e){let n=ao(e=X(e))?e:X(e&&e.provide);const r=function R5(t){return pv(t)?Ua(void 0,t.useValue):Ua(function rk(t,e,n){let r;if(ao(t)){const i=X(t);return no(i)||_v(i)}if(pv(t))r=()=>X(t.useValue);else if(function nk(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...f_(t.deps||[]));else if(function tk(t){return!(!t||!t.useExisting)}(t))r=()=>U(X(t.useExisting));else{const i=X(t&&(t.useClass||t.provide));if(!function N5(t){return!!t.deps}(t))return no(i)||_v(i);r=()=>new i(...f_(t.deps))}return r}(t),$f)}(e);if(ao(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Ua(void 0,$f,!0),i.factory=()=>f_(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===$f&&(n.value=A5,n.value=n.factory()),"object"==typeof n.value&&n.value&&function M5(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=X(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function _v(t){const e=Zh(t),n=null!==e?e.factory:no(t);if(null!==n)return n;if(t instanceof F)throw new b(204,!1);if(t instanceof Function)return function x5(t){const e=t.length;if(e>0)throw function jc(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new b(204,!1);const n=function IW(t){return t&&(t[ef]||t[VR])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new b(204,!1)}function Ua(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function vv(t,e){for(const n of t)Array.isArray(n)?vv(n,e):n&&c_(n)?vv(n.\u0275providers,e):e(n)}const Hf=new F("AppId",{providedIn:"root",factory:()=>P5}),P5="ng",ik=new F("Platform Initializer"),bi=new F("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sk=new F("CSP nonce",{providedIn:"root",factory:()=>function Kc(){if(void 0!==sv)return sv;if(typeof document<"u")return document;throw new b(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ak=(t,e)=>null;function uk(t,e){return ak(t,e)}class H5{}class dk{}class G5{resolveComponentFactory(e){throw function z5(t){const e=Error(`No component factory found for ${Ct(t)}.`);return e.ngComponent=t,e}(e)}}let Kf=(()=>{class t{}return t.NULL=new G5,t})();function q5(){return Ba(qt(),T())}function Ba(t,e){return new ls(Rn(t,e))}let ls=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=q5,t})();class fk{}let nl=(()=>{class t{constructor(){this.destroyNode=null}}return t.__NG_ELEMENT_ID__=()=>function K5(){const t=T(),n=Gn(qt().index,t);return(zn(n)?n:t)[ne]}(),t})(),Q5=(()=>{class t{}return t.\u0275prov=j({token:t,providedIn:"root",factory:()=>null}),t})();class rl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const pk=new rl("16.1.2"),Rv={};function il(t){for(;t;){t[te]|=64;const e=Gc(t);if(v_(t)&&!e)return t;t=e}return null}function Nv(t){return t.ngOriginalError}class uo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Nv(e);for(;n&&Nv(n);)n=Nv(n);return n||null}}const yk=new F("",{providedIn:"root",factory:()=>!1});function Si(t){return t instanceof Function?t():t}class Ek extends cN{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){il(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,r){const i=Pt(this);this.trackingVersion++;try{e(n,r)}finally{Pt(i)}}destroy(){this.trackingVersion++}}let Yf=null;function Tk(){return Yf??=new Ek,Yf}function Ck(t,e){return t[e]??Tk()}function Dk(t,e){const n=Tk();n.hasReadASignal&&(t[e]=Yf,n.lView=t,Yf=new Ek)}const re={};function qr(t){bk(ge(),T(),_n()+t,!1)}function bk(t,e,n,r){if(!r)if(3==(3&e[te])){const s=t.preOrderCheckHooks;null!==s&&yf(e,s,n)}else{const s=t.preOrderHooks;null!==s&&_f(e,s,0,n)}io(n)}function Rk(t,e=null,n=null,r){const i=Nk(t,e,n,r);return i.resolveInjectorInitializers(),i}function Nk(t,e=null,n=null,r,i=new Set){const s=[n||ve,D5(t)];return r=r||("object"==typeof t?void 0:Ct(t)),new yv(s,e||jf(),r||null,i)}let sr=(()=>{class t{static create(n,r){if(Array.isArray(n))return Rk({name:""},r,n,"");{const i=n.name??"";return Rk({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=Ac,t.NULL=new JM,t.\u0275prov=j({token:t,providedIn:"any",factory:()=>U(YM)}),t.__NG_ELEMENT_ID__=-1,t})();function H(t,e=z.Default){const n=T();return null===n?U(t,e):GN(qt(),n,X(t),e)}function Xf(t,e,n,r,i,s,o,a,u,c,l){const d=e.blueprint.slice();return d[Dt]=i,d[te]=140|r,(null!==c||t&&2048&t[te])&&(d[te]|=2048),vN(d),d[Qe]=d[Ea]=t,d[ft]=n,d[eo]=o||t&&t[eo],d[ne]=a||t&&t[ne],d[Ia]=u||t&&t[Ia]||null,d[rn]=s,d[Oc]=function S6(){return b6++}(),d[Ei]=l,d[rN]=c,d[pt]=2==e.type?t[pt]:d,d}function ja(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Mv(t,e,n,r,i){const s=DN(),o=D_(),u=t.data[e]=function m9(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function ba(){return null!==Q.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function x3(){return Q.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Fc(){const t=Q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Hr(s,!0),s}function sl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function kk(t,e,n,r,i){const s=Ck(e,af),o=_n(),a=2&r;try{if(io(-1),a&&e.length>he&&bk(t,e,he,!1),jr(a?2:0,i),a)s.runInContext(n,r,i);else{const c=Pt(null);try{n(r,i)}finally{Pt(c)}}}finally{a&&null===e[af]&&Dk(e,af),io(o),jr(a?3:1,i)}}function kv(t,e,n){if(__(e)){const r=Pt(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Pt(r)}}}function Pk(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Lv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Lv(t,e,n,r,i,s,o,a,u,c,l){const d=he+r,h=d+i,f=function l9(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:re);return n}(d,h),p="function"==typeof c?c():c;return f[P]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}let Ok=t=>null;function Lk(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?Fk(n,e,i,s):r.hasOwnProperty(i)&&Fk(n,e,r[i],s)}return n}function Fk(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Vk(t,e,n,r,i,s){for(let c=0;c<r.length;c++)F_(Ef(n,e),t,r[c].type);!function A9(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=sl(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=Nc(n.mergedAttrs,l.hostAttrs),x9(t,n,e,u,l),S9(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function y9(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,p=h?h.outputs:null;u=Lk(d.inputs,l,u,h?h.inputs:null),c=Lk(d.outputs,l,c,p);const g=null===u||null===o||YR(e)?null:M9(u,l,o);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,s)}function Uk(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function N3(){return Q.lFrame.currentDirectiveIndex}();try{io(s);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];S_(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&C9(u,c)}}finally{io(-1),S_(o)}}function C9(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Vv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function S9(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_r(e)&&(n[""]=t)}}function x9(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=no(i.type)),o=new Vc(s,_r(i),H);t.blueprint[r]=o,n[r]=o,function I9(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function E9(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,sl(t,n,i.hostVars,re),i)}function N9(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)Bk(r,n,o[a++],o[a++],o[a++])}function Bk(t,e,n,r,i){const s=Pt(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Pt(s)}}function M9(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function jk(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];x_(n[r]),o.contentQueries(2,e[s],s)}}}function Jf(t,e){return t[kc]?t[nN][yr]=e:t[kc]=e,t[nN]=e,e}function Bv(t,e,n){x_(0);const r=Pt(null);try{e(t,n)}finally{Pt(r)}}function $v(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];Bk(t.data[o],e[o],r,a,i)}}function Ai(t,e,n){const r=function pf(t,e){return Ve(e[t])}(e,t);!function EM(t,e,n){t.setValue(e,n)}(t[ne],r,n)}function k9(t,e){const n=Gn(e,t),r=n[P];!function P9(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Dt];null!==i&&null===n[Ei]&&(n[Ei]=uk(i,n[Ia])),jv(r,n,n[ft])}function jv(t,e,n){R_(e);try{const r=t.viewQuery;null!==r&&Bv(1,r,n);const i=t.template;null!==i&&kk(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&jk(t,e),t.staticViewQueries&&Bv(2,t.viewQuery,n);const s=t.components;null!==s&&function O9(t,e){for(let n=0;n<e.length;n++)k9(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,N_()}}let Wk=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=new s3(n,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return t.\u0275prov=j({token:t,providedIn:"root",factory:()=>new t}),t})();function Zf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=o_(i,a):2==s&&(r=o_(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ol(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Ve(s)),xn(s)){for(let a=sn;a<s.length;a++){const u=s[a],c=u[P].firstChild;null!==c&&ol(u[P],u,c,r)}s[Br]!==s[Dt]&&r.push(s[Br])}const o=n.type;if(8&o)ol(t,e,n.child,r);else if(32&o){const a=Y_(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=MM(e,n);if(Array.isArray(a))r.push(...a);else{const u=Gc(e[pt]);ol(u[P],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ep(t,e,n,r=!0){const i=e[eo].rendererFactory;i.begin&&i.begin();try{Kk(t,e,t.template,n)}catch(o){throw r&&function qk(t,e){const n=t[Ia],r=n?n.get(uo,null):null;r&&r.handleError(e)}(e,o),o}finally{i.end&&i.end(),e[eo].effectManager?.flush()}}function Kk(t,e,n,r){const i=e[te];if(256!=(256&i)){e[eo].effectManager?.flush(),R_(e);try{vN(e),function SN(t){return Q.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&kk(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&yf(e,c,null)}else{const c=t.preOrderHooks;null!==c&&_f(e,c,0,null),M_(e,0)}if(function B9(t){for(let e=vM(t);null!==e;e=wM(e)){if(!e[iN])continue;const n=e[Ca];for(let r=0;r<n.length;r++){m3(n[r])}}}(e),Qk(e,2),null!==t.contentQueries&&jk(t,e),o){const c=t.contentCheckHooks;null!==c&&yf(e,c)}else{const c=t.contentHooks;null!==c&&_f(e,c,1),M_(e,1)}!function c9(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=Ck(e,uf);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)io(~s);else{const o=s,a=n[++i],u=n[++i];R3(a,o),r.runInContext(u,2,e[o])}}}finally{null===e[uf]&&Dk(e,uf),io(-1)}}(t,e);const a=t.components;null!==a&&Xk(e,a,0);const u=t.viewQuery;if(null!==u&&Bv(2,u,r),o){const c=t.viewCheckHooks;null!==c&&yf(e,c)}else{const c=t.viewHooks;null!==c&&_f(e,c,2),M_(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[te]&=-73,wN(e)}finally{N_()}}}function Qk(t,e){for(let n=vM(t);null!==n;n=wM(n))for(let r=sn;r<n.length;r++)Yk(n[r],e)}function $9(t,e,n){Yk(Gn(e,t),n)}function Yk(t,e){if(!function p3(t){return 128==(128&t[te])}(t))return;const n=t[P];if(80&t[te]&&0===e||1024&t[te]||2===e)Kk(n,t,n.template,t[ft]);else if(t[Mc]>0){Qk(t,1);const i=t[P].components;null!==i&&Xk(t,i,1)}}function Xk(t,e,n){for(let r=0;r<e.length;r++)$9(t,e[r],n)}class al{get rootNodes(){const e=this._lView,n=e[P];return ol(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ft]}set context(e){this._lView[ft]=e}get destroyed(){return 256==(256&this._lView[te])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Qe];if(xn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(J_(e,r),Df(n,r))}this._attachedToViewContainer=!1}CM(this._lView[P],this._lView)}onDestroy(e){!function EN(t,e){if(256==(256&t[te]))throw new b(911,!1);null===t[os]&&(t[os]=[]),t[os].push(e)}(this._lView,e)}markForCheck(){il(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){this._lView[te]|=128}detectChanges(){ep(this._lView[P],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $6(t,e){Wc(t,e,e[ne],2,null,null)}(this._lView[P],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=e}}class j9 extends al{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;ep(e[P],e,e[ft],!1)}checkNoChanges(){}get context(){return null}}class Jk extends Kf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ie(e);return new ul(n,this.ngModule)}}function Zk(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class z9{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=nf(r);const i=this.injector.get(e,Rv,r);return i!==Rv||n===Rv?i:this.parentInjector.get(e,n,r)}}class ul extends dk{get inputs(){return Zk(this.componentDef.inputs)}get outputs(){return Zk(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function BW(t){return t.map(UW).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Gr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new z9(e,s):e,a=o.get(fk,null);if(null===a)throw new b(407,!1);const l={rendererFactory:a,sanitizer:o.get(Q5,null),effectManager:o.get(Wk,null)},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",f=r?function d9(t,e,n,r){const s=r.get(yk,!1)||n===jn.ShadowDom,o=t.selectRootElement(e,s);return function h9(t){Ok(t)}(o),o}(d,r,this.componentDef.encapsulation,o):Pf(d,h,function H9(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(h)),m=this.componentDef.signals?4608:this.componentDef.onPush?576:528,v=Lv(0,null,null,1,0,null,null,null,null,null,null),y=Xf(null,v,null,m,null,null,l,d,o,null,null);let E,M;R_(y);try{const O=this.componentDef;let W,ot=null;O.findHostDirectiveDefs?(W=[],ot=new Map,O.findHostDirectiveDefs(O,W,ot),W.push(O)):W=[O];const Or=function q9(t,e){const n=t[P],r=he;return t[r]=e,ja(n,r,2,"#host",null)}(y,f),Xs=function W9(t,e,n,r,i,s,o){const a=i[P];!function K9(t,e,n,r){for(const i of t)e.mergedAttrs=Nc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Zf(e,e.mergedAttrs,!0),null!==n&&LM(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=uk(e,i[Ia]));const c=s.rendererFactory.createRenderer(e,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=Xf(i,Pk(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&Vv(a,t,r.length-1),Jf(i,d),i[t.index]=d}(Or,f,O,W,y,l,d);M=function _N(t,e){return t.data[e]}(v,he),f&&function Y9(t,e,n,r){if(r)m_(t,n,["ng-version",pk.full]);else{const{attrs:i,classes:s}=function $W(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!gr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&m_(t,n,i),s&&s.length>0&&OM(t,n,s.join(" "))}}(d,O,f,r),void 0!==n&&function X9(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(M,this.ngContentSelectors,n),E=function Q9(t,e,n,r,i,s){const o=qt(),a=i[P],u=Rn(o,i);Vk(a,i,o,n,null,r);for(let l=0;l<n.length;l++)on(so(i,a,o.directiveStart+l,o),i);Uk(a,i,o),u&&on(u,i);const c=so(i,a,o.directiveStart+o.componentOffset,o);if(t[ft]=i[ft]=c,null!==s)for(const l of s)l(c,e);return kv(a,o,t),c}(Xs,O,W,ot,y,[J9]),jv(v,y,null)}finally{N_()}return new G9(this.componentType,E,Ba(M,y),y,M)}}class G9 extends H5{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new j9(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;$v(s[P],s,i,e,n),this.previousInputValues.set(e,n),il(Gn(this._tNode.index,s))}}get injector(){return new xa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function J9(){const t=qt();mf(T()[P],t)}function za(t,e,n,r){return function an(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(t,function Sa(){return Q.lFrame.bindingIndex++}(),n)?e+Z(n)+r:re}function Yv(t,e,n,r,i){const o=i?"class":"style";$v(t,n,e.inputs[o],o,r)}function ke(t,e,n,r){const i=T(),s=ge(),o=he+t,a=i[ne],u=s.firstCreatePass?function k7(t,e,n,r,i,s){const o=e.consts,u=ja(e,t,2,r,as(o,i));return function Fv(t,e,n,r){if(CN()){const i=null===r?null:{"":-1},s=function D9(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(XR(e,o.selectors,!1))if(r||(r=[]),_r(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Vv(t,e,a.length)}else r.unshift(o),Vv(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Vk(t,e,n,o,i,a),i&&function b9(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new b(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Nc(n.mergedAttrs,n.attrs)}(e,n,u,as(o,s)),null!==u.attrs&&Zf(u,u.attrs,!1),null!==u.mergedAttrs&&Zf(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],c=IP(s,i,u,a,e,t);i[o]=c;const l=function lf(t){return 1==(1&t.flags)}(u);return Hr(u,!0),LM(a,c,u),32!=(32&u.flags)&&gf()&&Lf(s,i,c,u),0===function _3(){return Q.lFrame.elementDepthCount}()&&on(c,i),function v3(){Q.lFrame.elementDepthCount++}(),l&&(function Pv(t,e,n){CN()&&(function T9(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;to(n)&&function R9(t,e,n){const r=Rn(e,t),i=Pk(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Jf(t,Xf(t,i,null,o,r,e,null,t[eo].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ef(n,e),on(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=so(e,t,a,n);on(c,e),null!==o&&N9(0,a-i,c,u,0,o),_r(u)&&(Gn(n.index,e)[ft]=so(e,t,a,n))}}(t,e,n,Rn(n,e)),64==(64&n.flags)&&Uk(t,e,n))}(s,i,u),kv(s,u,i)),null!==r&&function Ov(t,e,n=Rn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}(i,u),ke}function He(){let t=qt();D_()?function b_(){Q.lFrame.isParent=!1}():(t=t.parent,Hr(t,!1));const e=t;(function I3(t){return Q.skipHydrationRootTNode===t})(e)&&function D3(){Q.skipHydrationRootTNode=null}(),function w3(){Q.lFrame.elementDepthCount--}();const n=ge();return n.firstCreatePass&&(mf(n,t),__(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function j3(t){return 0!=(8&t.flags)}(e)&&Yv(n,e,T(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function H3(t){return 0!=(16&t.flags)}(e)&&Yv(n,e,T(),e.stylesWithoutHost,!1),He}function ds(t,e,n,r){return ke(t,e,n,r),He(),ds}let IP=(t,e,n,r,i,s)=>(us(!0),Pf(r,i,function ON(){return Q.lFrame.currentNamespace}()));function ap(t){return!!t&&"function"==typeof t.then}function CP(t){return!!t&&"function"==typeof t.subscribe}function mt(t,e=""){const n=T(),r=ge(),i=t+he,s=r.firstCreatePass?ja(r,i,1,e,null):r.data[i],o=ZP(r,n,s,e,t);n[i]=o,gf()&&Lf(r,n,o,s),Hr(s,!1)}let ZP=(t,e,n,r,i)=>(us(!0),function kf(t,e){return t.createText(e)}(e[ne],r));function sw(t){return Ir("",t,""),sw}function Ir(t,e,n){const r=T(),i=za(r,t,e,n);return i!==re&&Ai(r,_n(),i),Ir}const eu="en-US";let I1=eu;class tu{}class W1{}class hw extends tu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jk(this);const i=Hn(e);this._bootstrapComponents=Si(i.bootstrap),this._r3Injector=Nk(e,n,[{provide:tu,useValue:this},{provide:Kf,useValue:this.componentFactoryResolver},...r],Ct(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class fw extends W1{constructor(e){super(),this.moduleType=e}create(e){return new hw(this.moduleType,e,[])}}class K1 extends tu{constructor(e){super(),this.componentFactoryResolver=new Jk(this),this.instance=null;const n=new yv([...e.providers,{provide:tu,useValue:this},{provide:Kf,useValue:this.componentFactoryResolver}],e.parent||jf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function pw(t,e,n=null){return new K1({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let LK=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=ZM(0,n.type),i=r.length>0?pw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=j({token:t,providedIn:"environment",factory:()=>new t(U(Gr))}),t})();function Q1(t){t.getStandaloneInjector=e=>e.get(LK).getOrCreateStandaloneInjector(t)}function mw(t){return e=>{setTimeout(t,void 0,e)}}const wn=class uQ extends _i{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=mw(s),i&&(i=mw(i)),o&&(o=mw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Bn&&e.add(a),a}};let Er=(()=>{class t{}return t.__NG_ELEMENT_ID__=vQ,t})();function vQ(){return function hO(t,e){let n;const r=e[t.index];return xn(r)?n=r:(n=function $k(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}(r,e,null,t),e[t.index]=n,Jf(e,n)),fO(n,e,t,r),new lO(n,t,e)}(qt(),T())}const wQ=Er,lO=class extends wQ{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ba(this._hostTNode,this._hostLView)}get injector(){return new xa(this._hostTNode,this._hostLView)}get parentInjector(){const e=L_(this._hostTNode,this._hostLView);if(UN(e)){const n=wf(e,this._hostLView),r=vf(e);return new xa(n[P].data[r+8],n)}return new xa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=dO(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Bc(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const u=o?e:new ul(Ie(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const m=(o?c:this.parentInjector).get(Gr,null);m&&(s=m)}Ie(u.componentType??{});const f=u.create(c,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView,s=i[P];if(function g3(t){return xn(t[Qe])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const c=i[Qe],l=new lO(c,c[rn],c[Qe]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;if(function H6(t,e,n,r){const i=sn+r,s=n.length;r>0&&(n[i-1][yr]=e),r<s-sn?(e[yr]=n[i],JN(n,sn+r,e)):(n.push(e),e[yr]=null),e[Qe]=n;const o=e[Pc];null!==o&&n!==o&&function z6(t,e){const n=t[Ca];e[pt]!==e[Qe][Qe][pt]&&(t[iN]=!0),null===n?t[Ca]=[e]:n.push(e)}(o,e);const a=e[Ur];null!==a&&a.insertView(t),e[te]|=128}(s,i,a,o),!r){const u=nv(o,a),c=i[ne],l=Of(c,a[Br]);null!==l&&function B6(t,e,n,r,i,s){r[Dt]=i,r[rn]=e,Wc(t,r,n,1,i,s)}(s,a[rn],c,i,l,u)}return e.attachToViewContainerRef(),JN(vw(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=dO(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=J_(this._lContainer,n);r&&(Df(vw(this._lContainer),n),CM(r[P],r))}detach(e){const n=this._adjustIndex(e,-1),r=J_(this._lContainer,n);return r&&null!=Df(vw(this._lContainer),n)?new al(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function dO(t){return t[8]}function vw(t){return t[8]||(t[8]=[])}let fO=function pO(t,e,n,r){if(t[Br])return;let i;i=8&n.type?Ve(r):function IQ(t,e){const n=t[ne],r=n.createComment(""),i=Rn(e,t);return oo(n,Of(n,i),r,function K6(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Br]=i};const Rw=new F("Application Initializer");let Nw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=L(Rw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(ap(s))n.push(s);else if(CP(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),UO=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Ri=new F("LocaleId",{providedIn:"root",factory:()=>L(Ri,z.Optional|z.SkipSelf)||function JQ(){return typeof $localize<"u"&&$localize.locale||eu}()});let mp=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tr(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class eY{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let BO=(()=>{class t{compileModuleSync(n){return new fw(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Si(Hn(n).declarations).reduce((o,a)=>{const u=Ie(a);return u&&o.push(new ul(u)),o},[]);return new eY(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function HO(...t){}class Re{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wn(!1),this.onMicrotaskEmpty=new wn(!1),this.onStable=new wn(!1),this.onError=new wn(!1),typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function rY(){let t=Me.requestAnimationFrame,e=Me.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function oY(t){const e=()=>{!function sY(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Me,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,kw(t),t.isCheckStableRunning=!0,Mw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),kw(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return zO(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),GO(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return zO(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),GO(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,kw(t),Mw(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Re.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(Re.isInAngularZone())throw new b(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,iY,HO,HO);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const iY={};function Mw(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function kw(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function zO(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function GO(t){t._nesting--,Mw(t)}class aY{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wn,this.onMicrotaskEmpty=new wn,this.onStable=new wn,this.onError=new wn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const qO=new F("",{providedIn:"root",factory:WO});function WO(){const t=L(Re);let e=!0;return function dW(...t){const e=Sc(t),n=function iW(t,e){return"number"==typeof i_(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?fr(r[0]):ma(n)(kt(r,e)):Lr}(new Ke(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new Ke(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Re.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(PR()))}const KO=new F(""),yp=new F("");let Lw,Pw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Lw||(function uY(t){Lw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(U(Re),U(Ow),U(yp))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})(),Ow=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Lw?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),fs=null;const QO=new F("AllowMultipleToken"),Fw=new F("PlatformDestroyListeners"),Vw=new F("appBootstrapListener");class XO{constructor(e,n){this.name=e,this.token=n}}function ZO(t,e,n=[]){const r=`Platform: ${e}`,i=new F(r);return(s=[])=>{let o=Uw();if(!o||o.injector.get(QO,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function dY(t){if(fs&&!fs.get(QO,!1))throw new b(400,!1);(function YO(){!function r3(t){lN=t}(()=>{throw new b(600,!1)})})(),fs=t;const e=t.get(tL);(function JO(t){t.get(ik,null)?.forEach(n=>n())})(t)}(function eL(t=[],e){return sr.create({name:e,providers:[{provide:gv,useValue:"platform"},{provide:Fw,useValue:new Set([()=>fs=null])},...t]})}(a,r))}return function fY(t){const e=Uw();if(!e)throw new b(401,!1);return e}()}}function Uw(){return fs?.get(tL)??null}let tL=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function pY(t="zone.js",e){return"noop"===t?new aY:"zone.js"===t?new Re(e):t}(r?.ngZone,function nL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function OK(t,e,n){return new hw(t,e,n)}(n.moduleType,this.injector,function aL(t){return[{provide:Re,useFactory:t},{provide:Jc,multi:!0,useFactory:()=>{const e=L(mY,{optional:!0});return()=>e.initialize()}},{provide:oL,useFactory:gY},{provide:qO,useFactory:WO}]}(()=>i)),o=s.injector.get(uo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{_p(this._modules,s),a.unsubscribe()})}),function rL(t,e,n){try{const r=n();return ap(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Nw);return a.runInitializers(),a.donePromise.then(()=>(function E1(t){nr(t,"Expected localeId to be defined"),"string"==typeof t&&(I1=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ri,eu)||eu),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=iL({},r);return function cY(t,e,n){const r=new fw(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(iu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new b(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new b(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Fw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(U(sr))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function iL(t,e){return Array.isArray(e)?e.reduce(iL,t):{...t,...e}}let iu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(oL),this.zoneIsStable=L(qO),this.componentTypes=[],this.components=[],this.isStable=L(mp).hasPendingTasks.pipe(pr(n=>n?K(!1):this.zoneIsStable),function hW(t,e=ns){return t=t??fW,Nt((n,r)=>{let i,s=!0;n.subscribe(Mt(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),PR()),this._injector=L(Gr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof dk;if(!this._injector.get(Nw).done)throw!i&&function va(t){const e=Ie(t)||nn(t)||An(t);return null!==e&&e.standalone}(n),new b(405,!1);let o;o=i?n:this._injector.get(Kf).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function lY(t){return t.isBoundToModule}(o)?void 0:this._injector.get(tu),c=o.create(sr.NULL,[],r||o.selector,a),l=c.location.nativeElement,d=c.injector.get(KO,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),_p(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new b(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;_p(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Vw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>_p(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function _p(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const oL=new F("",{providedIn:"root",factory:()=>L(uo).handleError.bind(void 0)});function gY(){const t=L(Re),e=L(uo);return n=>t.runOutsideAngular(()=>e.handleError(n))}let mY=(()=>{class t{constructor(){this.zone=L(Re),this.applicationRef=L(iu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let Bw=(()=>{class t{}return t.__NG_ELEMENT_ID__=_Y,t})();function _Y(t){return function vY(t,e,n){if(to(t)&&!n){const r=Gn(t.index,e);return new al(r,r)}return 47&t.type?new al(e[pt],e):null}(qt(),T(),16==(16&t))}const MY=ZO(null,"core",[]);let kY=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(U(iu))},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({}),t})(),Kw=null;function su(){return Kw}class GY{}const kn=new F("DocumentToken");let Qw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return L(WY)},providedIn:"platform"}),t})();const qY=new F("Location Initialized");let WY=(()=>{class t extends Qw{constructor(){super(),this._doc=L(kn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return su().getBaseHref(this._doc)}onPopState(n){const r=su().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=su().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return new t},providedIn:"platform"}),t})();function Yw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function TL(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ni(t){return t&&"?"!==t[0]?"?"+t:t}let po=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return L(DL)},providedIn:"root"}),t})();const CL=new F("appBaseHref");let DL=(()=>{class t extends po{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Yw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ni(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Ni(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Ni(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(U(Qw),U(CL,8))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),KY=(()=>{class t extends po{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Yw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Ni(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Ni(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(U(Qw),U(CL,8))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})(),Xw=(()=>{class t{constructor(n){this._subject=new wn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function XY(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(TL(bL(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ni(r))}normalize(n){return t.stripTrailingSlash(function YY(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,bL(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ni(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ni(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=Ni,t.joinWithSlash=Yw,t.stripTrailingSlash=TL,t.\u0275fac=function(n){return new(n||t)(U(po))},t.\u0275prov=j({token:t,factory:function(){return function QY(){return new Xw(U(po))}()},providedIn:"root"}),t})();function bL(t){return t.replace(/\/index.html$/,"")}function OL(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let lJ=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({}),t})();function HL(t){return"server"===t}let pJ=(()=>{class t{}return t.\u0275prov=j({token:t,providedIn:"root",factory:()=>new gJ(U(kn),window)}),t})();class gJ{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function mJ(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=zL(this.window.history)||zL(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function zL(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class GL{}class UJ extends GY{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pI extends UJ{static makeCurrent(){!function zY(t){Kw||(Kw=t)}(new pI)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function BJ(){return bl=bl||document.querySelector("base"),bl?bl.getAttribute("href"):null}();return null==n?null:function $J(t){Pp=Pp||document.createElement("a"),Pp.setAttribute("href",t);const e=Pp.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){bl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return OL(document.cookie,e)}}let Pp,bl=null,HJ=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const gI=new F("EventManagerPlugins");let YL=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new b(5101,!1);return this._eventNameToPlugin.set(n,r),r}}return t.\u0275fac=function(n){return new(n||t)(U(gI),U(Re))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();class XL{constructor(e){this._doc=e}}const mI="ng-app-id";let JL=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=HL(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${mI}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(mI),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(mI,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return t.\u0275fac=function(n){return new(n||t)(U(kn),U(Hf),U(sk,8),U(bi))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const yI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_I=/%COMP%/g,WJ=new F("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function eF(t,e){return e.map(n=>n.replace(_I,t))}let tF=(()=>{class t{constructor(n,r,i,s,o,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=HL(a),this.defaultRenderer=new vI(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===jn.ShadowDom&&(r={...r,encapsulation:jn.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof rF?i.applyToHost(n):i instanceof wI&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestory,d=this.platformIsServer;switch(r.encapsulation){case jn.Emulated:s=new rF(u,c,r,this.appId,l,o,a,d);break;case jn.ShadowDom:return new XJ(u,c,n,r,o,a,this.nonce,d);default:s=new wI(u,c,r,l,o,a,d)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return t.\u0275fac=function(n){return new(n||t)(U(YL),U(JL),U(Hf),U(WJ),U(kn),U(bi),U(Re),U(sk))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();class vI{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(yI[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(nF(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(nF(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new b(5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=yI[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=yI[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Nn.DashCase|Nn.Important)?e.style.setProperty(n,r,i&Nn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Nn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=su().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function nF(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class XJ extends vI{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=eF(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wI extends vI{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=u?eF(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class rF extends wI{constructor(e,n,r,i,s,o,a,u){const c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=function KJ(t){return"_ngcontent-%COMP%".replace(_I,t)}(c),this.hostAttr=function QJ(t){return"_nghost-%COMP%".replace(_I,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let JJ=(()=>{class t extends XL{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(U(kn))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const iF=["alt","control","meta","shift"],ZJ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eZ={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let tZ=(()=>{class t extends XL{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>su().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),iF.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=ZJ[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),iF.forEach(o=>{o!==i&&(0,eZ[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(U(kn))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const oF=[{provide:bi,useValue:"browser"},{provide:ik,useValue:function nZ(){pI.makeCurrent()},multi:!0},{provide:kn,useFactory:function iZ(){return function n5(t){sv=t}(document),document},deps:[]}],sZ=ZO(MY,"browser",oF),oZ=new F(""),aF=[{provide:yp,useClass:class jJ{addToWindow(e){Me.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new b(5103,!1);return s},Me.getAllAngularTestabilities=()=>e.getAllTestabilities(),Me.getAllAngularRootElements=()=>e.getAllRootElements(),Me.frameworkStabilizers||(Me.frameworkStabilizers=[]),Me.frameworkStabilizers.push(r=>{const i=Me.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?su().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:KO,useClass:Pw,deps:[Re,Ow,yp]},{provide:Pw,useClass:Pw,deps:[Re,Ow,yp]}],uF=[{provide:gv,useValue:"root"},{provide:uo,useFactory:function rZ(){return new uo},deps:[]},{provide:gI,useClass:JJ,multi:!0,deps:[kn,Re,bi]},{provide:gI,useClass:tZ,multi:!0,deps:[kn]},tF,JL,YL,{provide:fk,useExisting:tF},{provide:GL,useClass:HJ,deps:[]},[]];let aZ=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Hf,useValue:n.appId}]}}}return t.\u0275fac=function(n){return new(n||t)(U(oZ,12))},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({providers:[...uF,...aF],imports:[lJ,kY]}),t})(),cF=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(U(kn))},t.\u0275prov=j({token:t,factory:function(n){let r=null;return r=n?new n:function cZ(){return new cF(U(kn))}(),r},providedIn:"root"}),t})();function ou(t,e){return xe(e)?Gt(t,e,1):Gt(t,1)}function ki(t,e){return Nt((n,r)=>{let i=0;n.subscribe(Mt(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Sl(t){return Nt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}typeof window<"u"&&window;class Op{}class Lp{}class Xr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Xr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Xr;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Xr?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class pZ{encodeKey(e){return fF(e)}encodeValue(e){return fF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const mZ=/%(\d[a-f0-9])/gi,yZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function fF(t){return encodeURIComponent(t).replace(mZ,(e,n)=>yZ[n]??e)}function Fp(t){return`${t}`}class gs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new pZ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function gZ(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(Fp):[Fp(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new gs({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Fp(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Fp(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class _Z{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function pF(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function gF(t){return typeof Blob<"u"&&t instanceof Blob}function mF(t){return typeof FormData<"u"&&t instanceof FormData}class Al{constructor(e,n,r,i){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function vZ(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Xr),this.context||(this.context=new _Z),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new gs,this.urlWithParams=n}serializeBody(){return null===this.body?null:pF(this.body)||gF(this.body)||mF(this.body)||function wZ(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mF(this.body)?null:gF(this.body)?this.body.type||null:pF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,c=e.params||this.params;const l=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new Al(n,r,s,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var vt=(()=>((vt=vt||{})[vt.Sent=0]="Sent",vt[vt.UploadProgress=1]="UploadProgress",vt[vt.ResponseHeader=2]="ResponseHeader",vt[vt.DownloadProgress=3]="DownloadProgress",vt[vt.Response=4]="Response",vt[vt.User=5]="User",vt))();class EI{constructor(e,n=200,r="OK"){this.headers=e.headers||new Xr,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class TI extends EI{constructor(e={}){super(e),this.type=vt.ResponseHeader}clone(e={}){return new TI({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class au extends EI{constructor(e={}){super(e),this.type=vt.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new au({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yF extends EI{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function CI(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let _F=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof Al)s=n;else{let u,c;u=i.headers instanceof Xr?i.headers:new Xr(i.headers),i.params&&(c=i.params instanceof gs?i.params:new gs({fromObject:i.params})),s=new Al(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=K(s).pipe(ou(u=>this.handler.handle(u)));if(n instanceof Al||"events"===i.observe)return o;const a=o.pipe(ki(u=>u instanceof au));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(_e(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(_e(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(_e(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(_e(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new gs).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,CI(i,r))}post(n,r,i={}){return this.request("POST",n,CI(i,r))}put(n,r,i={}){return this.request("PUT",n,CI(i,r))}}return t.\u0275fac=function(n){return new(n||t)(U(Op))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();function IF(t,e){return e(t)}function EZ(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const CZ=new F(""),xl=new F(""),EF=new F("");function DZ(){let t=null;return(e,n)=>{null===t&&(t=(L(CZ,{optional:!0})??[]).reduceRight(EZ,IF));const r=L(mp),i=r.add();return t(e,n).pipe(Sl(()=>r.remove(i)))}}let TF=(()=>{class t extends Op{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=L(mp)}handle(n){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(xl),...this.injector.get(EF,[])]));this.chain=i.reduceRight((s,o)=>function TZ(t,e,n){return(r,i)=>n.runInContext(()=>e(r,s=>t(s,i)))}(s,o,this.injector),IF)}const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Sl(()=>this.pendingTasks.remove(r)))}}return t.\u0275fac=function(n){return new(n||t)(U(Lp),U(Gr))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const xZ=/^\)\]\}',?\n/;let DF=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new b(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?kt(r.\u0275loadImpl()):K(null)).pipe(pr(()=>new Ke(s=>{const o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((g,m)=>o.setRequestHeader(g,m.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const g=n.detectContentTypeHeader();null!==g&&o.setRequestHeader("Content-Type",g)}if(n.responseType){const g=n.responseType.toLowerCase();o.responseType="json"!==g?g:"text"}const a=n.serializeBody();let u=null;const c=()=>{if(null!==u)return u;const g=o.statusText||"OK",m=new Xr(o.getAllResponseHeaders()),v=function RZ(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return u=new TI({headers:m,status:o.status,statusText:g,url:v}),u},l=()=>{let{headers:g,status:m,statusText:v,url:y}=c(),E=null;204!==m&&(E=typeof o.response>"u"?o.responseText:o.response),0===m&&(m=E?200:0);let M=m>=200&&m<300;if("json"===n.responseType&&"string"==typeof E){const O=E;E=E.replace(xZ,"");try{E=""!==E?JSON.parse(E):null}catch(W){E=O,M&&(M=!1,E={error:W,text:E})}}M?(s.next(new au({body:E,headers:g,status:m,statusText:v,url:y||void 0})),s.complete()):s.error(new yF({error:E,headers:g,status:m,statusText:v,url:y||void 0}))},d=g=>{const{url:m}=c(),v=new yF({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:m||void 0});s.error(v)};let h=!1;const f=g=>{h||(s.next(c()),h=!0);let m={type:vt.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),"text"===n.responseType&&o.responseText&&(m.partialText=o.responseText),s.next(m)},p=g=>{let m={type:vt.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),s.next(m)};return o.addEventListener("load",l),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),n.reportProgress&&(o.addEventListener("progress",f),null!==a&&o.upload&&o.upload.addEventListener("progress",p)),o.send(a),s.next({type:vt.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",l),o.removeEventListener("timeout",d),n.reportProgress&&(o.removeEventListener("progress",f),null!==a&&o.upload&&o.upload.removeEventListener("progress",p)),o.readyState!==o.DONE&&o.abort()}})))}}return t.\u0275fac=function(n){return new(n||t)(U(GL))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();const DI=new F("XSRF_ENABLED"),bF=new F("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),SF=new F("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class AF{}let kZ=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=OL(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(U(kn),U(bi),U(bF))},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();function PZ(t,e){const n=t.url.toLowerCase();if(!L(DI)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=L(AF).getToken(),i=L(SF);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var ze=(()=>((ze=ze||{})[ze.Interceptors=0]="Interceptors",ze[ze.LegacyInterceptors=1]="LegacyInterceptors",ze[ze.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ze[ze.NoXsrfProtection=3]="NoXsrfProtection",ze[ze.JsonpSupport=4]="JsonpSupport",ze[ze.RequestsMadeViaParent=5]="RequestsMadeViaParent",ze[ze.Fetch=6]="Fetch",ze))();function go(t,e){return{\u0275kind:t,\u0275providers:e}}function OZ(...t){const e=[_F,DF,TF,{provide:Op,useExisting:TF},{provide:Lp,useExisting:DF},{provide:xl,useValue:PZ,multi:!0},{provide:DI,useValue:!0},{provide:AF,useClass:kZ}];for(const n of t)e.push(...n.\u0275providers);return function dv(t){return{\u0275providers:t}}(e)}const xF=new F("LEGACY_INTERCEPTOR_FN");let FZ=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({providers:[OZ(go(ze.LegacyInterceptors,[{provide:xF,useFactory:DZ},{provide:xl,useExisting:xF,multi:!0}]))]}),t})();const{isArray:zZ}=Array,{getPrototypeOf:GZ,prototype:qZ,keys:WZ}=Object;const{isArray:YZ}=Array;function bI(...t){const e=Sc(t),n=function rW(t){return xe(i_(t))?t.pop():void 0}(t),{args:r,keys:i}=function KZ(t){if(1===t.length){const e=t[0];if(zZ(e))return{args:e,keys:null};if(function QZ(t){return t&&"object"==typeof t&&GZ(t)===qZ}(e)){const n=WZ(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return kt([],e);const s=new Ke(function eee(t,e,n=ns){return r=>{RF(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)RF(e,()=>{const c=kt(t[u],e);let l=!1;c.subscribe(Mt(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function ZZ(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):ns));return n?s.pipe(function JZ(t){return _e(e=>function XZ(t,e){return YZ(e)?t(...e):t(e)}(t,e))}(n)):s}function RF(t,e,n){t?vi(n,t,e):e()}const Up=Dc(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function SI(...t){return function tee(){return ma(1)}()(kt(t,Sc(t)))}function NF(t){return new Ke(e=>{fr(t()).subscribe(e)})}function Rl(t,e){const n=xe(t)?t:()=>t,r=i=>i.error(n());return new Ke(e?i=>e.schedule(r,0,i):r)}function AI(){return Nt((t,e)=>{let n=null;t._refCount++;const r=Mt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class MF extends Ke{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,_R(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bn;const n=this.getSubject();e.add(this.source.subscribe(Mt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bn.EMPTY)}return e}refCount(){return AI()(this)}}function uu(t){return t<=0?()=>Lr:Nt((e,n)=>{let r=0;e.subscribe(Mt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Bp(t){return Nt((e,n)=>{let r=!1;e.subscribe(Mt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function kF(t=ree){return Nt((e,n)=>{let r=!1;e.subscribe(Mt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ree(){return new Up}function mo(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ki((i,s)=>t(i,s,r)):ns,uu(1),n?Bp(e):kF(()=>new Up))}function un(t,e,n){const r=xe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Nt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Mt(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):ns}function yo(t){return Nt((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Mt(n,void 0,void 0,o=>{s=fr(t(o,yo(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function xI(t){return t<=0?()=>Lr:Nt((e,n)=>{let r=[];e.subscribe(Mt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}const se="primary",Nl=Symbol("RouteTitle");class uee{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function cu(t){return new uee(t)}function cee(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Jr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!PF(t[i],e[i]))return!1;return!0}function PF(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function OF(t){return t.length>0?t[t.length-1]:null}function ms(t){return function HZ(t){return!!t&&(t instanceof Ke||xe(t.lift)&&xe(t.subscribe))}(t)?t:ap(t)?kt(Promise.resolve(t)):K(t)}const dee={exact:function VF(t,e,n){if(!_o(t.segments,e.segments)||!$p(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!VF(t.children[r],e.children[r],n))return!1;return!0},subset:UF},LF={exact:function hee(t,e){return Jr(t,e)},subset:function fee(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>PF(t[n],e[n]))},ignored:()=>!0};function FF(t,e,n){return dee[n.paths](t.root,e.root,n.matrixParams)&&LF[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function UF(t,e,n){return BF(t,e,e.segments,n)}function BF(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!_o(i,n)||e.hasChildren()||!$p(i,n,r))}if(t.segments.length===n.length){if(!_o(t.segments,n)||!$p(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!UF(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(_o(t.segments,i)&&$p(t.segments,i,r)&&t.children[se])&&BF(t.children[se],e,s,r)}}function $p(t,e,n){return e.every((r,i)=>LF[n](t[i].parameters,r.parameters))}class lu{constructor(e=new be([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cu(this.queryParams)),this._queryParamMap}toString(){return mee.serialize(this)}}class be{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jp(this)}}class Ml{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=cu(this.parameters)),this._parameterMap}toString(){return HF(this)}}function _o(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let kl=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return new RI},providedIn:"root"}),t})();class RI{parse(e){const n=new See(e);return new lu(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Pl(e.root,!0)}`,r=function vee(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Hp(n)}=${Hp(i)}`).join("&"):`${Hp(n)}=${Hp(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function yee(t){return encodeURI(t)}(e.fragment)}`:""}`}}const mee=new RI;function jp(t){return t.segments.map(e=>HF(e)).join("/")}function Pl(t,e){if(!t.hasChildren())return jp(t);if(e){const n=t.children[se]?Pl(t.children[se],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==se&&r.push(`${i}:${Pl(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function gee(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==se&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===se?[Pl(t.children[se],!1)]:[`${i}:${Pl(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[se]?`${jp(t)}/${n[0]}`:`${jp(t)}/(${n.join("//")})`}}function $F(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hp(t){return $F(t).replace(/%3B/gi,";")}function NI(t){return $F(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zp(t){return decodeURIComponent(t)}function jF(t){return zp(t.replace(/\+/g,"%20"))}function HF(t){return`${NI(t.path)}${function _ee(t){return Object.keys(t).map(e=>`;${NI(e)}=${NI(t[e])}`).join("")}(t.parameters)}`}const wee=/^[^\/()?;#]+/;function MI(t){const e=t.match(wee);return e?e[0]:""}const Iee=/^[^\/()?;=#]+/,Tee=/^[^=?&#]+/,Dee=/^[^&#]+/;class See{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[se]=new be(e,n)),r}parseSegment(){const e=MI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new b(4009,!1);return this.capture(e),new Ml(zp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Eee(t){const e=t.match(Iee);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=MI(this.remaining);i&&(r=i,this.capture(r))}e[zp(n)]=zp(r)}parseQueryParam(e){const n=function Cee(t){const e=t.match(Tee);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function bee(t){const e=t.match(Dee);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=jF(n),s=jF(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=MI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new b(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=se);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[se]:new be([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new b(4011,!1)}}function zF(t){return t.segments.length>0?new be([],{[se]:t}):t}function GF(t){const e={};for(const r of Object.keys(t.children)){const s=GF(t.children[r]);if(r===se&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Aee(t){if(1===t.numberOfChildren&&t.children[se]){const e=t.children[se];return new be(t.segments.concat(e.segments),e.children)}return t}(new be(t.segments,e))}function vo(t){return t instanceof lu}function qF(t){let e;const i=zF(function n(s){const o={};for(const u of s.children){const c=n(u);o[u.outlet]=c}const a=new be(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function WF(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return kI(i,i,i,n,r);const s=function Ree(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new QF(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new QF(n,e,r)}(e);if(s.toRoot())return kI(i,i,new be([],{}),n,r);const o=function Nee(t,e,n){if(t.isAbsolute)return new qp(e,!0,0);if(!n)return new qp(e,!1,NaN);if(null===n.parent)return new qp(n,!0,0);const r=Gp(t.commands[0])?0:1;return function Mee(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new b(4005,!1);i=r.segments.length}return new qp(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Ll(o.segmentGroup,o.index,s.commands):YF(o.segmentGroup,o.index,s.commands);return kI(i,o.segmentGroup,a,n,r)}function Gp(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ol(t){return"object"==typeof t&&null!=t&&t.outlets}function kI(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`}),o=t===e?n:KF(t,e,n);const a=zF(GF(o));return new lu(a,s,i)}function KF(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:KF(s,e,n)}),new be(t.segments,r)}class QF{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Gp(r[0]))throw new b(4003,!1);const i=r.find(Ol);if(i&&i!==OF(r))throw new b(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qp{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function YF(t,e,n){if(t||(t=new be([],{})),0===t.segments.length&&t.hasChildren())return Ll(t,e,n);const r=function Pee(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Ol(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!JF(u,c,o))return s;r+=2}else{if(!JF(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new be(t.segments.slice(0,r.pathIndex),{});return s.children[se]=new be(t.segments.slice(r.pathIndex),t.children),Ll(s,0,i)}return r.match&&0===i.length?new be(t.segments,{}):r.match&&!t.hasChildren()?PI(t,e,n):r.match?Ll(t,0,i):PI(t,e,n)}function Ll(t,e,n){if(0===n.length)return new be(t.segments,{});{const r=function kee(t){return Ol(t[0])?t[0].outlets:{[se]:t}}(n),i={};if(!r[se]&&t.children[se]&&1===t.numberOfChildren&&0===t.children[se].segments.length){const s=Ll(t.children[se],e,n);return new be(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=YF(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new be(t.segments,i)}}function PI(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Ol(s)){const u=Oee(s.outlets);return new be(r,u)}if(0===i&&Gp(n[0])){r.push(new Ml(t.segments[e].path,XF(n[0]))),i++;continue}const o=Ol(s)?s.outlets[se]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Gp(a)?(r.push(new Ml(o,XF(a))),i+=2):(r.push(new Ml(o,{})),i++)}return new be(r,{})}function Oee(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=PI(new be([],{}),0,r))}),e}function XF(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function JF(t,e,n){return t==n.path&&Jr(e,n.parameters)}const Fl="imperative";class Zr{constructor(e,n){this.id=e,this.url=n}}class OI extends Zr{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wo extends Zr{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wp extends Zr{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vl extends Zr{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class LI extends Zr{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lee extends Zr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fee extends Zr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vee extends Zr{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uee extends Zr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bee extends Zr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $ee{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jee{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hee{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zee{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gee{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qee{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZF{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Wee{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ul,this.attachRef=null}}let Ul=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Wee,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class e2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=FI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=FI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=VI(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return VI(e,this._root).map(n=>n.value)}}function FI(t,e){if(t===e.value)return e;for(const n of e.children){const r=FI(t,n);if(r)return r}return null}function VI(t,e){if(t===e.value)return[e];for(const n of e.children){const r=VI(t,n);if(r.length)return r.unshift(e),r}return[]}class Pi{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function du(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class t2 extends e2{constructor(e,n){super(e),this.snapshot=n,UI(this,e)}toString(){return this.snapshot.toString()}}function n2(t,e){const n=function Kee(t,e){const o=new Kp([],{},{},"",{},se,e,null,{});return new i2("",new Pi(o,[]))}(0,e),r=new tr([new Ml("",{})]),i=new tr({}),s=new tr({}),o=new tr({}),a=new tr(""),u=new hu(r,i,o,a,s,se,e,n.root);return u.snapshot=n.root,new t2(new Pi(u,[]),n)}class hu{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(_e(c=>c[Nl]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(_e(e=>cu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(_e(e=>cu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function r2(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Qee(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Kp{get title(){return this.data?.[Nl]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class i2 extends e2{constructor(e,n){super(n),this.url=e,UI(this,n)}toString(){return s2(this._root)}}function UI(t,e){e.value._routerState=t,e.children.forEach(n=>UI(t,n))}function s2(t){const e=t.children.length>0?` { ${t.children.map(s2).join(", ")} } `:"";return`${t.value}${e}`}function BI(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Jr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Jr(e.params,n.params)||t.paramsSubject.next(n.params),function lee(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Jr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Jr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function $I(t,e){const n=Jr(t.params,e.params)&&function pee(t,e){return _o(t,e)&&t.every((n,r)=>Jr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||$I(t.parent,e.parent))}let jI=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new wn,this.deactivateEvents=new wn,this.attachEvents=new wn,this.detachEvents=new wn,this.parentContexts=L(Ul),this.location=L(Er),this.changeDetector=L(Bw),this.environmentInjector=L(Gr),this.inputBinder=L(Qp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new b(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Yee(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=mn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ro]}),t})();class Yee{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===hu?this.route:e===Ul?this.childContexts:this.parent.get(e,n)}}const Qp=new F("");let o2=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=bI([r.queryParams,r.params,r.data]).pipe(pr(([s,o,a],u)=>(a={...s,...o,...a},0===u?K(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function HY(t){const e=Ie(t);if(!e)return null;const n=new ul(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();function Bl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Jee(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Bl(t,r,i);return Bl(t,r)})}(t,e,n);return new Pi(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Bl(t,a)),o}}const r=function Zee(t){return new hu(new tr(t.url),new tr(t.params),new tr(t.queryParams),new tr(t.fragment),new tr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Bl(t,s));return new Pi(r,i)}}const HI="ngNavigationCancelingError";function a2(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=vo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=u2(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function u2(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[HI]=!0,r.cancellationCode=e,n&&(r.url=n),r}function c2(t){return l2(t)&&vo(t.url)}function l2(t){return t&&t[HI]}let d2=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=_a({type:t,selectors:[["ng-component"]],standalone:!0,features:[Q1],decls:1,vars:0,template:function(n,r){1&n&&ds(0,"router-outlet")},dependencies:[jI],encapsulation:2}),t})();function zI(t){const e=t.children&&t.children.map(zI),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=d2),n}function br(t){return t.outlet||se}function $l(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class ote{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),BI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=du(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=du(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=du(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=du(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new qee(s.value.snapshot))}),e.children.length&&this.forwardEvent(new zee(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(BI(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),BI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=$l(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class h2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Yp{constructor(e,n){this.component=e,this.route=n}}function ate(t,e,n){const r=t._root;return jl(r,e?e._root:null,n,[r.value])}function fu(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function wW(t){return null!==Zh(t)}(t)?e.get(t):t:r}function jl(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=du(e);return t.children.forEach(o=>{(function cte(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function lte(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!_o(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_o(t.url,e.url)||!Jr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$I(t,e)||!Jr(t.queryParams,e.queryParams);default:return!$I(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new h2(r)):(s.data=o.data,s._resolvedData=o._resolvedData),jl(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Yp(a.outlet.component,o))}else o&&Hl(e,a,i),i.canActivateChecks.push(new h2(r)),jl(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Hl(a,n.getContext(o),i)),i}function Hl(t,e,n){const r=du(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Hl(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Yp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function zl(t){return"function"==typeof t}function f2(t){return t instanceof Up||"EmptyError"===t?.name}const Xp=Symbol("INITIAL_VALUE");function pu(){return pr(t=>bI(t.map(e=>e.pipe(uu(1),function nee(...t){const e=Sc(t);return Nt((n,r)=>{(e?SI(t,n,e):SI(t,n)).subscribe(r)})}(Xp)))).pipe(_e(e=>{for(const n of e)if(!0!==n){if(n===Xp)return Xp;if(!1===n||n instanceof lu)return n}return!0}),ki(e=>e!==Xp),uu(1)))}function p2(t){return function Dq(...t){return gR(t)}(un(e=>{if(vo(e))throw a2(0,e)}),_e(e=>!0===e))}class Jp{constructor(e){this.segmentGroup=e||null}}class g2{constructor(e){this.urlTree=e}}function gu(t){return Rl(new Jp(t))}function m2(t){return Rl(new g2(t))}class Rte{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new b(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return K(r);if(i.numberOfChildren>1||!i.children[se])return Rl(new b(4e3,!1));i=i.children[se]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new lu(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new be(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new b(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const GI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Nte(t,e,n,r,i){const s=qI(t,e,n);return s.matched?(r=function ete(t,e){return t.providers&&!t._injector&&(t._injector=pw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Ste(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?K(i.map(o=>{const a=fu(o,t);return ms(function mte(t){return t&&zl(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(pu(),p2()):K(!0)}(r,e,n).pipe(_e(o=>!0===o?s:{...GI}))):K(s)}function qI(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...GI}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||cee)(n,t,e);if(!i)return{...GI};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function y2(t,e,n,r){return n.length>0&&function Pte(t,e,n){return n.some(r=>Zp(t,e,r)&&br(r)!==se)}(t,n,r)?{segmentGroup:new be(e,kte(r,new be(n,t.children))),slicedSegments:[]}:0===n.length&&function Ote(t,e,n){return n.some(r=>Zp(t,e,r))}(t,n,r)?{segmentGroup:new be(t.segments,Mte(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function Mte(t,e,n,r,i){const s={};for(const o of r)if(Zp(t,n,o)&&!i[br(o)]){const a=new be([],{});s[br(o)]=a}return{...i,...s}}function kte(t,e){const n={};n[se]=e;for(const r of t)if(""===r.path&&br(r)!==se){const i=new be([],{});n[br(r)]=i}return n}function Zp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Ute{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Rte(this.urlSerializer,this.urlTree)}noMatchError(e){return new b(4002,!1)}recognize(){const e=y2(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,se).pipe(yo(n=>{if(n instanceof g2)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Jp?this.noMatchError(n):n}),_e(n=>{const r=new Kp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},se,this.rootComponentType,null,{}),i=new Pi(r,n),s=new i2("",i),o=function xee(t,e,n=null,r=null){return WF(qF(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,se).pipe(yo(r=>{throw r instanceof Jp?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=r2(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return kt(i).pipe(ou(s=>{const o=r.children[s],a=function ite(t,e){const n=t.filter(r=>br(r)===e);return n.push(...t.filter(r=>br(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function see(t,e){return Nt(function iee(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(Mt(o,l=>{const d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),Bp(null),function oee(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ki((i,s)=>t(i,s,r)):ns,xI(1),n?Bp(e):kF(()=>new Up))}(),Gt(s=>{if(null===s)return gu(r);const o=_2(s);return function Bte(t){t.sort((e,n)=>e.value.outlet===se?-1:n.value.outlet===se?1:e.value.outlet.localeCompare(n.value.outlet))}(o),K(o)}))}processSegment(e,n,r,i,s,o){return kt(n).pipe(ou(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(yo(u=>{if(u instanceof Jp)return K(null);throw u}))),mo(a=>!!a),yo(a=>{if(f2(a))return function Fte(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?K([]):gu(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function Lte(t,e,n,r){return!!(br(t)===r||r!==se&&Zp(e,n,t))&&("**"===t.path||qI(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):gu(i):gu(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?m2(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Gt(o=>{const a=new be(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=qI(n,i,s);if(!a)return gu(n);const d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?m2(d):this.applyRedirects.lineralizeSegments(i,d).pipe(Gt(h=>this.processSegment(e,r,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?OF(i).parameters:{};a=K({snapshot:new Kp(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,v2(r),br(r),r.component??r._loadedComponent??null,r,w2(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=Nte(n,r,i,e).pipe(_e(({matched:u,consumedSegments:c,remainingSegments:l,parameters:d})=>u?{snapshot:new Kp(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,v2(r),br(r),r.component??r._loadedComponent??null,r,w2(r)),consumedSegments:c,remainingSegments:l}:null));return a.pipe(pr(u=>null===u?gu(n):this.getChildConfig(e=r._injector??e,r,i).pipe(pr(({routes:c})=>{const l=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=u,{segmentGroup:p,slicedSegments:g}=y2(n,h,f,c);if(0===g.length&&p.hasChildren())return this.processChildren(l,c,p).pipe(_e(v=>null===v?null:[new Pi(d,v)]));if(0===c.length&&0===g.length)return K([new Pi(d,[])]);const m=br(r)===s;return this.processSegment(l,c,p,g,m?se:s,!0).pipe(_e(v=>[new Pi(d,v)]))}))))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?K({routes:n._loadedRoutes,injector:n._loadedInjector}):function bte(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?K(!0):K(i.map(o=>{const a=fu(o,t);return ms(function hte(t){return t&&zl(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(pu(),p2())}(e,n,r).pipe(Gt(i=>i?this.configLoader.loadChildren(e,n).pipe(un(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function xte(t){return Rl(u2(!1,3))}())):K({routes:[],injector:e})}}function $te(t){const e=t.value.routeConfig;return e&&""===e.path}function _2(t){const e=[],n=new Set;for(const r of t){if(!$te(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=_2(r.children);e.push(new Pi(r.value,i))}return e.filter(r=>!n.has(r))}function v2(t){return t.data||{}}function w2(t){return t.resolve||{}}function I2(t){return"string"==typeof t.title||null===t.title}function WI(t){return pr(e=>{const n=t(e);return n?kt(n).pipe(_e(()=>e)):K(e)})}const mu=new F("ROUTES");let KI=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(BO)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return K(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ms(n.loadComponent()).pipe(_e(E2),un(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Sl(()=>{this.componentLoaders.delete(n)})),i=new MF(r,()=>new _i).pipe(AI());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(_e(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,c;return Array.isArray(a)?c=a:(u=a.create(n).injector,c=u.get(mu,[],z.Self|z.Optional).flat()),{routes:c.map(zI),injector:u}}),Sl(()=>{this.childrenLoaders.delete(r)})),o=new MF(s,()=>new _i).pipe(AI());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return ms(n()).pipe(_e(E2),Gt(r=>r instanceof W1||Array.isArray(r)?K(r):kt(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function E2(t){return function Kte(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let eg=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new _i,this.configLoader=L(KI),this.environmentInjector=L(Gr),this.urlSerializer=L(kl),this.rootContexts=L(Ul),this.inputBindingEnabled=null!==L(Qp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new jee(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new $ee(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new tr({id:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fl,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ki(r=>0!==r.id),_e(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),pr(r=>{let i=!1,s=!1;return K(r).pipe(un(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pr(o=>{const a=n.browserUrlTree.toString(),u=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const l="";return this.events.next(new Vl(o.id,n.serializeUrl(r.rawUrl),l,0)),n.rawUrlTree=o.rawUrl,o.resolve(null),Lr}if(n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return T2(o.source)&&(n.browserUrlTree=o.extractedUrl),K(o).pipe(pr(l=>{const d=this.transitions?.getValue();return this.events.next(new OI(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?Lr:Promise.resolve(l)}),function jte(t,e,n,r,i,s){return Gt(o=>function Vte(t,e,n,r,i,s,o="emptyOnly"){return new Ute(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(_e(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),un(l=>{if(r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},"eager"===n.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=n.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);n.setBrowserUrl(h,l)}n.browserUrlTree=l.urlAfterRedirects}const d=new Lee(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=o,g=new OI(l,this.urlSerializer.serialize(d),h,f);this.events.next(g);const m=n2(0,this.rootComponentType).snapshot;return K(r={...o,targetSnapshot:m,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const l="";return this.events.next(new Vl(o.id,n.serializeUrl(r.extractedUrl),l,1)),n.rawUrlTree=o.rawUrl,o.resolve(null),Lr}}),un(o=>{const a=new Fee(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),_e(o=>r={...o,guards:ate(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function _te(t,e){return Gt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?K({...n,guardsResult:!0}):function vte(t,e,n,r){return kt(t).pipe(Gt(i=>function Dte(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?K(s.map(a=>{const u=$l(e)??i,c=fu(a,u);return ms(function gte(t){return t&&zl(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):u.runInContext(()=>c(t,e,n,r))).pipe(mo())})).pipe(pu()):K(!0)}(i.component,i.route,n,e,r)),mo(i=>!0!==i,!0))}(o,r,i,t).pipe(Gt(a=>a&&function dte(t){return"boolean"==typeof t}(a)?function wte(t,e,n,r){return kt(e).pipe(ou(i=>SI(function Ete(t,e){return null!==t&&e&&e(new Hee(t)),K(!0)}(i.route.parent,r),function Ite(t,e){return null!==t&&e&&e(new Gee(t)),K(!0)}(i.route,r),function Cte(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function ute(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>NF(()=>K(o.guards.map(u=>{const c=$l(o.node)??n,l=fu(u,c);return ms(function pte(t){return t&&zl(t.canActivateChild)}(l)?l.canActivateChild(r,t):c.runInContext(()=>l(r,t))).pipe(mo())})).pipe(pu())));return K(s).pipe(pu())}(t,i.path,n),function Tte(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return K(!0);const i=r.map(s=>NF(()=>{const o=$l(e)??n,a=fu(s,o);return ms(function fte(t){return t&&zl(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(mo())}));return K(i).pipe(pu())}(t,i.route,n))),mo(i=>!0!==i,!0))}(r,s,t,e):K(a)),_e(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),un(o=>{if(r.guardsResult=o.guardsResult,vo(o.guardsResult))throw a2(0,o.guardsResult);const a=new Vee(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ki(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),WI(o=>{if(o.guards.canActivateChecks.length)return K(o).pipe(un(a=>{const u=new Uee(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),pr(a=>{let u=!1;return K(a).pipe(function Hte(t,e){return Gt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let s=0;return kt(i).pipe(ou(o=>function zte(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!I2(i)&&(s[Nl]=i.title),function Gte(t,e,n,r){const i=function qte(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return K({});const s={};return kt(i).pipe(Gt(o=>function Wte(t,e,n,r){const i=$l(e)??r,s=fu(t,i);return ms(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(mo(),un(a=>{s[o]=a}))),xI(1),function aee(t){return _e(()=>t)}(s),yo(o=>f2(o)?Lr:Rl(o)))}(s,t,e,r).pipe(_e(o=>(t._resolvedData=o,t.data=r2(t,n).resolve,i&&I2(i)&&(t.data[Nl]=i.title),null)))}(o.route,r,t,e)),un(()=>s++),xI(1),Gt(o=>s===i.length?K(n):Lr))})}(n.paramsInheritanceStrategy,this.environmentInjector),un({next:()=>u=!0,complete:()=>{u||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),un(a=>{const u=new Bee(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),WI(o=>{const a=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(un(l=>{u.component=l}),_e(()=>{})));for(const l of u.children)c.push(...a(l));return c};return bI(a(o.targetSnapshot.root)).pipe(Bp(),uu(1))}),WI(()=>this.afterPreactivation()),_e(o=>{const a=function Xee(t,e,n){const r=Bl(t,e._root,n?n._root:void 0);return new t2(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),un(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((t,e,n,r)=>_e(i=>(new ote(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),uu(1),un({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new wo(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Sl(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),yo(o=>{if(s=!0,l2(o)){c2(o)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new Wp(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),c2(o)){const u=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||T2(r.source)};n.scheduleNavigation(u,Fl,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new LI(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(o))}catch(u){r.reject(u)}}return Lr}))}))}cancelNavigationTransition(n,r,i){const s=new Wp(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function T2(t){return t!==Fl}let C2=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===se);return r}getResolvedTitleForRoute(n){return n.data[Nl]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return L(Qte)},providedIn:"root"}),t})(),Qte=(()=>{class t extends C2{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(U(cF))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Yte=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return L(Jte)},providedIn:"root"}),t})();class Xte{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Jte=(()=>{class t extends Xte{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=function QN(t){return wi(()=>{const e=t.prototype.constructor,n=e[Ii]||V_(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Ii]||V_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(t)))(r||t)}}(),t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const tg=new F("",{providedIn:"root",factory:()=>({})});let Zte=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:function(){return L(ene)},providedIn:"root"}),t})(),ene=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Kn=(()=>((Kn=Kn||{})[Kn.COMPLETE=0]="COMPLETE",Kn[Kn.FAILED=1]="FAILED",Kn[Kn.REDIRECTING=2]="REDIRECTING",Kn))();function D2(t,e){t.events.pipe(ki(n=>n instanceof wo||n instanceof Wp||n instanceof LI||n instanceof Vl),_e(n=>n instanceof wo||n instanceof Vl?Kn.COMPLETE:n instanceof Wp&&(0===n.code||1===n.code)?Kn.REDIRECTING:Kn.FAILED),ki(n=>n!==Kn.REDIRECTING),uu(1)).subscribe(()=>{e()})}function tne(t){throw t}function nne(t,e,n){return e.parse("/")}const rne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ine={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cr=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=L(UO),this.isNgZoneEnabled=!1,this.options=L(tg,{optional:!0})||{},this.pendingTasks=L(mp),this.errorHandler=this.options.errorHandler||tne,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||nne,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=L(Zte),this.routeReuseStrategy=L(Yte),this.titleStrategy=L(C2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=L(mu,{optional:!0})?.flat()??[],this.navigationTransitions=L(eg),this.urlSerializer=L(kl),this.location=L(Xw),this.componentInputBindingEnabled=!!L(Qp,{optional:!0}),this.isNgZoneEnabled=L(Re)instanceof Re&&Re.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new lu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=n2(0,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Fl,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(zI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}null!==l&&(l=this.removeEmptyProps(l));try{d=qF(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return WF(d,n,l,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=vo(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Fl,null,r)}navigate(n,r={skipLocationChange:!1}){return function sne(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new b(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...rne}:!1===r?{...ine}:r,vo(n))return FF(this.currentUrlTree,n,i);const s=this.parseUrl(n);return FF(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,u=h});const l=this.pendingTasks.add();return D2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class b2{}let une=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ki(n=>n instanceof wo),ou(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=pw(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return kt(i).pipe(ma())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):K(null);const s=i.pipe(Gt(o=>null===o?K(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?kt([s,this.loader.loadComponent(r)]).pipe(ma()):s})}}return t.\u0275fac=function(n){return new(n||t)(U(cr),U(BO),U(Gr),U(b2),U(KI))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const YI=new F("");let S2=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof OI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof wo?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Vl&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ZF&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ZF(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function Mk(){throw new Error("invalid")}()},t.\u0275prov=j({token:t,factory:t.\u0275fac}),t})();function Oi(t,e){return{\u0275kind:t,\u0275providers:e}}function x2(){const t=L(sr);return e=>{const n=t.get(iu);if(e!==n.components[0])return;const r=t.get(cr),i=t.get(R2);1===t.get(XI)&&r.initialNavigation(),t.get(N2,null,z.Optional)?.setUpPreloading(),t.get(YI,null,z.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const R2=new F("",{factory:()=>new _i}),XI=new F("",{providedIn:"root",factory:()=>1}),N2=new F("");function hne(t){return Oi(0,[{provide:N2,useExisting:une},{provide:b2,useExisting:t}])}const M2=new F("ROUTER_FORROOT_GUARD"),pne=[Xw,{provide:kl,useClass:RI},cr,Ul,{provide:hu,useFactory:function A2(t){return t.routerState.root},deps:[cr]},KI,[]];function gne(){return new XO("Router",cr)}let k2=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[pne,[],{provide:mu,multi:!0,useValue:n},{provide:M2,useFactory:vne,deps:[[cr,new Ot,new Sf]]},{provide:tg,useValue:r||{}},r?.useHash?{provide:po,useClass:KY}:{provide:po,useClass:DL},{provide:YI,useFactory:()=>{const t=L(pJ),e=L(Re),n=L(tg),r=L(eg),i=L(kl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new S2(i,r,t,e,n)}},r?.preloadingStrategy?hne(r.preloadingStrategy).\u0275providers:[],{provide:XO,multi:!0,useFactory:gne},r?.initialNavigation?wne(r):[],r?.bindToComponentInputs?Oi(8,[o2,{provide:Qp,useExisting:o2}]).\u0275providers:[],[{provide:P2,useFactory:x2},{provide:Vw,multi:!0,useExisting:P2}]]}}static forChild(n){return{ngModule:t,providers:[{provide:mu,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(U(M2,8))},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({}),t})();function vne(t){return"guarded"}function wne(t){return["disabled"===t.initialNavigation?Oi(3,[{provide:Rw,multi:!0,useFactory:()=>{const e=L(cr);return()=>{e.setUpLocationChangeListener()}}},{provide:XI,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Oi(2,[{provide:XI,useValue:0},{provide:Rw,multi:!0,deps:[sr],useFactory:e=>{const n=e.get(qY,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(cr),s=e.get(R2);D2(i,()=>{r(!0)}),e.get(eg).afterPreactivation=()=>(r(!0),s.closed?K(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const P2=new F("");function O2(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function _(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){O2(s,r,i,o,a,"next",u)}function a(u){O2(s,r,i,o,a,"throw",u)}o(void 0)})}}const x=function(t,e){if(!t)throw yu(e)},yu=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},L2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ng={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(L2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new Tne;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Tne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F2=function(t){const e=L2(t);return ng.encodeByteArray(e,!0)},rg=function(t){return F2(t).replace(/\./g,"")},ig=function(t){try{return ng.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Cne(t){return V2(void 0,t)}function V2(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Dne(n)||(t[n]=V2(t[n],e[n]));return t}function Dne(t){return"__proto__"!==t}const sg=()=>{try{return function bne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ig(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},U2=t=>{const e=(t=>{var e,n;return null===(n=null===(e=sg())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B2=()=>{var t;return null===(t=sg())||void 0===t?void 0:t.config};class _u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function $2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rg(JSON.stringify({alg:"none",type:"JWT"})),rg(JSON.stringify(o)),""].join(".")}function Qn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ZI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function eE(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function j2(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Io(){try{return"object"==typeof indexedDB}catch{return!1}}function Gl(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function tE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ei.prototype.create)}}class ei{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Pne(t,e){return t.replace(One,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Sr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const One=/\{\$([^}]+)}/g;function ql(t){return JSON.parse(t)}function Wt(t){return JSON.stringify(t)}const og=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=ql(ig(s[0])||""),n=ql(ig(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function Fi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vu(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function H2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ag(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function nE(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(z2(s)&&z2(o)){if(!nE(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function z2(t){return null!==t&&"object"==typeof t}function rE(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class Vne{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,l,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),l=1518500249):(c=s^o^a,l=1859775393):d<60?(c=s&o|a&(s|o),l=2400959708):(c=s^o^a,l=3395469782);const h=(i<<5|i>>>27)+c+u+l+r[d]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class Bne{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function $ne(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=iE),void 0===i.error&&(i.error=iE),void 0===i.complete&&(i.complete=iE);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iE(){}const cg=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Hne=1e3,zne=2,Gne=144e5,qne=.5;function sE(t,e=Hne,n=zne){const r=e*Math.pow(n,t),i=Math.round(qne*r*(Math.random()-.5)*2);return Math.min(Gne,r+i)}function ti(t){return t&&t._delegate?t._delegate:t}class Kt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Eo="[DEFAULT]";class Kne{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _u;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Yne(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Eo?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Kne(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const oE=[];var Y=(()=>((Y=Y||{})[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",Y))();const G2={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Jne=Y.INFO,Zne={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ere=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Zne[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class To{constructor(e){this.name=e,this._logLevel=Jne,this._logHandler=ere,this._userLogHandler=null,oE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Y))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?G2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...e),this._logHandler(this,Y.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...e),this._logHandler(this,Y.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...e),this._logHandler(this,Y.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...e),this._logHandler(this,Y.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...e),this._logHandler(this,Y.ERROR,...e)}}const tre=(t,e)=>e.some(n=>t instanceof n);let q2,W2;const K2=new WeakMap,aE=new WeakMap,Q2=new WeakMap,uE=new WeakMap,cE=new WeakMap;let lE={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return aE.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Q2.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ys(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ure(t){return"function"==typeof t?function are(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function rre(){return W2||(W2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(dE(this),e),ys(K2.get(this))}:function(...e){return ys(t.apply(dE(this),e))}:function(e,...n){const r=t.call(dE(this),e,...n);return Q2.set(r,e.sort?e.sort():[e]),ys(r)}}(t):(t instanceof IDBTransaction&&function sre(t){if(aE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});aE.set(t,e)}(t),tre(t,function nre(){return q2||(q2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,lE):t)}function ys(t){if(t instanceof IDBRequest)return function ire(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ys(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K2.set(n,t)}).catch(()=>{}),cE.set(e,t),e}(t);if(uE.has(t))return uE.get(t);const e=ure(t);return e!==t&&(uE.set(t,e),cE.set(e,t)),e}const dE=t=>cE.get(t),lre=["get","getKey","getAll","getAllKeys","count"],dre=["put","add","delete","clear"],hE=new Map;function Y2(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(hE.get(e))return hE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!lre.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return hE.set(e,s),s}!function ore(t){lE=t(lE)}(t=>({...t,get:(e,n,r)=>Y2(e,n)||t.get(e,n,r),has:(e,n)=>!!Y2(e,n)||t.has(e,n)}));class hre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function fre(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const fE="@firebase/app",Co=new To("@firebase/app"),lg="[DEFAULT]",Ure={[fE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Do=new Map,dg=new Map;function Bre(t,e){try{t.container.addComponent(e)}catch(n){Co.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cn(t){const e=t.name;if(dg.has(e))return Co.debug(`There were multiple attempts to register component ${e}.`),!1;dg.set(e,t);for(const n of Do.values())Bre(n,t);return!0}function Wl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Vi=new ei("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class jre{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}}const wu="9.23.0";function J2(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:lg,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Vi.create("bad-app-name",{appName:String(i)});if(n||(n=B2()),!n)throw Vi.create("no-options");const s=Do.get(i);if(s){if(nE(n,s.options)&&nE(r,s.config))return s;throw Vi.create("duplicate-app",{appName:i})}const o=new Xne(i);for(const u of dg.values())o.addComponent(u);const a=new jre(n,r,o);return Do.set(i,a),a}function pE(t=lg){const e=Do.get(t);if(!e&&t===lg&&B2())return J2();if(!e)throw Vi.create("no-app",{appName:t});return e}function Z2(){return Array.from(Do.values())}function Ge(t,e,n){var r;let i=null!==(r=Ure[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Co.warn(a.join(" "))}cn(new Kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Hre="firebase-heartbeat-database",zre=1,Kl="firebase-heartbeat-store";let mE=null;function eV(){return mE||(mE=function cre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ys(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ys(o.result),u.oldVersion,u.newVersion,ys(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(Hre,zre,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Kl)}}).catch(t=>{throw Vi.create("idb-open",{originalErrorMessage:t.message})})),mE}function yE(){return(yE=_(function*(t){try{return yield(yield eV()).transaction(Kl).objectStore(Kl).get(nV(t))}catch(e){if(e instanceof Sr)Co.warn(e.message);else{const n=Vi.create("idb-get",{originalErrorMessage:e?.message});Co.warn(n.message)}}})).apply(this,arguments)}function tV(t,e){return _E.apply(this,arguments)}function _E(){return(_E=_(function*(t,e){try{const r=(yield eV()).transaction(Kl,"readwrite");yield r.objectStore(Kl).put(e,nV(t)),yield r.done}catch(n){if(n instanceof Sr)Co.warn(n.message);else{const r=Vi.create("idb-set",{originalErrorMessage:n?.message});Co.warn(r.message)}}})).apply(this,arguments)}function nV(t){return`${t.name}!${t.options.appId}`}class Kre{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Yre(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rV();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=rV(),{heartbeatsToSend:r,unsentEntries:i}=function Qre(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iV(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iV(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=rg(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function rV(){return(new Date).toISOString().substring(0,10)}class Yre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!Io()&&Gl().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Gre(t){return yE.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return tV(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return tV(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function iV(t){return rg(JSON.stringify({version:2,heartbeats:t})).length}!function Xre(t){cn(new Kt("platform-logger",e=>new hre(e),"PRIVATE")),cn(new Kt("heartbeat",e=>new Kre(e),"PRIVATE")),Ge(fE,"0.9.13",t),Ge(fE,"0.9.13","esm2017"),Ge("fire-js","")}(""),Ge("firebase","9.23.0","app");const eie=(t,e)=>e.some(n=>t instanceof n);let sV,oV;const aV=new WeakMap,vE=new WeakMap,uV=new WeakMap,wE=new WeakMap,IE=new WeakMap;let EE={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return vE.get(t);if("objectStoreNames"===e)return t.objectStoreNames||uV.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function aie(t){return"function"==typeof t?function oie(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function nie(){return oV||(oV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(TE(this),e),_s(aV.get(this))}:function(...e){return _s(t.apply(TE(this),e))}:function(e,...n){const r=t.call(TE(this),e,...n);return uV.set(r,e.sort?e.sort():[e]),_s(r)}}(t):(t instanceof IDBTransaction&&function iie(t){if(vE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vE.set(t,e)}(t),eie(t,function tie(){return sV||(sV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,EE):t)}function _s(t){if(t instanceof IDBRequest)return function rie(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_s(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aV.set(n,t)}).catch(()=>{}),IE.set(e,t),e}(t);if(wE.has(t))return wE.get(t);const e=aie(t);return e!==t&&(wE.set(t,e),IE.set(e,t)),e}const TE=t=>IE.get(t),cie=["get","getKey","getAll","getAllKeys","count"],lie=["put","add","delete","clear"],CE=new Map;function cV(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(CE.get(e))return CE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=lie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!cie.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return CE.set(e,s),s}!function sie(t){EE=t(EE)}(t=>({...t,get:(e,n,r)=>cV(e,n)||t.get(e,n,r),has:(e,n)=>!!cV(e,n)||t.has(e,n)}));const lV="@firebase/installations",DE="0.6.4",dV=1e4,hV=`w:${DE}`,fV="FIS_v2",die="https://firebaseinstallations.googleapis.com/v1",hie=36e5,Ui=new ei("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pV(t){return t instanceof Sr&&t.code.includes("request-failed")}function bE({projectId:t}){return`${die}/projects/${t}/installations`}function gV(t){return{token:t.token,requestStatus:2,expiresIn:mie(t.expiresIn),creationTime:Date.now()}}function SE(t,e){return AE.apply(this,arguments)}function AE(){return(AE=_(function*(t,e){const r=(yield e.json()).error;return Ui.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function mV({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xE(t){return RE.apply(this,arguments)}function RE(){return(RE=_(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function mie(t){return Number(t.replace("s","000"))}function NE(){return(NE=_(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=bE(t),i=mV(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:fV,appId:t.appId,sdkVersion:hV})},u=yield xE(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:gV(c.authToken)}}throw yield SE("Create Installation",u)})).apply(this,arguments)}function _V(t){return new Promise(e=>{setTimeout(e,t)})}const wie=/^[cdef][\w-]{21}$/,ME="";function Iie(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Eie(t){return function vie(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return wie.test(n)?n:ME}catch{return ME}}function Iu(t){return`${t.appName}!${t.appId}`}const Eu=new Map;function vV(t,e){const n=Iu(t);wV(n,e),function Die(t,e){const n=function IV(){return!bo&&"BroadcastChannel"in self&&(bo=new BroadcastChannel("[Firebase] FID Change"),bo.onmessage=t=>{wV(t.data.key,t.data.fid)}),bo}();n&&n.postMessage({key:t,fid:e}),function EV(){0===Eu.size&&bo&&(bo.close(),bo=null)}()}(n,e)}function wV(t,e){const n=Eu.get(t);if(n)for(const r of n)r(e)}let bo=null;const bie="firebase-installations-database",Sie=1,So="firebase-installations-store";let kE=null;function PE(){return kE||(kE=function uie(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=_s(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_s(o.result),u.oldVersion,u.newVersion,_s(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(bie,Sie,{upgrade:(t,e)=>{0===e&&t.createObjectStore(So)}})),kE}function hg(t,e){return OE.apply(this,arguments)}function OE(){return(OE=_(function*(t,e){const n=Iu(t),i=(yield PE()).transaction(So,"readwrite"),s=i.objectStore(So),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&vV(t,e.fid),e})).apply(this,arguments)}function LE(t){return FE.apply(this,arguments)}function FE(){return(FE=_(function*(t){const e=Iu(t),r=(yield PE()).transaction(So,"readwrite");yield r.objectStore(So).delete(e),yield r.done})).apply(this,arguments)}function Ql(t,e){return VE.apply(this,arguments)}function VE(){return(VE=_(function*(t,e){const n=Iu(t),i=(yield PE()).transaction(So,"readwrite"),s=i.objectStore(So),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&vV(t,a.fid),a})).apply(this,arguments)}function UE(t){return BE.apply(this,arguments)}function BE(){return BE=_(function*(t){let e;const n=yield Ql(t.appConfig,r=>{const i=function Aie(t){return CV(t||{fid:Iie(),registrationStatus:0})}(r),s=function xie(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ui.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Rie(t,e){return $E.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Nie(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===ME?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),BE.apply(this,arguments)}function $E(){return $E=_(function*(t,e){try{const n=yield function _ie(t,e){return NE.apply(this,arguments)}(t,e);return hg(t.appConfig,n)}catch(n){throw pV(n)&&409===n.customData.serverCode?yield LE(t.appConfig):yield hg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),$E.apply(this,arguments)}function Nie(t){return jE.apply(this,arguments)}function jE(){return(jE=_(function*(t){let e=yield TV(t.appConfig);for(;1===e.registrationStatus;)yield _V(100),e=yield TV(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield UE(t);return r||n}return e})).apply(this,arguments)}function TV(t){return Ql(t,e=>{if(!e)throw Ui.create("installation-not-found");return CV(e)})}function CV(t){return function Mie(t){return 1===t.registrationStatus&&t.registrationTime+dV<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function HE(){return(HE=_(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function Pie(t,{fid:e}){return`${bE(t)}/${e}/authTokens:generate`}(t,n),i=function yV(t,{refreshToken:e}){const n=mV(t);return n.append("Authorization",function yie(t){return`${fV} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:hV,appId:t.appId}})},u=yield xE(()=>fetch(r,a));if(u.ok)return gV(yield u.json());throw yield SE("Generate Auth Token",u)})).apply(this,arguments)}function zE(t){return GE.apply(this,arguments)}function GE(){return GE=_(function*(t,e=!1){let n;const r=yield Ql(t.appConfig,s=>{if(!bV(s))throw Ui.create("not-registered");const o=s.authToken;if(!e&&function Fie(t){return 2===t.requestStatus&&!function Vie(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+hie}(t)}(o))return s;if(1===o.requestStatus)return n=function Oie(t,e){return qE.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw Ui.create("app-offline");const a=function Uie(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function Lie(t,e){return WE.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),GE.apply(this,arguments)}function qE(){return(qE=_(function*(t,e){let n=yield DV(t.appConfig);for(;1===n.authToken.requestStatus;)yield _V(100),n=yield DV(t.appConfig);const r=n.authToken;return 0===r.requestStatus?zE(t,e):r})).apply(this,arguments)}function DV(t){return Ql(t,e=>{if(!bV(e))throw Ui.create("not-registered");return function Bie(t){return 1===t.requestStatus&&t.requestTime+dV<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function WE(){return WE=_(function*(t,e){try{const n=yield function kie(t,e){return HE.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield hg(t.appConfig,r),n}catch(n){if(!pV(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield hg(t.appConfig,r)}else yield LE(t.appConfig);throw n}}),WE.apply(this,arguments)}function bV(t){return void 0!==t&&2===t.registrationStatus}function KE(){return(KE=_(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield UE(e);return r?r.catch(console.error):zE(e).catch(console.error),n.fid})).apply(this,arguments)}function QE(){return QE=_(function*(t,e=!1){const n=t;return yield function Hie(t){return YE.apply(this,arguments)}(n),(yield zE(n,e)).token}),QE.apply(this,arguments)}function YE(){return(YE=_(function*(t){const{registrationPromise:e}=yield UE(t);e&&(yield e)})).apply(this,arguments)}function ZE(t){return Ui.create("missing-app-config-values",{valueName:t})}const SV="installations",Kie=t=>{const e=t.getProvider("app").getImmediate(),n=function qie(t){if(!t||!t.options)throw ZE("App Configuration");if(!t.name)throw ZE("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ZE(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Wl(e,"heartbeat"),_delete:()=>Promise.resolve()}},Qie=t=>{const n=Wl(t.getProvider("app").getImmediate(),SV).getImmediate();return{getId:()=>function $ie(t){return KE.apply(this,arguments)}(n),getToken:i=>function jie(t){return QE.apply(this,arguments)}(n,i)}};(function Yie(){cn(new Kt(SV,Kie,"PUBLIC")),cn(new Kt("installations-internal",Qie,"PRIVATE"))})(),Ge(lV,DE),Ge(lV,DE,"esm2017");const eT="@firebase/remote-config",On=new ei("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ase{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return _(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function use(t=navigator){return t.languages&&t.languages[0]||t.language}class cse{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return _(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:use()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((v,y)=>{e.signal.addEventListener(()=>{const E=new Error("The operation was aborted.");E.name="AbortError",y(E)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(v){let y="fetch-client-network";throw"AbortError"===v?.name&&(y="fetch-timeout"),On.create(y,{originalErrorMessage:v?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,m;if(200===h.status){let v;try{v=yield h.json()}catch(y){throw On.create("fetch-client-parse",{originalErrorMessage:y?.message})}g=v.entries,m=v.state}if("INSTANCE_STATE_UNSPECIFIED"===m?f=500:"NO_CHANGE"===m?f=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==f&&200!==f)throw On.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class hse{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return _(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return _(function*(){yield function lse(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(On.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function dse(t){if(!(t instanceof Sr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+sE(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class gse{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pg(t,e){const n=t.target.error||void 0;return On.create(e,{originalErrorMessage:n&&n?.message})}const Ao="app_namespace_store";class vse{constructor(e,n,r,i=function _se(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(pg(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ao,{keyPath:"compositeKey"})}}catch(n){e(On.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return _(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Ao],"readonly").objectStore(Ao),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(pg(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(On.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return _(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([Ao],"readwrite").objectStore(Ao),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(pg(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(On.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return _(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Ao],"readwrite").objectStore(Ao),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(pg(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(On.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class wse{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return _(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Ese(){return sT.apply(this,arguments)}function sT(){return(sT=_(function*(){if(!Io())return!1;try{return yield Gl()}catch{return!1}})).apply(this,arguments)}!function Ise(){cn(new Kt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw On.create("registration-window");if(!Io())throw On.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw On.create("registration-project-id");if(!o)throw On.create("registration-api-key");if(!a)throw On.create("registration-app-id");const u=new vse(a,r.name,n=n||"firebase"),c=new wse(u),l=new To(eT);l.logLevel=Y.ERROR;const d=new cse(i,wu,n,s,o,a),h=new hse(d,u),f=new ase(h,u,c,l),p=new gse(r,f,c,u,l);return function ise(t){const e=ti(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Ge(eT,"0.4.4"),Ge(eT,"0.4.4","esm2017")}();const Tse=(t,e)=>e.some(n=>t instanceof n);let NV,MV;const kV=new WeakMap,oT=new WeakMap,PV=new WeakMap,aT=new WeakMap,uT=new WeakMap;let cT={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return oT.get(t);if("objectStoreNames"===e)return t.objectStoreNames||PV.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bi(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Rse(t){return"function"==typeof t?function xse(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Dse(){return MV||(MV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(lT(this),e),Bi(kV.get(this))}:function(...e){return Bi(t.apply(lT(this),e))}:function(e,...n){const r=t.call(lT(this),e,...n);return PV.set(r,e.sort?e.sort():[e]),Bi(r)}}(t):(t instanceof IDBTransaction&&function Sse(t){if(oT.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});oT.set(t,e)}(t),Tse(t,function Cse(){return NV||(NV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,cT):t)}function Bi(t){if(t instanceof IDBRequest)return function bse(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Bi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kV.set(n,t)}).catch(()=>{}),uT.set(e,t),e}(t);if(aT.has(t))return aT.get(t);const e=Rse(t);return e!==t&&(aT.set(t,e),uT.set(e,t)),e}const lT=t=>uT.get(t);function OV(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Bi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Bi(o.result),u.oldVersion,u.newVersion,Bi(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function dT(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Bi(n).then(()=>{})}const Nse=["get","getKey","getAll","getAllKeys","count"],Mse=["put","add","delete","clear"],hT=new Map;function LV(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(hT.get(e))return hT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Mse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Nse.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return hT.set(e,s),s}!function Ase(t){cT=t(cT)}(t=>({...t,get:(e,n,r)=>LV(e,n)||t.get(e,n,r),has:(e,n)=>!!LV(e,n)||t.has(e,n)}));const kse="/firebase-messaging-sw.js",Pse="/firebase-cloud-messaging-push-scope",FV="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ose="https://fcmregistrations.googleapis.com/v1",VV="google.c.a.c_id",Lse="google.c.a.c_l",Fse="google.c.a.ts";var vs=(()=>((vs=vs||{}).PUSH_RECEIVED="push-received",vs.NOTIFICATION_CLICKED="notification-clicked",vs))();function $i(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Use(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const fT="fcm_token_details_db",Bse=5,UV="fcm_token_object_Store";function pT(){return pT=_(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(fT))return null;let e=null;return(yield OV(fT,Bse,{upgrade:(r=_(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(UV))return;const c=a.objectStore(UV),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:$i(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:$i(d.auth),p256dh:$i(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:$i(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:$i(d.auth),p256dh:$i(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:$i(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield dT(fT),yield dT("fcm_vapid_details_db"),yield dT("undefined"),function jse(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),pT.apply(this,arguments)}const Hse="firebase-messaging-database",zse=1,xo="firebase-messaging-store";let gT=null;function mT(){return gT||(gT=OV(Hse,zse,{upgrade:(t,e)=>{0===e&&t.createObjectStore(xo)}})),gT}function BV(t){return yT.apply(this,arguments)}function yT(){return yT=_(function*(t){const e=IT(t),r=yield(yield mT()).transaction(xo).objectStore(xo).get(e);if(r)return r;{const i=yield function $se(t){return pT.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield _T(t,i),i}}),yT.apply(this,arguments)}function _T(t,e){return vT.apply(this,arguments)}function vT(){return(vT=_(function*(t,e){const n=IT(t),i=(yield mT()).transaction(xo,"readwrite");return yield i.objectStore(xo).put(e,n),yield i.done,e})).apply(this,arguments)}function wT(){return(wT=_(function*(t){const e=IT(t),r=(yield mT()).transaction(xo,"readwrite");yield r.objectStore(xo).delete(e),yield r.done})).apply(this,arguments)}function IT({appConfig:t}){return t.appId}const Qt=new ei("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wse(t,e){return ET.apply(this,arguments)}function ET(){return(ET=_(function*(t,e){const n=yield bT(t),r=jV(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(DT(t.appConfig),i)).json()}catch(o){throw Qt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Qt.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Qt.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function TT(){return(TT=_(function*(t,e){const n=yield bT(t),r=jV(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${DT(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Qt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Qt.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Qt.create("token-update-no-token");return s.token})).apply(this,arguments)}function $V(t,e){return CT.apply(this,arguments)}function CT(){return(CT=_(function*(t,e){const r={method:"DELETE",headers:yield bT(t)};try{const s=yield(yield fetch(`${DT(t.appConfig)}/${e}`,r)).json();if(s.error)throw Qt.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Qt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function DT({projectId:t}){return`${Ose}/projects/${t}/registrations`}function bT(t){return ST.apply(this,arguments)}function ST(){return(ST=_(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function jV({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==FV&&(i.web.applicationPubKey=r),i}const Qse=6048e5;function AT(){return AT=_(function*(t){const e=yield function Jse(t,e){return MT.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:$i(e.getKey("auth")),p256dh:$i(e.getKey("p256dh"))},r=yield BV(t.firebaseDependencies);if(r){if(function Zse(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+Qse?function Xse(t,e){return RT.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield $V(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return zV(t.firebaseDependencies,n)}return zV(t.firebaseDependencies,n)}),AT.apply(this,arguments)}function xT(){return xT=_(function*(t){const e=yield BV(t.firebaseDependencies);e&&(yield $V(t.firebaseDependencies,e.token),yield function Gse(t){return wT.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),xT.apply(this,arguments)}function RT(){return RT=_(function*(t,e){try{const n=yield function Kse(t,e){return TT.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield _T(t.firebaseDependencies,r),n}catch(n){throw yield function HV(t){return xT.apply(this,arguments)}(t),n}}),RT.apply(this,arguments)}function zV(t,e){return NT.apply(this,arguments)}function NT(){return(NT=_(function*(t,e){const r={token:yield Wse(t,e),createTime:Date.now(),subscriptionOptions:e};return yield _T(t,r),r.token})).apply(this,arguments)}function MT(){return(MT=_(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Use(e)})})).apply(this,arguments)}function GV(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function eoe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function toe(t,e){e.data&&(t.data=e.data)}(e,t),function noe(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function qV(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function kT(t){return Qt.create("missing-app-config-values",{valueName:t})}qV("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qV("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class soe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function ioe(t){if(!t||!t.options)throw kT("App Configuration Object");if(!t.name)throw kT("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw kT(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function PT(){return(PT=_(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(kse,{scope:Pse}),t.swRegistration.update().catch(()=>{})}catch(e){throw Qt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function OT(){return(OT=_(function*(t,e){if(!e&&!t.swRegistration&&(yield function WV(t){return PT.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Qt.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function LT(){return(LT=_(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=FV)})).apply(this,arguments)}function FT(){return FT=_(function*(t,e){if(!navigator)throw Qt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qt.create("permission-blocked");return yield function aoe(t,e){return LT.apply(this,arguments)}(t,e?.vapidKey),yield function ooe(t,e){return OT.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function Yse(t){return AT.apply(this,arguments)}(t)}),FT.apply(this,arguments)}function VT(){return(VT=_(function*(t,e,n){const r=function coe(t){switch(t){case vs.NOTIFICATION_CLICKED:return"notification_open";case vs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[VV],message_name:n[Lse],message_time:n[Fse],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function UT(){return UT=_(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===vs.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(GV(n)):t.onMessageHandler.next(GV(n)));const r=n.data;(function roe(t){return"object"==typeof t&&!!t&&VV in t})(r)&&"1"===r["google.c.a.e"]&&(yield function uoe(t,e,n){return VT.apply(this,arguments)}(t,n.messageType,r))}),UT.apply(this,arguments)}const QV="@firebase/messaging",doe=t=>{const e=new soe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function loe(t,e){return UT.apply(this,arguments)}(e,n)),e},hoe=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function KV(t,e){return FT.apply(this,arguments)}(e,r)}};function XV(){return BT.apply(this,arguments)}function BT(){return(BT=_(function*(){try{yield Gl()}catch{return!1}return typeof window<"u"&&Io()&&tE()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function foe(){cn(new Kt("messaging",doe,"PUBLIC")),cn(new Kt("messaging-internal",hoe,"PRIVATE")),Ge(QV,"0.12.4"),Ge(QV,"0.12.4","esm2017")}();const gg="analytics",moe="firebase_id",yoe="origin",_oe=6e4,voe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",HT="https://www.googletagmanager.com/gtag/js",Lt=new To("@firebase/analytics"),En=new ei("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ioe(t){if(!t.startsWith(HT)){const e=En.create("invalid-gtag-resource",{gtagURL:t});return Lt.warn(e.message),""}return t}function JV(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zT(){return(zT=_(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield JV(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){Lt.error(a)}t("config",i,s)})).apply(this,arguments)}function GT(){return(GT=_(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield JV(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){Lt.error(s)}})).apply(this,arguments)}const Roe=30,ZV=new class Moe{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function koe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function qT(){return(qT=_(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:koe(r)},s=voe.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function WT(){return(WT=_(function*(t,e=ZV,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw En.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw En.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Voe;return setTimeout(_(function*(){a.abort()}),void 0!==n?n:_oe),eU({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function eU(t,e,n){return KT.apply(this,arguments)}function KT(){return KT=_(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ZV){var s;const{appId:o,measurementId:a}=t;try{yield function Loe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(u){if(a)return Lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield function Poe(t){return qT.apply(this,arguments)}(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!function Foe(t){if(!(t instanceof Sr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return Lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?sE(n,i.intervalMillis,Roe):sE(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),Lt.debug(`Calling attemptFetch again in ${l} millis`),eU(t,d,r,i)}}),KT.apply(this,arguments)}class Voe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let QT,nC;function YT(){return(YT=_(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function rC(){return(rC=_(function*(){if(!Io())return Lt.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Gl()}catch(t){return Lt.warn(En.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function iC(){return iC=_(function*(t,e,n,r,i,s,o){var a;const u=function Ooe(t){return WT.apply(this,arguments)}(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Lt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Lt.error(f)),e.push(u);const c=function Goe(){return rC.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);(function xoe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(HT)&&n.src.includes(t))return n;return null})(s)||function Toe(t,e){const n=function Eoe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Ioe}),r=document.createElement("script"),i=`${HT}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,l.measurementId),nC&&(i("consent","default",nC),function tU(t){nC=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[yoe]="firebase",h.update=!0,null!=d&&(h[moe]=d),i("config",l.measurementId,h),QT&&(i("set",QT),function nU(t){QT=t}(void 0)),l.measurementId}),iC.apply(this,arguments)}class Woe{constructor(e){this.app=e}_delete(){return delete ni[this.app.options.appId],Promise.resolve()}}let ni={},rU=[];const iU={};let oU,ri,mg="dataLayer",sC=!1;function Qoe(t,e,n){!function Koe(){const t=[];if(eE()&&t.push("This is a browser extension environment."),tE()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});Lt.warn(n.message)}}();const r=t.options.appId;if(!r)throw En.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw En.create("no-api-key");Lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ni[r])throw En.create("already-exists",{id:r});if(!sC){!function Coe(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(mg);const{wrappedGtag:s,gtagCore:o}=function Aoe(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Soe(t,e,n,r){function s(){return s=_(function*(o,...a){try{if("event"===o){const[u,c]=a;yield function boe(t,e,n,r,i){return GT.apply(this,arguments)}(t,e,n,u,c)}else if("config"===o){const[u,c]=a;yield function Doe(t,e,n,r,i,s){return zT.apply(this,arguments)}(t,e,n,r,u,c)}else if("consent"===o){const[u]=a;t("consent","update",u)}else if("get"===o){const[u,c,l]=a;t("get",u,c,l)}else if("set"===o){const[u]=a;t("set",u)}else t(o,...a)}catch(u){Lt.error(u)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(ni,rU,iU,mg,"gtag");ri=s,oU=o,sC=!0}return ni[r]=function qoe(t,e,n,r,i,s,o){return iC.apply(this,arguments)}(t,rU,iU,e,oU,mg,n),new Woe(t)}function Xoe(){return oC.apply(this,arguments)}function oC(){return(oC=_(function*(){if(eE()||!tE()||!Io())return!1;try{return yield Gl()}catch{return!1}})).apply(this,arguments)}const aU="@firebase/analytics";!function Zoe(){cn(new Kt(gg,(e,{options:n})=>Qoe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),cn(new Kt("analytics-internal",function t(e){try{const n=e.getProvider(gg).getImmediate();return{logEvent:(r,i,s)=>function Joe(t,e,n,r){t=ti(t),function Uoe(t,e,n,r,i){return YT.apply(this,arguments)}(ri,ni[t.app.options.appId],e,n,r).catch(i=>Lt.error(i))}(n,r,i,s)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Ge(aU,"0.10.0"),Ge(aU,"0.10.0","esm2017")}();class eae extends Bn{constructor(e,n){super()}schedule(e,n=0){return this}}const yg={setInterval(t,e,...n){const{delegate:r}=yg;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=yg;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class cU extends eae{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return yg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&yg.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ga(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const lU={now:()=>(lU.delegate||Date).now(),delegate:void 0};class Yl{constructor(e,n=Yl.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Yl.now=lU.now;class dU extends Yl{constructor(e,n=Yl.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const rae=new class nae extends dU{}(class tae extends cU{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),iae=new dU(cU),_g=new rl("7.6.1"),uC="__angularfire_symbol__analyticsIsSupportedValue",cC="__angularfire_symbol__analyticsIsSupported",lC="__angularfire_symbol__remoteConfigIsSupportedValue",dC="__angularfire_symbol__remoteConfigIsSupported",hC="__angularfire_symbol__messagingIsSupportedValue",fC="__angularfire_symbol__messagingIsSupported";function vg(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[cC]||(globalThis[cC]=Xoe().then(t=>globalThis[uC]=t).catch(()=>globalThis[uC]=!1)),globalThis[fC]||(globalThis[fC]=XV().then(t=>globalThis[hC]=t).catch(()=>globalThis[hC]=!1)),globalThis[dC]||(globalThis[dC]=Ese().then(t=>globalThis[lC]=t).catch(()=>globalThis[lC]=!1));const wg=(t,e)=>{const n=e?[e]:Z2(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Tu(){}class hU{constructor(e,n=rae){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class sae{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tu,{},Tu,Tu)),n.pipe(un({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gC=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new hU(Zone.current)),this.insideAngular=n.run(()=>new hU(Zone.current,iae)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(U(Re))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ro(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function No(t){return Ro().ngZone.run(()=>t())}function aae(t){return Ro(),function uae(t){return function(n){return(n=n.lift(new sae(t.ngZone))).pipe(Qh(t.outsideAngular),Kh(t.insideAngular))}}(Ro())(t)}const cae=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),No(()=>t.apply(void 0,r))},Xl=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=No(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tu,{},Tu,Tu)))),r[s]=cae(r[s],n));const i=function oae(t){return Ro().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof Ke){const s=Ro();return i.pipe(Qh(s.outsideAngular),Kh(s.insideAngular))}return No(()=>i)}return i instanceof Ke?i.pipe(aae):i instanceof Promise?No(()=>new Promise((s,o)=>i.then(a=>No(()=>s(a)),a=>No(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:No(()=>i)};class Mo{constructor(e){return e}}class mC{constructor(){return Z2()}}const yC=new F("angularfire2._apps"),dae={provide:Mo,useFactory:function lae(t){return t&&1===t.length?t[0]:new Mo(pE())},deps:[[new Ot,yC]]},hae={provide:mC,deps:[[new Ot,yC]]};function fae(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Mo(r)}}let pae=(()=>{class t{constructor(n){Ge("angularfire",_g.full,"core"),Ge("angularfire",_g.full,"app"),Ge("angular",pk.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(U(bi))},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({providers:[dae,hae]}),t})();function gae(t,...e){return{ngModule:pae,providers:[{provide:yC,useFactory:fae(t),multi:!0,deps:[Re,sr,gC,...e]}]}}const mae=Xl(J2,!0);const yae=function fU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pU=new ei("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ig=new To("@firebase/auth");function Eg(t,...e){Ig.logLevel<=Y.ERROR&&Ig.error(`Auth (${wu}): ${t}`,...e)}function Ln(t,...e){throw _C(t,...e)}function ii(t,...e){return _C(t,...e)}function _C(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return pU.create(t,...e)}function S(t,e,...n){if(!t)throw _C(e,...n)}function si(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Eg(e),new Error(e)}function ws(t,e){t||si(e)}function mU(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=ZI()||j2()}get(){return function vae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function vC(){return"http:"===mU()||"https:"===mU()}()||eE()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class yU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Iae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Eae=new Zl(3e4,6e4);function nt(t,e,n,r){return IC.apply(this,arguments)}function IC(){return(IC=_(function*(t,e,n,r,i={}){return _U(t,i,_(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=rE(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),yU.fetch()(vU(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function _U(t,e,n){return EC.apply(this,arguments)}function EC(){return(EC=_(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Iae),e);try{const i=new Tae(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw ed(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw ed(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw ed(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw ed(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function gU(t,e,n){const r=Object.assign(Object.assign({},yae()),{[e]:n});return new ei("auth","Firebase",r).create(e,{appName:t.name})}(t,l,c);Ln(t,l)}}catch(i){if(i instanceof Sr)throw i;Ln(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function vU(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function wC(t,e){ws(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class Tae{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ii(this.auth,"network-request-failed")),Eae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ed(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ii(t,e,r);return i.customData._tokenResponse=n,i}function CC(){return(CC=_(function*(t,e){return nt(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function bC(){return(bC=_(function*(t,e){return nt(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function td(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function SC(){return(SC=_(function*(t,e=!1){const n=ti(t),r=yield n.getIdToken(e),i=Tg(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:td(AC(i.auth_time)),issuedAtTime:td(AC(i.iat)),expirationTime:td(AC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function AC(t){return 1e3*Number(t)}function Tg(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Eg("JWT malformed, contained fewer than 3 sections"),null;try{const i=ig(n);return i?JSON.parse(i):(Eg("Failed to decode base64 JWT payload"),null)}catch(i){return Eg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Hi(t,e){return xC.apply(this,arguments)}function xC(){return(xC=_(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Sr&&function xae({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Rae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield n.iteration()}),r)}iteration(){var e=this;return _(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class wU{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=td(this.lastLoginAt),this.creationTime=td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nd(t){return RC.apply(this,arguments)}function RC(){return RC=_(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Hi(t,function bae(t,e){return bC.apply(this,arguments)}(n,{idToken:r}));S(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function kae(t){return t.map(e=>{var{providerId:n}=e,r=t_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function Mae(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wU(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),RC.apply(this,arguments)}function NC(){return(NC=_(function*(t){const e=ti(t);yield nd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function MC(){return(MC=_(function*(t,e){const n=yield _U(t,{},_(function*(){const r=rE({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=vU(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yU.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class rd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S(typeof e.idToken<"u","internal-error"),S(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Aae(t){const e=Tg(t);return S(e,"internal-error"),S(typeof e.exp<"u","internal-error"),S(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return _(function*(){return S(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return _(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Pae(t,e){return MC.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new rd;return r&&(S("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(S("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(S("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rd,this.toJSON())}_performRefresh(){return si("not implemented")}}function Is(t,e){S("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class ko{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=t_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wU(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return _(function*(){const r=yield Hi(n,n.stsTokenManager.getToken(n.auth,e));return S(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Sae(t){return SC.apply(this,arguments)}(this,e)}reload(){return function Nae(t){return NC.apply(this,arguments)}(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ko(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return _(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield nd(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return _(function*(){const n=yield e.getIdToken();return yield Hi(e,function Cae(t,e){return CC.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,v=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:E,emailVerified:M,isAnonymous:O,providerData:W,stsTokenManager:ot}=n;S(E&&ot,e,"internal-error");const Or=rd.fromJSON(this.name,ot);S("string"==typeof E,e,"internal-error"),Is(d,e.name),Is(h,e.name),S("boolean"==typeof M,e,"internal-error"),S("boolean"==typeof O,e,"internal-error"),Is(f,e.name),Is(p,e.name),Is(g,e.name),Is(m,e.name),Is(v,e.name),Is(y,e.name);const Xs=new ko({uid:E,auth:e,email:h,emailVerified:M,displayName:d,isAnonymous:O,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:Or,createdAt:v,lastLoginAt:y});return W&&Array.isArray(W)&&(Xs.providerData=W.map(gve=>Object.assign({},gve))),m&&(Xs._redirectEventId=m),Xs}static _fromIdTokenResponse(e,n,r=!1){return _(function*(){const i=new rd;i.updateFromServerResponse(n);const s=new ko({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield nd(s),s})()}}const IU=new Map;function zi(t){ws(t instanceof Function,"Expected a class definition");let e=IU.get(t);return e?(ws(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,IU.set(t,e),e)}const EU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(n,r){var i=this;return _(function*(){i.storage[n]=r})()}_get(n){var r=this;return _(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return _(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function Cg(t,e,n){return`firebase:${t}:${e}:${n}`}class Du{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Cg(this.userKey,i.apiKey,s),this.fullPersistenceKey=Cg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?ko._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return _(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(function*(){if(!n.length)return new Du(zi(EU),e,r);const i=(yield Promise.all(n.map(function(){var c=_(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||zi(EU);const o=Cg(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=ko._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=_(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new Du(s,e,r)):new Du(s,e,r)})()}}function TU(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function bU(t=Qn()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function CU(t=Qn()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function AU(t=Qn()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function xU(t=Qn()){return/webos/i.test(t)}(e))return"Webos";if(function kC(t=Qn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function DU(t=Qn()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function SU(t=Qn()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function RU(t,e=[]){let n;switch(t){case"Browser":n=TU(Qn());break;case"Worker":n=`${TU(Qn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wu}/${r}`}function NU(t,e){return OC.apply(this,arguments)}function OC(){return(OC=_(function*(t,e){return nt(t,"GET","/v2/recaptchaConfig",function Je(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}(t,e))})).apply(this,arguments)}function kU(t){return void 0!==t&&void 0!==t.enterprise}class PU{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}class LU{constructor(e){this.type="recaptcha-enterprise",this.auth=Ft(e)}verify(e="verify",n=!1){var r=this;return _(function*(){function s(){return s=_(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=_(function*(c,l){NU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new PU(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(c,l){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,c){const l=window.grecaptcha;kU(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{u(d)}).catch(()=>{u("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(c=>{if(!n&&kU(window.grecaptcha))o(c,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));(function LC(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ii("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function Vae(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})})("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,u)}).catch(l=>{u(l)})}}).catch(c=>{u(c)})})})()}}class jae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return _(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class Hae{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FU(this),this.idTokenSubscription=new FU(this),this.beforeStateQueue=new jae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(_(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Du.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return _(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return S(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return _(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return _(function*(){try{yield nd(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function wae(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return _(function*(){const r=e?ti(e):null;return r&&S(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return _(function*(){if(!r._deleted)return e&&S(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(_(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return _(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(_(function*(){yield n.assertedPersistence.setPersistence(zi(e))}))}initializeRecaptchaConfig(){var e=this;return _(function*(){const n=yield NU(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new PU(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new LU(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ei("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return _(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return _(function*(){if(!n.redirectPersistenceManager){const r=e&&zi(e)||n._popupRedirectResolver;S(r,n,"argument-error"),n.redirectPersistenceManager=yield Du.create(n,[zi(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return _(function*(){var r,i;return n._isInitialized&&(yield n.queue(_(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return _(function*(){if(e===n.currentUser)return n.queue(_(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return S(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return _(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return _(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function _ae(t,...e){Ig.logLevel<=Y.WARN&&Ig.warn(`Auth (${wu}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Ft(t){return ti(t)}class FU{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Une(t,e){const n=new Bne(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function OU(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new Zl(3e4,6e4),new Zl(2e3,1e4),new Zl(3e4,6e4),new Zl(5e3,15e3),encodeURIComponent("fac");var hB="@firebase/auth";class Oce{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return _(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}sg(),function Fce(t){cn(new Kt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;S(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RU(t)},c=new Hae(r,i,s,u);return function Gae(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(zi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cn(new Kt("auth-internal",e=>{const n=Ft(e.getProvider("auth").getImmediate());return new Oce(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(hB,"0.23.2",function Lce(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Ge(hB,"0.23.2","esm2017")}("Browser");class Tb{constructor(){return wg("auth")}}const Db=new Map,mB={activated:!1,tokenObservers:[]},zce={initialized:!1,enabled:!1};function rt(t){return Db.get(t)||Object.assign({},mB)}function Fg(){return zce}const bb="https://content-firebaseappcheck.googleapis.com/v1",Kce="exchangeDebugToken",yB={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Yce{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return _(function*(){n.stop();try{n.pending=new _u,yield function Xce(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new _u,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Yt=new ei("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Sb(t){if(!rt(t).activated)throw Yt.create("use-before-activation",{appName:t.name})}function Bg(t,e){return xb.apply(this,arguments)}function xb(){return xb=_(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw Yt.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw Yt.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Yt.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}}),xb.apply(this,arguments)}function _B(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${bb}/projects/${n}/apps/${r}:${Kce}?key=${i}`,body:{debug_token:e}}}const tle="firebase-app-check-database",nle=1,ud="firebase-app-check-store";let $g=null;function Rb(){return Rb=_(function*(t,e){const r=(yield function wB(){return $g||($g=new Promise((t,e)=>{try{const n=indexedDB.open(tle,nle);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Yt.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ud,{keyPath:"compositeKey"})}}catch(n){e(Yt.create("storage-open",{originalErrorMessage:n?.message}))}}),$g)}()).transaction(ud,"readwrite"),s=r.objectStore(ud).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(Yt.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})}),Rb.apply(this,arguments)}const cd=new To("@firebase/app-check");function kb(t,e){return Io()?function ile(t,e){return function IB(t,e){return Rb.apply(this,arguments)}(function TB(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{cd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Ob(){return Fg().enabled}function Lb(){return Fb.apply(this,arguments)}function Fb(){return Fb=_(function*(){const t=Fg();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Fb.apply(this,arguments)}const lle={error:"UNKNOWN_ERROR"};function dle(t){return ng.encodeString(JSON.stringify(t),!1)}function jg(t){return Vb.apply(this,arguments)}function Vb(){return Vb=_(function*(t,e=!1){const n=t.app;Sb(n);const r=rt(n);let s,i=r.token;if(i&&!Su(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(Su(u)?i=u:yield kb(n,void 0))}if(!e&&i&&Su(i))return{token:i.token};let a,o=!1;if(Ob()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Bg(_B(n,yield Lb()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield kb(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield rt(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?cd.warn(u.message):cd.error(u),s=u}return i?s?a=Su(i)?{token:i.token,internalError:s}:SB(s):(a={token:i.token},r.token=i,yield kb(n,i)):a=SB(s),o&&function bB(t,e){const n=rt(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a}),Vb.apply(this,arguments)}function Ub(){return Ub=_(function*(t){const e=t.app;Sb(e);const{provider:n}=rt(e);if(Ob()){const r=yield Lb(),{token:i}=yield Bg(_B(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}}),Ub.apply(this,arguments)}function $b(t,e){const n=rt(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function DB(t){const{app:e}=t,n=rt(e);let r=n.tokenRefresher;r||(r=function hle(t){const{app:e}=t;return new Yce(_(function*(){let r;if(r=rt(e).token?yield jg(t,!0):yield jg(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=rt(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},yB.RETRIAL_MIN_WAIT,yB.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Su(t){return t.expireTimeMillis-Date.now()>0}function SB(t){return{token:dle(lle),error:t}}class fle{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=rt(this.app);for(const n of e)$b(this.app,n.next);return Promise.resolve()}}const OB="app-check-internal";!function Sle(){cn(new Kt("app-check",t=>function ple(t,e){return new fle(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(OB).initialize()})),cn(new Kt(OB,t=>function gle(t){return{getToken:e=>jg(t,e),getLimitedUseToken:()=>function CB(t){return Ub.apply(this,arguments)}(t),addTokenListener:e=>function Bb(t,e,n,r){const{app:i}=t,s=rt(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&Su(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),DB(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>DB(t))}(t,"INTERNAL",e),removeTokenListener:e=>$b(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ge("@firebase/app-check","0.8.0")}();class Gb{constructor(){return wg("app-check")}}typeof window<"u"&&window;var N,Mle=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ar={},Wb=Wb||{},ee=Mle||self;function zg(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ld(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Kb="closure_uid_"+(1e9*Math.random()>>>0),Ple=0;function Ole(t,e,n){return t.call.apply(t.bind,arguments)}function Lle(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ln(t,e,n){return(ln=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ole:Lle).apply(null,arguments)}function Gg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Vt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ts(){this.s=this.s,this.o=this.o}Ts.prototype.s=!1,Ts.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function kle(t){Object.prototype.hasOwnProperty.call(t,Kb)&&t[Kb]||(t[Kb]=++Ple)}(this)},Ts.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const FB=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Qb(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function VB(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(zg(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function dn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}dn.prototype.h=function(){this.defaultPrevented=!0};var Vle=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ee.addEventListener("test",()=>{},e),ee.removeEventListener("test",()=>{},e)}catch{}return t}();function dd(t){return/^[\s\xa0]*$/.test(t)}function qg(){var t=ee.navigator;return t&&(t=t.userAgent)?t:""}function oi(t){return-1!=qg().indexOf(t)}function Yb(t){return Yb[" "](t),t}Yb[" "]=function(){};var Jb,Ble=oi("Opera"),Au=oi("Trident")||oi("MSIE"),UB=oi("Edge"),Xb=UB||Au,BB=oi("Gecko")&&!(-1!=qg().toLowerCase().indexOf("webkit")&&!oi("Edge"))&&!(oi("Trident")||oi("MSIE"))&&!oi("Edge"),$le=-1!=qg().toLowerCase().indexOf("webkit")&&!oi("Edge");function $B(){var t=ee.document;return t?t.documentMode:void 0}e:{var Zb="",eS=function(){var t=qg();return BB?/rv:([^\);]+)(\)|;)/.exec(t):UB?/Edge\/([\d\.]+)/.exec(t):Au?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):$le?/WebKit\/(\S+)/.exec(t):Ble?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(eS&&(Zb=eS?eS[1]:""),Au){var tS=$B();if(null!=tS&&tS>parseFloat(Zb)){Jb=String(tS);break e}}Jb=Zb}var jle=ee.document&&Au&&($B()||parseInt(Jb,10))||void 0;function hd(t,e){if(dn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(BB){e:{try{Yb(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Hle[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&hd.$.h.call(this)}}Vt(hd,dn);var Hle={2:"touch",3:"pen",4:"mouse"};hd.prototype.h=function(){hd.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var fd="closure_listenable_"+(1e6*Math.random()|0),zle=0;function Gle(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++zle,this.fa=this.ia=!1}function Wg(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function rS(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function HB(t){const e={};for(const n in t)e[n]=t[n];return e}const zB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function GB(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<zB.length;s++)n=zB[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Kg(t){this.src=t,this.g={},this.h=0}function iS(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=FB(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Wg(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function sS(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Kg.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=sS(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Gle(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var oS="closure_lm_"+(1e6*Math.random()|0),aS={};function qB(t,e,n,r,i){if(r&&r.once)return KB(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)qB(t,e[s],n,r,i);return null}return n=dS(n),t&&t[fd]?t.O(e,n,ld(r)?!!r.capture:!!r,i):WB(t,e,n,!1,r,i)}function WB(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ld(i)?!!i.capture:!!i,a=cS(t);if(a||(t[oS]=a=new Kg(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function Wle(){const e=Kle;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Vle||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(YB(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function KB(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)KB(t,e[s],n,r,i);return null}return n=dS(n),t&&t[fd]?t.P(e,n,ld(r)?!!r.capture:!!r,i):WB(t,e,n,!0,r,i)}function QB(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)QB(t,e[s],n,r,i);else r=ld(r)?!!r.capture:!!r,n=dS(n),t&&t[fd]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=sS(s=t.g[e],n,r,i))&&(Wg(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=cS(t))&&(e=t.g[e.toString()],t=-1,e&&(t=sS(e,n,r,i)),(n=-1<t?e[t]:null)&&uS(n))}function uS(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[fd])iS(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(YB(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cS(e))?(iS(n,t),0==n.h&&(n.src=null,e[oS]=null)):Wg(t)}}}function YB(t){return t in aS?aS[t]:aS[t]="on"+t}function Kle(t,e){if(t.fa)t=!0;else{e=new hd(e,this);var n=t.listener,r=t.la||t.src;t.ia&&uS(t),t=n.call(r,e)}return t}function cS(t){return(t=t[oS])instanceof Kg?t:null}var lS="__closure_events_fn_"+(1e9*Math.random()>>>0);function dS(t){return"function"==typeof t?t:(t[lS]||(t[lS]=function(e){return t.handleEvent(e)}),t[lS])}function Ut(){Ts.call(this),this.i=new Kg(this),this.S=this,this.J=null}function Xt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new dn(e,t);else if(e instanceof dn)e.target=e.target||t;else{var i=e;GB(e=new dn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Qg(o,r,!0,e)&&i}if(i=Qg(o=e.g=t,r,!0,e)&&i,i=Qg(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Qg(o=e.g=n[s],r,!1,e)&&i}function Qg(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&iS(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Vt(Ut,Ts),Ut.prototype[fd]=!0,Ut.prototype.removeEventListener=function(t,e,n,r){QB(this,t,e,n,r)},Ut.prototype.N=function(){if(Ut.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wg(n[r]);delete t.g[e],t.h--}}this.J=null},Ut.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ut.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var hS=ee.JSON.stringify;function Yle(){var t=fS;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var XB=new class Qle{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Jle,t=>t.reset());class Jle{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Zle(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function ede(t){ee.setTimeout(()=>{throw t},0)}let pd,gd=!1,fS=new class Xle{constructor(){this.h=this.g=null}add(e,n){const r=XB.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},JB=()=>{const t=ee.Promise.resolve(void 0);pd=()=>{t.then(tde)}};var tde=()=>{for(var t;t=Yle();){try{t.h.call(t.g)}catch(n){ede(n)}var e=XB;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}gd=!1};function Yg(t,e){Ut.call(this),this.h=t||1,this.g=e||ee,this.j=ln(this.qb,this),this.l=Date.now()}function pS(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function gS(t,e,n){if("function"==typeof t)n&&(t=ln(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ln(t.handleEvent,t)}return 2147483647<Number(e)?-1:ee.setTimeout(t,e||0)}function ZB(t){t.g=gS(()=>{t.g=null,t.i&&(t.i=!1,ZB(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Vt(Yg,Ut),(N=Yg.prototype).ga=!1,N.T=null,N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xt(this,"tick"),this.ga&&(pS(this),this.start()))}},N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},N.N=function(){Yg.$.N.call(this),pS(this),delete this.g};class nde extends Ts{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZB(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function md(t){Ts.call(this),this.h=t,this.g={}}Vt(md,Ts);var e$=[];function t$(t,e,n,r){Array.isArray(n)||(n&&(e$[0]=n.toString()),n=e$);for(var i=0;i<n.length;i++){var s=qB(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function n$(t){rS(t.g,function(e,n){this.g.hasOwnProperty(n)&&uS(e)},t),t.g={}}function Xg(){this.g=!0}function xu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ode(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return hS(n)}catch{return e}}(t,n)+(r?" "+r:"")})}md.prototype.N=function(){md.$.N.call(this),n$(this)},md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xg.prototype.Ea=function(){this.g=!1},Xg.prototype.info=function(){};var Fo={},r$=null;function Jg(){return r$=r$||new Ut}function i$(t){dn.call(this,Fo.Ta,t)}function yd(t){const e=Jg();Xt(e,new i$(e))}function s$(t,e){dn.call(this,Fo.STAT_EVENT,t),this.stat=e}function Tn(t){const e=Jg();Xt(e,new s$(e,t))}function o$(t,e){dn.call(this,Fo.Ua,t),this.size=e}function _d(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){t()},e)}Fo.Ta="serverreachability",Vt(i$,dn),Fo.STAT_EVENT="statevent",Vt(s$,dn),Fo.Ua="timingevent",Vt(o$,dn);var Zg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},a$={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mS(){}function c$(){}mS.prototype.h=null;var vS,vd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yS(){dn.call(this,"d")}function _S(){dn.call(this,"c")}function em(){}function wd(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new md(this),this.P=ade,this.V=new Yg(t=Xb?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new l$}function l$(){this.i=null,this.g="",this.h=!1}Vt(yS,dn),Vt(_S,dn),Vt(em,mS),em.prototype.g=function(){return new XMLHttpRequest},em.prototype.i=function(){return{}},vS=new em;var ade=45e3,wS={},tm={};function IS(t,e,n){t.L=1,t.v=sm(qi(e)),t.s=n,t.S=!0,d$(t,null)}function d$(t,e){t.G=Date.now(),Id(t),t.A=qi(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),I$(n.i,"t",r),t.C=0,n=t.l.J,t.h=new l$,t.g=G$(t.l,n?e:null,!t.s),0<t.O&&(t.M=new nde(ln(t.Pa,t,t.g),t.O)),t$(t.U,t.g,"readystatechange",t.nb),e=t.I?HB(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),yd(),function rde(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function h$(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function f$(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=ude(t,n),i==tm){4==e&&(t.o=4,Tn(14),r=!1),xu(t.j,t.m,null,"[Incomplete Response]");break}if(i==wS){t.o=4,Tn(15),xu(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}xu(t.j,t.m,i,null),ES(t,i)}h$(t)&&i!=tm&&i!=wS&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Tn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xS(e),e.M=!0,Tn(11))):(xu(t.j,t.m,n,"[Invalid Chunked Response]"),Vo(t),Ed(t))}function ude(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?tm:(n=Number(e.substring(n,r)),isNaN(n)?wS:(r+=1)+n>e.length?tm:(e=e.slice(r,r+n),t.C=r+n,e))}function Id(t){t.Y=Date.now()+t.P,p$(t,t.P)}function p$(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=_d(ln(t.lb,t),e)}function nm(t){t.B&&(ee.clearTimeout(t.B),t.B=null)}function Ed(t){0==t.l.H||t.J||$$(t.l,t)}function Vo(t){nm(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,pS(t.V),n$(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ES(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||TS(n.i,t)))if(!t.K&&TS(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;dm(n),cm(n)}AS(n),Tn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=_d(ln(n.ib,n),6e3));if(1>=C$(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Bo(n,11)}else if((t.K||n.g==t)&&dm(n),!dd(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(CS(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Ue(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=z$(r,r.J?r.pa:null,r.Y),o.K){D$(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(nm(a),Id(a)),r.g=o}else U$(r);0<n.j.length&&lm(n)}else"stop"!=c[0]&&"close"!=c[0]||Bo(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Bo(n,7):SS(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}yd()}catch{}}function g$(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(zg(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function lde(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zg(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function cde(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(zg(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(N=wd.prototype).setTimeout=function(t){this.P=t},N.nb=function(t){t=t.target;const e=this.M;e&&3==ai(t)?e.l():this.Pa(t)},N.Pa=function(t){try{if(t==this.g)e:{const l=ai(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||Xb||this.g&&(this.h.h||this.g.ja()||k$(this.g)))){this.J||4!=l||7==e||yd(),nm(this);var n=this.g.da();this.ca=n;t:if(h$(this)){var r=k$(this.g);t="";var i=r.length,s=4==ai(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vo(this),Ed(this);var o="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function ide(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dd(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Tn(12),Vo(this),Ed(this);break e}xu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ES(this,n)}this.S?(f$(this,l,o),Xb&&this.i&&3==l&&(t$(this.U,this.V,"tick",this.mb),this.V.start())):(xu(this.j,this.m,o,null),ES(this,o)),4==l&&Vo(this),this.i&&!this.J&&(4==l?$$(this.l,this):(this.i=!1,Id(this)))}else(function Ade(t){const e={};t=(t.g&&2<=ai(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(dd(t[r]))continue;var n=Zle(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function qle(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Tn(12)):(this.o=0,Tn(13)),Vo(this),Ed(this)}}}catch{}},N.mb=function(){if(this.g){var t=ai(this.g),e=this.g.ja();this.C<e.length&&(nm(this),f$(this,t,e),this.i&&4!=t&&Id(this))}},N.cancel=function(){this.J=!0,Vo(this)},N.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function sde(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(yd(),Tn(17)),Vo(this),this.o=2,Ed(this)):p$(this,this.Y-t)};var m$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Uo){this.h=t.h,rm(this,t.j),this.s=t.s,this.g=t.g,im(this,t.m),this.l=t.l;var e=t.i,n=new Dd;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),y$(this,n),this.o=t.o}else t&&(e=String(t).match(m$))?(this.h=!1,rm(this,e[1]||"",!0),this.s=Td(e[2]||""),this.g=Td(e[3]||"",!0),im(this,e[4]),this.l=Td(e[5]||"",!0),y$(this,e[6]||"",!0),this.o=Td(e[7]||"")):(this.h=!1,this.i=new Dd(null,this.h))}function qi(t){return new Uo(t)}function rm(t,e,n){t.j=n?Td(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function im(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function y$(t,e,n){e instanceof Dd?(t.i=e,function yde(t,e){e&&!t.j&&(Cs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(v$(this,r),I$(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Cd(e,gde)),t.i=new Dd(e,t.h))}function Ue(t,e,n){t.i.set(e,n)}function sm(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Td(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cd(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,hde),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hde(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Uo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Cd(e,_$,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Cd(e,_$,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Cd(n,"/"==n.charAt(0)?pde:fde,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Cd(n,mde)),t.join("")};var _$=/[#\/\?@]/g,fde=/[#\?:]/g,pde=/[#\?]/g,gde=/[#\?@]/g,mde=/#/g;function Dd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Cs(t){t.g||(t.g=new Map,t.h=0,t.i&&function dde(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function v$(t,e){Cs(t),e=Ru(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function w$(t,e){return Cs(t),e=Ru(t,e),t.g.has(e)}function I$(t,e,n){v$(t,e),0<n.length&&(t.i=null,t.g.set(Ru(t,e),Qb(n)),t.h+=n.length)}function Ru(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function E$(t){this.l=t||vde,t=ee.PerformanceNavigationTiming?0<(t=ee.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(N=Dd.prototype).add=function(t,e){Cs(this),this.i=null,t=Ru(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},N.forEach=function(t,e){Cs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},N.ta=function(){Cs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},N.Z=function(t){Cs(this);let e=[];if("string"==typeof t)w$(this,t)&&(e=e.concat(this.g.get(Ru(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},N.set=function(t,e){return Cs(this),this.i=null,w$(this,t=Ru(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},N.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},N.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var vde=10;function T$(t){return!!t.h||!!t.g&&t.g.size>=t.j}function C$(t){return t.h?1:t.g?t.g.size:0}function TS(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function CS(t,e){t.g?t.g.add(e):t.h=e}function D$(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function b$(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Qb(t.i)}E$.prototype.cancel=function(){if(this.i=b$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var wde=class{stringify(t){return ee.JSON.stringify(t,void 0)}parse(t){return ee.JSON.parse(t,void 0)}};function Ide(){this.g=new wde}function Ede(t,e,n){const r=n||"";try{g$(t,function(i,s){let o=i;ld(i)&&(o=hS(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function om(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function bd(t){this.l=t.fc||null,this.j=t.ob||!1}function am(t,e){Ut.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=DS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vt(bd,mS),bd.prototype.g=function(){return new am(this.l,this.j)},bd.prototype.i=function(t){return function(){return t}}({}),Vt(am,Ut);var DS=0;function S$(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Sd(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ad(t)}function Ad(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(N=am.prototype).open=function(t,e){if(this.readyState!=DS)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ad(this)},N.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sd(this)),this.readyState=DS},N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ad(this)),this.g&&(this.readyState=3,Ad(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;S$(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sd(this):Ad(this),3==this.readyState&&S$(this)}},N.Za=function(t){this.g&&(this.response=this.responseText=t,Sd(this))},N.Ya=function(t){this.g&&(this.response=t,Sd(this))},N.ka=function(){this.g&&Sd(this)},N.setRequestHeader=function(t,e){this.v.append(t,e)},N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},N.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(am.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Cde=ee.JSON.parse;function it(t){Ut.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=A$,this.L=this.M=!1}Vt(it,Ut);var A$="",Dde=/^https?$/i,bde=["POST","PUT"];function x$(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,R$(t),um(t)}function R$(t){t.F||(t.F=!0,Xt(t,"complete"),Xt(t,"error"))}function N$(t){if(t.h&&typeof Wb<"u"&&(!t.C[1]||4!=ai(t)||2!=t.da()))if(t.v&&4==ai(t))gS(t.La,0,t);else if(Xt(t,"readystatechange"),4==ai(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(m$)[1]||null;!i&&ee.self&&ee.self.location&&(i=ee.self.location.protocol.slice(0,-1)),r=!Dde.test(i?i.toLowerCase():"")}n=r}if(n)Xt(t,"complete"),Xt(t,"success");else{t.m=6;try{var s=2<ai(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",R$(t)}}finally{um(t)}}}function um(t,e){if(t.g){M$(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Xt(t,"ready");try{n.onreadystatechange=r}catch{}}}function M$(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ee.clearTimeout(t.A),t.A=null)}function ai(t){return t.g?t.g.readyState:0}function k$(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case A$:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function P$(t){let e="";return rS(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function bS(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=P$(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ue(t,e,n))}function xd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function O$(t){this.Ga=0,this.j=[],this.l=new Xg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=xd("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=xd("baseRetryDelayMs",5e3,t),this.hb=xd("retryDelaySeedMs",1e4,t),this.eb=xd("forwardChannelMaxRetries",2,t),this.xa=xd("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new E$(t&&t.concurrentRequestLimit),this.Ja=new Ide,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function SS(t){if(L$(t),3==t.H){var e=t.W++,n=qi(t.I);if(Ue(n,"SID",t.K),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Rd(t,n),(e=new wd(t,t.l,e)).L=2,e.v=sm(qi(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon)try{n=ee.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ee.Image&&((new Image).src=e.v,n=!0),n||(e.g=G$(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Id(e)}H$(t)}function cm(t){t.g&&(xS(t),t.g.cancel(),t.g=null)}function L$(t){cm(t),t.u&&(ee.clearTimeout(t.u),t.u=null),dm(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ee.clearTimeout(t.m),t.m=null)}function lm(t){if(!T$(t.i)&&!t.m){t.m=!0;var e=t.Na;pd||JB(),gd||(pd(),gd=!0),fS.add(e,t),t.C=0}}function F$(t,e){var n;n=e?e.m:t.W++;const r=qi(t.I);Ue(r,"SID",t.K),Ue(r,"RID",n),Ue(r,"AID",t.V),Rd(t,r),t.o&&t.s&&bS(r,t.o,t.s),n=new wd(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=V$(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),CS(t.i,n),IS(n,r,e)}function Rd(t,e){t.na&&rS(t.na,function(n,r){Ue(e,r,n)}),t.h&&g$({},function(n,r){Ue(e,r,n)})}function V$(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ln(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{Ede(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function U$(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;pd||JB(),gd||(pd(),gd=!0),fS.add(e,t),t.A=0}}function AS(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=_d(ln(t.Ma,t),j$(t,t.A)),t.A++,0))}function xS(t){null!=t.B&&(ee.clearTimeout(t.B),t.B=null)}function B$(t){t.g=new wd(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=qi(t.wa);Ue(e,"RID","rpc"),Ue(e,"SID",t.K),Ue(e,"AID",t.V),Ue(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ue(e,"TO",t.qa),Ue(e,"TYPE","xmlhttp"),Rd(t,e),t.o&&t.s&&bS(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=sm(qi(e)),n.s=null,n.S=!0,d$(n,t)}function dm(t){null!=t.v&&(ee.clearTimeout(t.v),t.v=null)}function $$(t,e){var n=null;if(t.g==e){dm(t),xS(t),t.g=null;var r=2}else{if(!TS(t.i,e))return;n=e.F,D$(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Xt(r=Jg(),new o$(r,n)),lm(t)}else U$(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function xde(t,e){return!(C$(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=_d(ln(t.Na,t,e),j$(t,t.C)),t.C++,0)))}(t,e)||2==r&&AS(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Bo(t,5);break;case 4:Bo(t,10);break;case 3:Bo(t,6);break;default:Bo(t,2)}}function j$(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Bo(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=ln(t.pb,t);n||(n=new Uo("//www.google.com/images/cleardot.gif"),ee.location&&"http"==ee.location.protocol||rm(n,"https"),sm(n)),function Tde(t,e){const n=new Xg;if(ee.Image){const r=new Image;r.onload=Gg(om,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Gg(om,n,r,"TestLoadImage: error",!1,e),r.onabort=Gg(om,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gg(om,n,r,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Tn(2);t.H=0,t.h&&t.h.za(e),H$(t),L$(t)}function H$(t){if(t.H=0,t.ma=[],t.h){const e=b$(t.i);(0!=e.length||0!=t.j.length)&&(VB(t.ma,e),VB(t.ma,t.j),t.i.i.length=0,Qb(t.j),t.j.length=0),t.h.ya()}}function z$(t,e,n){var r=n instanceof Uo?qi(n):new Uo(n);if(""!=r.g)e&&(r.g=e+"."+r.g),im(r,r.m);else{var i=ee.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Uo(null);r&&rm(s,r),e&&(s.g=e),i&&im(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Ue(r,n,e),Ue(r,"VER",t.ra),Rd(t,r),r}function G$(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new it(n&&t.Ha&&!t.va?new bd({ob:!0}):t.va)).Oa(t.J),e}function q$(){}function hm(){if(Au&&!(10<=Number(jle)))throw Error("Environmental error: no available transport.")}function Yn(t,e){Ut.call(this),this.g=new O$(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!dd(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dd(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Nu(this)}function W$(t){yS.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function K$(){_S.call(this),this.status=1}function Nu(t){this.g=t}function xr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function RS(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Se(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(N=it.prototype).Oa=function(t){this.M=t},N.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vS.g(),this.C=function u$(t){return t.h||(t.h=t.i())}(this.u?this.u:vS),this.g.onreadystatechange=ln(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void x$(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=ee.FormData&&t instanceof ee.FormData,!(0<=FB(bde,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{M$(this),0<this.B&&((this.L=function Sde(t){return Au&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ln(this.ua,this)):this.A=gS(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){x$(this,s)}},N.ua=function(){typeof Wb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xt(this,"timeout"),this.abort(8))},N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Xt(this,"complete"),Xt(this,"abort"),um(this))},N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),um(this,!0)),it.$.N.call(this)},N.La=function(){this.s||(this.G||this.v||this.l?N$(this):this.kb())},N.kb=function(){N$(this)},N.isActive=function(){return!!this.g},N.da=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Cde(e)}},N.Ia=function(){return this.m},N.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(N=O$.prototype).ra=8,N.H=1,N.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new wd(this,this.l,t);let s=this.s;if(this.U&&(s?(s=HB(s),GB(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=V$(this,i,e),Ue(n=qi(this.I),"RID",t),Ue(n,"CVER",22),this.F&&Ue(n,"X-HTTP-Session-Id",this.F),Rd(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(P$(s)))+"&"+e:this.o&&bS(n,this.o,s)),CS(this.i,i),this.bb&&Ue(n,"TYPE","init"),this.P?(Ue(n,"$req",e),Ue(n,"SID","null"),i.aa=!0,IS(i,n,null)):IS(i,n,e),this.H=2}}else 3==this.H&&(t?F$(this,t):0==this.j.length||T$(this.i)||F$(this))},N.Ma=function(){if(this.u=null,B$(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=_d(ln(this.jb,this),t)}},N.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Tn(10),cm(this),B$(this))},N.ib=function(){null!=this.v&&(this.v=null,cm(this),AS(this),Tn(19))},N.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Tn(2)):(this.l.info("Failed to ping google.com"),Tn(1))},N.isActive=function(){return!!this.h&&this.h.isActive(this)},(N=q$.prototype).Ba=function(){},N.Aa=function(){},N.za=function(){},N.ya=function(){},N.isActive=function(){return!0},N.Va=function(){},hm.prototype.g=function(t,e){return new Yn(t,e)},Vt(Yn,Ut),Yn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Tn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=z$(t,null,t.Y),lm(t)},Yn.prototype.close=function(){SS(this.g)},Yn.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=hS(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&lm(e)},Yn.prototype.N=function(){this.g.h=null,delete this.j,SS(this.g),delete this.g,Yn.$.N.call(this)},Vt(W$,yS),Vt(K$,_S),Vt(Nu,q$),Nu.prototype.Ba=function(){Xt(this.g,"a")},Nu.prototype.Aa=function(t){Xt(this.g,new W$(t))},Nu.prototype.za=function(t){Xt(this.g,new K$)},Nu.prototype.ya=function(){Xt(this.g,"b")},Vt(xr,function Rde(){this.blockSize=-1}),xr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},xr.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)RS(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){RS(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){RS(this,r),i=0;break}}this.h=i,this.i+=e},xr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var Nde={};function NS(t){return-128<=t&&128>t?function Ule(t,e){var n=Nde;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Se([0|e],0>e?-1:0)}):new Se([0|t],0>t?-1:0)}function ui(t){if(isNaN(t)||!isFinite(t))return Mu;if(0>t)return Jt(ui(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=MS;return new Se(e,0)}var MS=4294967296,Mu=NS(0),kS=NS(1),Y$=NS(16777216);function Wi(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function dr(t){return-1==t.h}function Jt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Se(n,~t.h).add(kS)}function fm(t,e){return t.add(Jt(e))}function pm(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Nd(t,e){this.g=t,this.h=e}function gm(t,e){if(Wi(e))throw Error("division by zero");if(Wi(t))return new Nd(Mu,Mu);if(dr(t))return e=gm(Jt(t),e),new Nd(Jt(e.g),Jt(e.h));if(dr(e))return e=gm(t,Jt(e)),new Nd(Jt(e.g),e.h);if(30<t.g.length){if(dr(t)||dr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=kS,r=e;0>=r.X(t);)n=X$(n),r=X$(r);var i=ku(n,1),s=ku(r,1);for(r=ku(r,2),n=ku(n,2);!Wi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=ku(r,1),n=ku(n,1)}return e=fm(t,i.R(e)),new Nd(i,e)}for(i=Mu;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ui(n)).R(e);dr(o)||0<o.X(t);)o=(s=ui(n-=r)).R(e);Wi(s)&&(s=kS),i=i.add(s),t=fm(t,o)}return new Nd(i,t)}function X$(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Se(n,t.h)}function ku(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Se(i,t.h)}(N=Se.prototype).ea=function(){if(dr(this))return-Jt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:MS+r)*e,e*=MS}return t},N.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Wi(this))return"0";if(dr(this))return"-"+Jt(this).toString(t);for(var e=ui(Math.pow(t,6)),n=this,r="";;){var i=gm(n,e).g,s=((0<(n=fm(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Wi(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},N.X=function(t){return dr(t=fm(this,t))?-1:Wi(t)?0:1},N.abs=function(){return dr(this)?Jt(this):this},N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Se(n,-2147483648&n[n.length-1]?-1:0)},N.R=function(t){if(Wi(this)||Wi(t))return Mu;if(dr(this))return dr(t)?Jt(this).R(Jt(t)):Jt(Jt(this).R(t));if(dr(t))return Jt(this.R(Jt(t)));if(0>this.X(Y$)&&0>t.X(Y$))return ui(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,pm(n,2*r+2*i),n[2*r+2*i+1]+=s*u,pm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,pm(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,pm(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Se(n,0)},N.gb=function(t){return gm(this,t).h},N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Se(n,this.h&t.h)},N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Se(n,this.h|t.h)},N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Se(n,this.h^t.h)},hm.prototype.createWebChannel=hm.prototype.g,Yn.prototype.send=Yn.prototype.u,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,Zg.NO_ERROR=0,Zg.TIMEOUT=8,Zg.HTTP_ERROR=6,a$.COMPLETE="complete",c$.EventType=vd,vd.OPEN="a",vd.CLOSE="b",vd.ERROR="c",vd.MESSAGE="d",Ut.prototype.listen=Ut.prototype.O,it.prototype.listenOnce=it.prototype.P,it.prototype.getLastError=it.prototype.Sa,it.prototype.getLastErrorCode=it.prototype.Ia,it.prototype.getStatus=it.prototype.da,it.prototype.getResponseJson=it.prototype.Wa,it.prototype.getResponseText=it.prototype.ja,it.prototype.send=it.prototype.ha,it.prototype.setWithCredentials=it.prototype.Oa,xr.prototype.digest=xr.prototype.l,xr.prototype.reset=xr.prototype.reset,xr.prototype.update=xr.prototype.j,Se.prototype.add=Se.prototype.add,Se.prototype.multiply=Se.prototype.R,Se.prototype.modulo=Se.prototype.gb,Se.prototype.compare=Se.prototype.X,Se.prototype.toNumber=Se.prototype.ea,Se.prototype.toString=Se.prototype.toString,Se.prototype.getBits=Se.prototype.D,Se.fromNumber=ui,Se.fromString=function Q$(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Jt(Q$(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ui(Math.pow(e,8)),r=Mu,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ui(Math.pow(e,s)),r=r.R(s).add(ui(o))):r=(r=r.R(n)).add(ui(o))}return r};var Mde=Ar.createWebChannelTransport=function(){return new hm},kde=Ar.getStatEventTarget=function(){return Jg()},PS=Ar.ErrorCode=Zg,Pde=Ar.EventType=a$,Ode=Ar.Event=Fo,J$=Ar.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Lde=Ar.FetchXmlHttpFactory=bd,mm=Ar.WebChannel=c$,Fde=Ar.XhrIo=it,Vde=Ar.Md5=xr,Pu=Ar.Integer=Se;const Z$="@firebase/firestore";class Bt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");let Ou="9.23.0";const Ds=new To("@firebase/firestore");function OS(){return Ds.logLevel}function D(t,...e){if(Ds.logLevel<=Y.DEBUG){const n=e.map(LS);Ds.debug(`Firestore (${Ou}): ${t}`,...n)}}function ct(t,...e){if(Ds.logLevel<=Y.ERROR){const n=e.map(LS);Ds.error(`Firestore (${Ou}): ${t}`,...n)}}function Rr(t,...e){if(Ds.logLevel<=Y.WARN){const n=e.map(LS);Ds.warn(`Firestore (${Ou}): ${t}`,...n)}}function LS(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function V(t="Unexpected state"){const e=`FIRESTORE (${Ou}) INTERNAL ASSERTION FAILED: `+t;throw ct(e),new Error(e)}function B(t,e){t||V()}function R(t,e){return t}const I={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class C extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class ej{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ude{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class Bde{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $de{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(_(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(B("string"==typeof r.accessToken),new ej(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return B(null===e||"string"==typeof e),new Bt(e)}}class jde{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Hde{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new jde(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zde{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{null!=s.error&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B("string"==typeof n.token),this.T=n.token,new tj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gde(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class nj{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Gde(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function J(t,e){return t<e?-1:t>e?1:0}function Lu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new C(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new C(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new C(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ${constructor(e){this.timestamp=e}static fromTimestamp(e){return new $(e)}static min(){return new $(new Ze(0,0))}static max(){return new $(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Md{constructor(e,n,r){void 0===n?n=0:n>e.length&&V(),void 0===r?r=e.length-n:r>e.length-n&&V(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Md.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Md?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class me extends Md{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new C(I.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new me(n)}static emptyPath(){return new me([])}}const qde=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Md{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return qde.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new C(I.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new C(I.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new C(I.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new C(I.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}class A{constructor(e){this.path=e}static fromPath(e){return new A(me.fromString(e))}static fromName(e){return new A(me.fromString(e).popFirst(5))}static empty(){return new A(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===me.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new me(e.slice()))}}function sj(t){return new Xn(t.readTime,t.key,-1)}class Xn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xn($.min(),A.empty(),-1)}static max(){return new Xn($.max(),A.empty(),-1)}}function VS(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=A.comparator(t.documentKey,e.documentKey),0!==n?n:J(t.largestBatchId,e.largestBatchId))}const oj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qde{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function bs(t){return US.apply(this,arguments)}function US(){return US=_(function*(t){if(t.code!==I.FAILED_PRECONDITION||t.message!==oj)throw t;D("LocalStore","Unexpectedly lost primary lease")}),US.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new w((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof w?n:w.resolve(n)}catch(n){return w.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):w.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):w.reject(n)}static resolve(e){return new w((n,r)=>{n(e)})}static reject(e){return new w((n,r)=>{r(e)})}static waitFor(e){return new w((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=w.resolve(!1);for(const r of e)n=n.next(i=>i?w.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new w((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new w((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function Ss(t){return"IndexedDbTransactionError"===t.name}let Jn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function Od(t){return null==t}function Ld(t){return 0===t&&1/t==-1/0}function gj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}class Oe{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Im(this.root,e,this.comparator,!1)}getReverseIterator(){return new Im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Im(this.root,e,this.comparator,!0)}}class Im{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Zt.RED,this.left=i??Zt.EMPTY,this.right=s??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Zt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();const e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1,Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Zt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Be{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yj(this.data.getIterator())}getIteratorFrom(e){return new yj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class yj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fn{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new Be(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class _j extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _j("Invalid base64 string: "+i):i}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const _he=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(t){if(B(!!t),"string"==typeof t){let e=0;const n=_he.exec(t);if(B(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ki(t){return"string"==typeof t?Rt.fromBase64String(t):Rt.fromUint8Array(t)}function Em(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Tm(t){const e=t.mapValue.fields.__previous_value__;return Em(e)?Tm(e):e}function Fd(t){const e=xs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}class vhe{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Ho{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}const Rs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Em(t)?4:Ej(t)?9007199254740991:10:V()}function li(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fd(t).isEqual(Fd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=xs(r.timestampValue),o=xs(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Ki(t.bytesValue).isEqual(Ki(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return st(r.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(r.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return st(r.integerValue)===st(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=st(r.doubleValue),o=st(i.doubleValue);return s===o?Ld(s)===Ld(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Lu(t.arrayValue.values||[],e.arrayValue.values||[],li);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(gj(s)!==gj(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!li(s[a],o[a])))return!1;return!0}(t,e);default:return V()}var i}function Vd(t,e){return void 0!==(t.values||[]).find(n=>li(n,e))}function Ms(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=st(i.integerValue||i.doubleValue),a=st(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return vj(t.timestampValue,e.timestampValue);case 4:return vj(Fd(t),Fd(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Ki(i),a=Ki(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=J(o[u],a[u]);if(0!==c)return c}return J(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=J(st(i.latitude),st(s.latitude));return 0!==o?o:J(st(i.longitude),st(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=Ms(o[u],a[u]);if(c)return c}return J(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Rs.mapValue&&s===Rs.mapValue)return 0;if(i===Rs.mapValue)return 1;if(s===Rs.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=J(a[l],c[l]);if(0!==d)return d;const h=Ms(o[a[l]],u[c[l]]);if(0!==h)return h}return J(a.length,c.length)}(t.mapValue,e.mapValue);default:throw V()}}function vj(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return J(t,e);const n=xs(t),r=xs(e),i=J(n.seconds,r.seconds);return 0!==i?i:J(n.nanos,r.nanos)}function Vu(t){return jS(t)}function jS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=xs(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ki(t.bytesValue).toBase64():"referenceValue"in t?A.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=jS(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${jS(r.fields[a])}`;return s+"}"}(t.mapValue):V();var e}function HS(t){return!!t&&"integerValue"in t}function Ud(t){return!!t&&"arrayValue"in t}function wj(t){return!!t&&"nullValue"in t}function Ij(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bm(t){return!!t&&"mapValue"in t}function Bd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Ej(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bd(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Bd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){As(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new en(Bd(this.value))}}class $e{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $e(e,0,$.min(),$.min(),$.min(),en.empty(),0)}static newFoundDocument(e,n,r,i){return new $e(e,1,n,$.min(),r,i,0)}static newNoDocument(e,n){return new $e(e,2,n,$.min(),$.min(),en.empty(),0)}static newUnknownDocument(e,n){return new $e(e,3,n,$.min(),$.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ks{constructor(e,n){this.position=e,this.inclusive=n}}function bj(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?A.comparator(A.fromName(o.referenceValue),n.key):Ms(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Sj(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!li(t.position[n],e.position[n]))return!1;return!0}class Uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ehe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Aj{}class fe extends Aj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new The(e,n,r):"array-contains"===n?new bhe(e,r):"in"===n?new Pj(e,r):"not-in"===n?new She(e,r):"array-contains-any"===n?new Ahe(e,r):new fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new Che(e,r):new Dhe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ms(n,this.value)):null!==n&&Ns(this.value)===Ns(n)&&this.matchesComparison(Ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return V()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ae extends Aj{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Ae(e,n)}matches(e){return Bu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Bu(t){return"and"===t.op}function GS(t){return function xj(t){for(const e of t.filters)if(e instanceof Ae)return!1;return!0}(t)&&Bu(t)}function qS(t){if(t instanceof fe)return t.field.canonicalString()+t.op.toString()+Vu(t.value);if(GS(t))return t.filters.map(e=>qS(e)).join(",");{const e=t.filters.map(n=>qS(n)).join(",");return`${t.op}(${e})`}}function Rj(t,e){return t instanceof fe?(n=t,(r=e)instanceof fe&&n.op===r.op&&n.field.isEqual(r.field)&&li(n.value,r.value)):t instanceof Ae?function(n,r){return r instanceof Ae&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&Rj(s,r.filters[o]),!0)}(t,e):void V();var n,r}function Mj(t){return t instanceof fe?function(e){return`${e.field.canonicalString()} ${e.op} ${Vu(e.value)}`}(t):t instanceof Ae?function(e){return e.op.toString()+" {"+e.getFilters().map(Mj).join(" ,")+"}"}(t):"Filter"}class The extends fe{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){const n=A.comparator(e.key,this.key);return this.matchesComparison(n)}}class Che extends fe{constructor(e,n){super(e,"in",n),this.keys=kj(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Dhe extends fe{constructor(e,n){super(e,"not-in",n),this.keys=kj(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kj(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}class bhe extends fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ud(n)&&Vd(n.arrayValue,this.value)}}class Pj extends fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Vd(this.value.arrayValue,n)}}class She extends fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Vd(this.value.arrayValue,n)}}class Ahe extends fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ud(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vd(this.value.arrayValue,r))}}class xhe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function WS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new xhe(t,e,n,r,i,s,o)}function Go(t){const e=R(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qS(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Od(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vu(r)).join(",")),e.dt=n}return e.dt}function $d(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ehe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Rj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sj(t.startAt,e.startAt)&&Sj(t.endAt,e.endAt)}function Sm(t){return A.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Qi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function $u(t){return new Qi(t)}function Vj(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function qo(t){const e=R(t);if(null===e.wt){e.wt=[];const n=function xm(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}(e),r=function KS(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new Uu(n)),e.wt.push(new Uu(lt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Uu(lt.keyField(),s))}}}return e.wt}function Cn(t){const e=R(t);if(!e._t)if("F"===e.limitType)e._t=WS(e.path,e.collectionGroup,qo(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of qo(e))n.push(new Uu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new ks(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ks(e.startAt.position,e.startAt.inclusive):null;e._t=WS(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Rm(t,e,n){return new Qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jd(t,e){return $d(Cn(t),Cn(e))&&t.limitType===e.limitType}function Uj(t){return`${Go(Cn(t))}|lt:${t.limitType}`}function XS(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Mj(r)).join(", ")}]`),Od(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vu(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vu(r)).join(",")),`Target(${n})`}(Cn(t))}; limitType=${t.limitType})`}function Hd(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):A.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of qo(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=bj(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,qo(n),r)||n.endAt&&!function(i,s,o){const a=bj(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,qo(n),r)));var n,r}function $j(t){return(e,n)=>{let r=!1;for(const i of qo(t)){const s=Rhe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Rhe(t,e,n){const r=t.field.isKeyField()?A.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?Ms(a,u):V()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return V()}}class Yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function mj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const Nhe=new Oe(A.comparator);function Vn(){return Nhe}const jj=new Oe(A.comparator);function zd(...t){let e=jj;for(const n of t)e=e.insert(n.key,n);return e}function Hj(t){let e=jj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function di(){return Gd()}function zj(){return Gd()}function Gd(){return new Yi(t=>t.toString(),(t,e)=>t.isEqual(e))}new Oe(A.comparator);const khe=new Be(A.comparator);function oe(...t){let e=khe;for(const n of t)e=e.add(n);return e}const Phe=new Be(J);class Nm{constructor(){this._=void 0}}function Ohe(t,e,n){return t instanceof ju?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Em(i)&&(i=Tm(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Wo?Qj(t,e):t instanceof Ko?Yj(t,e):function(r,i){const s=function Kj(t,e){return t instanceof Hu?HS(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}(r,i),o=Xj(s)+Xj(r.gt);return HS(s)&&HS(r.gt)?function qj(t){return{integerValue:""+t}}(o):function Gj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}(r.serializer,o)}(t,e)}function Lhe(t,e,n){return t instanceof Wo?Qj(t,e):t instanceof Ko?Yj(t,e):n}class ju extends Nm{}class Wo extends Nm{constructor(e){super(),this.elements=e}}function Qj(t,e){const n=Jj(e);for(const r of t.elements)n.some(i=>li(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ko extends Nm{constructor(e){super(),this.elements=e}}function Yj(t,e){let n=Jj(e);for(const r of t.elements)n=n.filter(i=>!li(i,r));return{arrayValue:{values:n}}}class Hu extends Nm{constructor(e,n){super(),this.serializer=e,this.gt=n}}function Xj(t){return st(t.integerValue||t.doubleValue)}function Jj(t){return Ud(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class qe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qe}static exists(e){return new qe(void 0,e)}static updateTime(e){return new qe(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mm(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ZS{}function Zj(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Gu(t.key,qe.none()):new zu(t.key,t.data,qe.none());{const n=t.data,r=en.empty();let i=new Be(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Xi(t.key,r,new Fn(i.toArray()),qe.none())}}function Uhe(t,e,n){t instanceof zu?function(r,i,s){const o=r.value.clone(),a=nH(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Xi?function(r,i,s){if(!Mm(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=nH(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(tH(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Wd(t,e,n,r){return t instanceof zu?function(i,s,o,a){if(!Mm(i.precondition,s))return o;const u=i.value.clone(),c=rH(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xi?function(i,s,o,a){if(!Mm(i.precondition,s))return o;const u=rH(i.fieldTransforms,a,s),c=s.data;return c.setAll(tH(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,Mm(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function eH(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Lu(n,r,(i,s)=>function Fhe(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof Wo&&r instanceof Wo||n instanceof Ko&&r instanceof Ko?Lu(n.elements,r.elements,li):n instanceof Hu&&r instanceof Hu?li(n.gt,r.gt):n instanceof ju&&r instanceof ju);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class zu extends ZS{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xi extends ZS{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tH(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function nH(t,e,n){const r=new Map;B(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Lhe(o,a,n[i]))}return r}function rH(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Ohe(s,o,e))}return r}class Gu extends ZS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t0{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Uhe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zj();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=Zj(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument($.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Lu(this.mutations,e.mutations,(n,r)=>eH(n,r))&&Lu(this.baseMutations,e.baseMutations,(n,r)=>eH(n,r))}}class r0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jhe{constructor(e,n){this.count=e,this.unchangedNames=n}}var It,ye;function sH(t){if(void 0===t)return ct("GRPC error has no .code"),I.UNKNOWN;switch(t){case It.OK:return I.OK;case It.CANCELLED:return I.CANCELLED;case It.UNKNOWN:return I.UNKNOWN;case It.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case It.INTERNAL:return I.INTERNAL;case It.UNAVAILABLE:return I.UNAVAILABLE;case It.UNAUTHENTICATED:return I.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case It.NOT_FOUND:return I.NOT_FOUND;case It.ALREADY_EXISTS:return I.ALREADY_EXISTS;case It.PERMISSION_DENIED:return I.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case It.ABORTED:return I.ABORTED;case It.OUT_OF_RANGE:return I.OUT_OF_RANGE;case It.UNIMPLEMENTED:return I.UNIMPLEMENTED;case It.DATA_LOSS:return I.DATA_LOSS;default:return V()}}(ye=It||(It={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";class s0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return km}static getOrCreateInstance(){return null===km&&(km=new s0),km}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let km=null;const Hhe=new Pu([4294967295,4294967295],0);function aH(t){const e=function oH(){return new TextEncoder}().encode(t),n=new Vde;return n.update(e),new Uint8Array(n.digest())}function uH(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Pu([n,r],0),new Pu([i,s],0)]}class o0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kd(`Invalid padding: ${n}`);if(r<0)throw new Kd(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Kd(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Kd(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Pu.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(Pu.fromNumber(r)));return 1===i.compare(Hhe)&&(i=new Pu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=aH(e),[r,i]=uH(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new o0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const n=aH(e),[r,i]=uH(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Kd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Yd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qd($.min(),i,new Oe(J),Vn(),oe())}}class Yd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yd(r,n,oe(),oe(),oe())}}class Pm{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class cH{constructor(e,n){this.targetId=e,this.Vt=n}}class lH{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class dH{constructor(){this.St=0,this.Dt=fH(),this.Ct=Rt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=oe(),n=oe(),r=oe();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:V()}}),new Yd(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=fH()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class zhe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Vn(),this.zt=hH(),this.Wt=new Oe(J)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Sm(o))if(0===i){const a=new A(o.path);this.Yt(r,a,$e.newNoDocument(a,$.min()))}else B(1===i);else{const a=this.ie(r);if(a!==i){const u=this.re(e,a);0!==u&&(this.ee(r),this.Wt=this.Wt.insert(r,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=s0.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(c,l,d){var h,f,p,g,m,v;const y={localCacheCount:l,existenceFilterCount:d.count},E=d.unchangedNames;return E&&(y.bloomFilter={applied:0===c,hashCount:null!==(h=E?.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(g=null===(p=null===(f=E?.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==g?g:0,padding:null!==(v=null===(m=E?.bits)||void 0===m?void 0:m.padding)&&void 0!==v?v:0}),y}(u,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let u,c;try{u=Ki(s).toUint8Array()}catch(l){if(l instanceof _j)return Rr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{c=new o0(u,o,a)}catch(l){return Rr(l instanceof Kd?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return 0===c.It?1:i!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Sm(a.target)){const u=new A(a.target.path);null!==this.jt.get(u)||this.ae(o,u)||this.Yt(o,u,$e.newNoDocument(u,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=oe();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.se(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new Qd(e,n,this.Wt,this.jt,r);return this.jt=Vn(),this.zt=hH(),this.Wt=new Oe(J),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new dH,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Be(J),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||D("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new dH),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function hH(){return new Oe(A.comparator)}function fH(){return new Oe(A.comparator)}const Ghe={asc:"ASCENDING",desc:"DESCENDING"},qhe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Whe={and:"AND",or:"OR"};class Khe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function a0(t,e){return t.useProto3Json||Od(e)?e:{value:e}}function dt(t){return B(!!t),$.fromTimestamp(function(e){const n=xs(e);return new Ze(n.seconds,n.nanos)}(t))}function gH(t){const e=me.fromString(t);return B(CH(e)),e}function hi(t,e){const n=gH(e);if(n.get(1)!==t.databaseId.projectId)throw new C(I.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new C(I.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(yH(n))}function c0(t,e){return function u0(t,e){return(n=t,new me(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}(t.databaseId,e)}function Jd(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yH(t){return B(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function wH(t,e){return{documents:[c0(t,e.path)]}}function d0(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=c0(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=c0(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return TH(Ae.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:Ps((l=c).field),direction:efe(l.dir)};var l})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=a0(t,e.limit);var a,u;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),n}function IH(t){let e=function mH(t){const e=gH(t);return 4===e.length?me.emptyPath():yH(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){B(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=EH(l);return d instanceof Ae&&GS(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new Uu(Wu((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,Od(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new ks((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new ks(l.values||[],!l.before)}(n.endAt)),function Fj(t,e,n,r,i,s,o,a){return new Qi(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function EH(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Wu(e.unaryFilter.field);return fe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Wu(e.unaryFilter.field);return fe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wu(e.unaryFilter.field);return fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Wu(e.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return V()}}(t):void 0!==t.fieldFilter?function(e){return fe.create(Wu(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(e){return Ae.create(e.compositeFilter.filters.map(n=>EH(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return V()}}(e.compositeFilter.op))}(t):V()}function efe(t){return Ghe[t]}function tfe(t){return qhe[t]}function nfe(t){return Whe[t]}function Ps(t){return{fieldPath:t.canonicalString()}}function Wu(t){return lt.fromServerFormat(t.fieldPath)}function TH(t){return t instanceof fe?function(e){if("=="===e.op){if(Ij(e.value))return{unaryFilter:{field:Ps(e.field),op:"IS_NAN"}};if(wj(e.value))return{unaryFilter:{field:Ps(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ij(e.value))return{unaryFilter:{field:Ps(e.field),op:"IS_NOT_NAN"}};if(wj(e.value))return{unaryFilter:{field:Ps(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ps(e.field),op:tfe(e.op),value:e.value}}}(t):t instanceof Ae?function(e){const n=e.getFilters().map(r=>TH(r));return 1===n.length?n[0]:{compositeFilter:{op:nfe(e.op),filters:n}}}(t):V()}function CH(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ji{constructor(e,n,r,i,s=$.min(),o=$.min(),a=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class DH{constructor(e){this.fe=e}}function h0(t){const e=IH({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Rm(e,e.limit,"L"):e}class Jo{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(st(e.integerValue));else if("doubleValue"in e){const r=st(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),Ld(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Ki(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?Ej(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):V()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),A.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Jo.Ve=new Jo;class hfe{constructor(){this.rn=new _0}addToCollectionParentIndex(e,n){return this.rn.add(n),w.resolve()}getCollectionParents(e,n){return w.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return w.resolve()}deleteFieldIndex(e,n){return w.resolve()}getDocumentsMatchingTarget(e,n){return w.resolve(null)}getIndexType(e,n){return w.resolve(0)}getFieldIndexes(e,n){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,n){return w.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,n){return w.resolve(Xn.min())}updateCollectionGroup(e,n,r){return w.resolve()}updateIndexEntries(e,n){return w.resolve()}}class _0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Be(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Be(me.comparator)).toArray()}}new Uint8Array(0);class fn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class ea{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ea(0)}static Mn(){return new ea(-1)}}class _fe{constructor(){this.changes=new Yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?w.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ife{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XH{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Wd(r.mutation,i,Fn.empty(),Ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const i=di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=zd();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Vn();const o=Gd(),a=Gd();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Xi)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),Wd(l.mutation,c,l.mutation.getFieldMask(),Ze.now())):o.set(c.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Ife(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Gd();let i=new Oe((o,a)=>o-a),s=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||Fn.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||oe()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=zj();l.forEach(h=>{if(!s.has(h)){const f=Zj(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return w.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return A.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function QS(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):w.resolve(di());let a=-1,u=s;return o.next(c=>w.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?w.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,oe())).next(l=>({batchId:a,changes:Hj(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let i=zd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=zd();return this.indexManager.getCollectionParents(e,i).next(o=>w.forEach(o,a=>{const u=(c=n,l=a.child(i),new Qi(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();null===s.get(c)&&(s=s.insert(c,$e.newInvalidDocument(c)))});let o=zd();return s.forEach((a,u)=>{const c=i.get(a);void 0!==c&&Wd(c.mutation,u,Fn.empty(),Ze.now()),Hd(n,u)&&(o=o.insert(a,u))}),o})}}class Efe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return w.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:dt(r.createTime)}),w.resolve()}getNamedQuery(e,n){return w.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:h0(r.bundledQuery),readTime:dt(r.readTime)}),w.resolve();var r}}class Tfe{constructor(){this.overlays=new Oe(A.comparator),this.ls=new Map}getOverlay(e,n){return w.resolve(this.overlays.get(n))}getOverlays(e,n){const r=di();return w.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),w.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),w.resolve()}getOverlaysForCollection(e,n,r){const i=di(),s=n.length+1,o=new A(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return w.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Oe((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=di(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=di(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return w.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new r0(n,r));let s=this.ls.get(n);void 0===s&&(s=oe(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}class v0{constructor(){this.fs=new Be(jt.ds),this.ws=new Be(jt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new jt(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new jt(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new A(new me([])),r=new jt(n,e),i=new jt(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new A(new me([])),r=new jt(n,e),i=new jt(n,e+1);let s=oe();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new jt(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return A.comparator(e.key,n.key)||J(e.As,n.As)}static _s(e,n){return J(e.As,n.As)||A.comparator(e.key,n.key)}}class Cfe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Be(jt.ds)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++;const o=new t0(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,n){return w.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),s=i<0?0:i;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),i=new jt(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(J);return n.forEach(i=>{const s=new jt(i,0),o=new jt(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),w.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;A.isDocumentKey(s)||(s=s.child(""));const o=new jt(new A(s),0);let a=new Be(J);return this.Rs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.As)),!0)},o),w.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){B(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return w.forEach(n.mutations,i=>{const s=new jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new jt(n,0),i=this.Rs.firstAfterOrEqual(r);return w.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return w.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Dfe{constructor(e){this.Ds=e,this.docs=new Oe(A.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return w.resolve(r?r.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(e,n){let r=Vn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$e.newInvalidDocument(i))}),w.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vn();const o=n.path,a=new A(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||VS(sj(l),r)<=0||(i.has(l.key)||Hd(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return w.resolve(s)}getAllFromCollectionGroup(e,n,r,i){V()}Cs(e,n){return w.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bfe(this)}getSize(e){return w.resolve(this.size)}}class bfe extends _fe{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),w.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class Sfe{constructor(e){this.persistence=e,this.xs=new Yi(n=>Go(n),$d),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.Ns=0,this.ks=new v0,this.targetCount=0,this.Ms=ea.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),w.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new ea(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,w.resolve()}updateTargetData(e,n){return this.Fn(n),w.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),w.waitFor(s).next(()=>i)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return w.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),w.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),w.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return w.resolve(r)}containsKey(e,n){return w.resolve(this.ks.containsKey(n))}}class w0{constructor(e,n){this.$s={},this.overlays={},this.Os=new Jn(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Sfe(this),this.indexManager=new hfe,this.remoteDocumentCache=new Dfe(r=>this.referenceDelegate.Ls(r)),this.serializer=new DH(n),this.qs=new Efe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Tfe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new Cfe(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);const i=new Afe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return w.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class Afe extends Qde{constructor(e){super(),this.currentSequenceNumber=e}}class Hm{constructor(e){this.persistence=e,this.Qs=new v0,this.js=null}static zs(e){return new Hm(e)}get Ws(){if(this.js)return this.js;throw V()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),w.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),w.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),w.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Ws,r=>{const i=A.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,$.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return w.or([()=>w.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class C0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=oe(),i=oe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new C0(e,n.fromCache,r,i)}}class ZH{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(Vj(n))return w.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Rm(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=oe(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ji(n,a);return this.zi(n,c,o,u.readTime)?this.Ki(e,Rm(n,null,"F")):this.Wi(e,c,n,u)}))})))}Gi(e,n,r,i){return Vj(n)||i.isEqual($.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(OS()<=Y.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),XS(n)),this.Wi(e,o,n,function ij(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=$.fromTimestamp(1e9===r?new Ze(n+1,0):new Ze(n,r));return new Xn(i,A.empty(),e)}(i,-1)))})}ji(e,n){let r=new Be($j(e));return n.forEach((i,s)=>{Hd(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return OS()<=Y.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",XS(n)),this.Ui.getDocumentsMatchingQuery(e,n,Xn.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Rfe{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Oe(J),this.Yi=new Yi(s=>Go(s),$d),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XH(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function tz(t,e){return D0.apply(this,arguments)}function D0(){return D0=_(function*(t,e){const n=R(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=oe();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),D0.apply(this,arguments)}function nz(t){const e=R(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function Xu(t,e,n){return b0.apply(this,arguments)}function b0(){return b0=_(function*(t,e,n){const r=R(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ss(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),b0.apply(this,arguments)}function qm(t,e,n){const r=R(t);let i=$.min(),s=oe();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const l=R(a),d=l.Yi.get(c);return void 0!==d?w.resolve(l.Ji.get(d)):l.Bs.getTargetData(u,c)}(r,o,Cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:$.min(),n?s:oe())).next(a=>(function oz(t,e,n){let r=t.Xi.get(e)||$.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}(r,function Bj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,ir:s})))}class N0{constructor(){this.activeTargetIds=function JS(){return Phe}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cz{constructor(){this.Hr=new N0,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new N0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Lfe{Yr(e){}shutdown(){}}class lz{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Qm=null;function k0(){return null===Qm?Qm=268435456+Math.round(2147483648*Math.random()):Qm++,"0x"+Qm.toString(16)}const Ffe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Vfe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const pn="WebChannelConnection";class Ufe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=k0(),a=this.To(e,n);D("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,i,s),this.Ao(e,a,u,r).then(c=>(D("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Rr("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ou,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){return`${this.mo}/v1/${n}:${Ffe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=k0();return new Promise((o,a)=>{const u=new Fde;u.setWithCredentials(!0),u.listenOnce(Pde.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case PS.NO_ERROR:const l=u.getResponseJson();D(pn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case PS.TIMEOUT:D(pn,`RPC '${e}' ${s} timed out`),a(new C(I.DEADLINE_EXCEEDED,"Request time out"));break;case PS.HTTP_ERROR:const d=u.getStatus();if(D(pn,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(I).indexOf(m)>=0?m:I.UNKNOWN}(f.status);a(new C(p,f.message))}else a(new C(I.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new C(I.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{D(pn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);D(pn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Ro(e,n,r){const i=k0(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mde(),a=kde(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new Lde({})),this.Eo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");D(pn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new Vfe({ro:m=>{f?D(pn,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(D(pn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),D(pn,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},oo:()=>d.close()}),g=(m,v,y)=>{m.listen(v,E=>{try{y(E)}catch(M){setTimeout(()=>{throw M},0)}})};return g(d,mm.EventType.OPEN,()=>{f||D(pn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,mm.EventType.CLOSE,()=>{f||(f=!0,D(pn,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,mm.EventType.ERROR,m=>{f||(f=!0,Rr(pn,`RPC '${e}' stream ${i} transport errored:`,m),p.wo(new C(I.UNAVAILABLE,"The operation could not be completed")))}),g(d,mm.EventType.MESSAGE,m=>{var v;if(!f){const y=m.data[0];B(!!y);const M=y.error||(null===(v=y[0])||void 0===v?void 0:v.error);if(M){D(pn,`RPC '${e}' stream ${i} received error:`,M);const O=M.status;let W=function(Or){const Xs=It[Or];if(void 0!==Xs)return sH(Xs)}(O),ot=M.message;void 0===W&&(W=I.INTERNAL,ot="Unknown error status: "+O+" with message "+M.message),f=!0,p.wo(new C(W,ot)),d.close()}else D(pn,`RPC '${e}' stream ${i} received:`,y),p._o(y)}}),g(a,Ode.STAT_EVENT,m=>{m.stat===J$.PROXY?D(pn,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===J$.NOPROXY&&D(pn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Ym(){return typeof document<"u"?document:null}function uh(t){return new Khe(t,!0)}class P0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Bfe{constructor(e,n,r,i,s,o,a,u){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new P0(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return _(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return _(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return _(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===I.RESOURCE_EXHAUSTED?(ct(n.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===I.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new C(I.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(_(function*(){e.state=0,e.start()}))}tu(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $fe extends Bfe{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function Xhe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:V(),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(B(void 0===c||"string"==typeof c),Rt.fromBase64String(c||"")):(B(void 0===c||c instanceof Uint8Array),Rt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=void 0===u.code?I.UNKNOWN:sH(u.code);return new C(c,u.message||"")}(o);n=new lH(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=hi(t,r.document.name),s=dt(r.document.updateTime),o=r.document.createTime?dt(r.document.createTime):$.min(),a=new en({mapValue:{fields:r.document.fields}}),u=$e.newFoundDocument(i,s,o,a);n=new Pm(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=hi(t,r.document),s=r.readTime?dt(r.readTime):$.min(),o=$e.newNoDocument(i,s);n=new Pm([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=hi(t,r.document);n=new Pm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return V();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new jhe(i,s);n=new cH(r.targetId,o)}}var u;return n}(this.serializer,e),r=function(i){if(!("targetChange"in i))return $.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?$.min():s.readTime?dt(s.readTime):$.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Jd(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Sm(a)?{documents:wH(i,a)}:{query:d0(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=function pH(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}(i,s.resumeToken);const u=a0(i,s.expectedCount);null!==u&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo($.min())>0){o.readTime=function qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(i,s.snapshotVersion.toTimestamp());const u=a0(i,s.expectedCount);null!==u&&(o.expectedCount=u)}return o}(this.serializer,e);const r=function Zhe(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Jd(this.serializer),n.removeTarget=e,this.Wo(n)}}class Hfe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new C(I.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new C(I.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(I.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Gfe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ct(n),this.mu=!1):D("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class qfe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(_(function*(){var u;Vs(o)&&(D("RemoteStore","Restarting streams for network reachability change."),yield(u=_(function*(c){const l=R(c);l.vu.add(4),yield Ju(l),l.bu.set("Unknown"),l.vu.delete(4),yield ch(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.bu=new Gfe(r,i)}}function ch(t){return L0.apply(this,arguments)}function L0(){return L0=_(function*(t){if(Vs(t))for(const e of t.Ru)yield e(!0)}),L0.apply(this,arguments)}function Ju(t){return F0.apply(this,arguments)}function F0(){return F0=_(function*(t){for(const e of t.Ru)yield e(!1)}),F0.apply(this,arguments)}function Xm(t,e){const n=R(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),B0(n)?U0(n):ec(n).Ko()&&V0(n,e))}function lh(t,e){const n=R(t),r=ec(n);n.Au.delete(e),r.Ko()&&hz(n,e),0===n.Au.size&&(r.Ko()?r.jo():Vs(n)&&n.bu.set("Unknown"))}function V0(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ec(t).su(e)}function hz(t,e){t.Vu.qt(e),ec(t).iu(e)}function U0(t){t.Vu=new zhe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),ec(t).start(),t.bu.gu()}function B0(t){return Vs(t)&&!ec(t).Uo()&&t.Au.size>0}function Vs(t){return 0===R(t).vu.size}function fz(t){t.Vu=void 0}function Wfe(t){return $0.apply(this,arguments)}function $0(){return $0=_(function*(t){t.Au.forEach((e,n)=>{V0(t,e)})}),$0.apply(this,arguments)}function Kfe(t,e){return j0.apply(this,arguments)}function j0(){return j0=_(function*(t,e){fz(t),B0(t)?(t.bu.Iu(e),U0(t)):t.bu.set("Unknown")}),j0.apply(this,arguments)}function Qfe(t,e,n){return H0.apply(this,arguments)}function H0(){return H0=_(function*(t,e,n){if(t.bu.set("Online"),e instanceof lH&&2===e.state&&e.cause)try{yield(r=_(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jm(t,r)}else if(e instanceof Pm?t.Vu.Ht(e):e instanceof cH?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual($.min()))try{const r=yield nz(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(u);c&&i.Au.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,u)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(Rt.EMPTY_BYTE_STRING,c.snapshotVersion)),hz(i,a);const l=new Ji(c.target,a,u,c.sequenceNumber);V0(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield Jm(t,r)}var r}),H0.apply(this,arguments)}function Jm(t,e,n){return z0.apply(this,arguments)}function z0(){return z0=_(function*(t,e,n){if(!Ss(e))throw e;t.vu.add(1),yield Ju(t),t.bu.set("Offline"),n||(n=()=>nz(t.localStore)),t.asyncQueue.enqueueRetryable(_(function*(){D("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield ch(t)}))}),z0.apply(this,arguments)}function yz(t,e){return Y0.apply(this,arguments)}function Y0(){return Y0=_(function*(t,e){const n=R(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=Vs(n);n.vu.add(3),yield Ju(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield ch(n)}),Y0.apply(this,arguments)}function J0(){return J0=_(function*(t,e){const n=R(t);e?(n.vu.delete(2),yield ch(n)):e||(n.vu.add(2),yield Ju(n),n.bu.set("Unknown"))}),J0.apply(this,arguments)}function ec(t){return t.Su||(t.Su=function(e,n,r){const i=R(e);return i.fu(),new $fe(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:Wfe.bind(null,t),ao:Kfe.bind(null,t),nu:Qfe.bind(null,t)}),t.Ru.push(function(){var e=_(function*(n){n?(t.Su.Qo(),B0(t)?U0(t):t.bu.set("Unknown")):(yield t.Su.stop(),fz(t))});return function(n){return e.apply(this,arguments)}}())),t.Su}class Z0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Z0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new C(I.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tc(t,e){if(ct("AsyncQueue",`${e}: ${t}`),Ss(t))return new C(I.UNAVAILABLE,`${e}: ${t}`);throw t}class nc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=zd(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new nc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new nc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class _z{constructor(){this.Cu=new Oe(A.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(n):1===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):V():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class rc{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new rc(e,n,nc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class npe{constructor(){this.Nu=void 0,this.listeners=[]}}class rpe{constructor(){this.queries=new Yi(e=>Uj(e),jd),this.onlineState="Unknown",this.ku=new Set}}function tA(){return tA=_(function*(t,e){const n=R(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new npe),i)try{s.Nu=yield n.onListen(r)}catch(o){const a=tc(o,`Initialization of query '${XS(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&iA(n)}),tA.apply(this,arguments)}function rA(){return rA=_(function*(t,e){const n=R(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),rA.apply(this,arguments)}function ipe(t,e){const n=R(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&iA(n)}function spe(t,e,n){const r=R(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function iA(t){t.ku.forEach(e=>{e.next()})}class sA{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new rc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Iz{constructor(e){this.key=e}}class Ez{constructor(e){this.key=e}}class Tz{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=oe(),this.mutatedKeys=oe(),this.tc=$j(e),this.ec=new nc(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new _z,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=Hd(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.rc(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.tc(f,u)>0||c&&this.tc(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,l)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return f(d)-f(h)}(c.type,l.type)||this.tc(c.doc,l.doc)),this.oc(r);const o=n?this.uc():[],a=0===this.Zu.size&&this.current?1:0,u=a!==this.Xu;return this.Xu=a,0!==s.length||u?{snapshot:new rc(this.query,e.ec,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new _z,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=oe(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new Ez(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new Iz(r))}),n}hc(e){this.Yu=e.ir,this.Zu=oe();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return rc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class upe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cpe{constructor(e){this.key=e,this.fc=!1}}class lpe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Yi(a=>Uj(a),jd),this._c=new Map,this.mc=new Set,this.gc=new Oe(A.comparator),this.yc=new Map,this.Ic=new v0,this.Tc={},this.Ec=new Map,this.Ac=ea.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function dpe(t,e){return oA.apply(this,arguments)}function oA(){return oA=_(function*(t,e){const n=function xA(t){const e=R(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wpe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ppe.bind(null,e),e.dc.nu=ipe.bind(null,e.eventManager),e.dc.Pc=spe.bind(null,e.eventManager),e}(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield function Yu(t,e){const n=R(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,w.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new Ji(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}(n.localStore,Cn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function aA(t,e,n,r,i){return uA.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&Xm(n.remoteStore,o)}return i}),oA.apply(this,arguments)}function uA(){return uA=_(function*(t,e,n,r,i){t.Rc=(d,h,f)=>{return(p=_(function*(g,m,v,y){let E=m.view.sc(v);E.zi&&(E=yield qm(g.localStore,m.query,!1).then(({documents:W})=>m.view.sc(W,E)));const M=y&&y.targetChanges.get(m.targetId),O=m.view.applyChanges(E,g.isPrimaryClient,M);return _A(g,m.targetId,O.cc),O.snapshot}),function(g,m,v,y){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield qm(t.localStore,e,!0),o=new Tz(e,s.ir),a=o.sc(s.documents),u=Yd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);_A(t,n,c.cc);const l=new upe(e,n,o);return t.wc.set(e,l),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}),uA.apply(this,arguments)}function hpe(t,e){return cA.apply(this,arguments)}function cA(){return cA=_(function*(t,e){const n=R(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!jd(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xu(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),lh(n.remoteStore,r.targetId),ic(n,r.targetId)}).catch(bs))):(ic(n,r.targetId),yield Xu(n.localStore,r.targetId,!0))}),cA.apply(this,arguments)}function Cz(t,e){return dA.apply(this,arguments)}function dA(){return dA=_(function*(t,e){const n=R(t);try{const r=yield function Mfe(t,e){const n=R(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Rt.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),g=f,m=l,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(n.Bs.updateTargetData(s,f))});let u=Vn(),c=oe();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function rz(t,e,n){let r=oe(),i=oe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vn();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual($.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(l=>{u=l.nr,c=l.sr})),!r.isEqual($.min())){const l=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ji=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(B(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?B(o.fc):i.removedDocuments.size>0&&(B(o.fc),o.fc=!1))}),yield Zi(n,r,e)}catch(r){yield bs(r)}}),dA.apply(this,arguments)}function Dz(t,e,n){const r=R(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=R(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.Mu(o)&&(u=!0)}),u&&iA(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ppe(t,e,n){return hA.apply(this,arguments)}function hA(){return hA=_(function*(t,e,n){const r=R(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new Oe(A.comparator);o=o.insert(s,$e.newNoDocument(s,$.min()));const a=oe().add(s),u=new Qd($.min(),new Map,new Oe(J),o,a);yield Cz(r,u),r.gc=r.gc.remove(s),r.yc.delete(e),vA(r)}else yield Xu(r.localStore,e,!1).then(()=>ic(r,e,n)).catch(bs)}),hA.apply(this,arguments)}function ic(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||bz(t,r)})}function bz(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(lh(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),vA(t))}function _A(t,e,n){for(const r of n)r instanceof Iz?(t.Ic.addReference(r.key,e),_pe(t,r)):r instanceof Ez?(D("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||bz(t,r.key)):V()}function _pe(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(D("SyncEngine","New document in limbo: "+n),t.mc.add(r),vA(t))}function vA(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new A(me.fromString(e)),r=t.Ac.next();t.yc.set(r,new cpe(n)),t.gc=t.gc.insert(n,r),Xm(t.remoteStore,new Ji(Cn($u(n.path)),r,"TargetPurposeLimboResolution",Jn.ct))}}function Zi(t,e,n){return wA.apply(this,arguments)}function wA(){return wA=_(function*(t,e,n){const r=R(t),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=C0.Li(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=_(function*(u,c){const l=R(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(c,h=>w.forEach(h.Fi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.Bi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ss(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=l.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.Ji=l.Ji.insert(h,g)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),wA.apply(this,arguments)}function vpe(t,e){return IA.apply(this,arguments)}function IA(){return IA=_(function*(t,e){const n=R(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=yield tz(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(o=>{o.forEach(a=>{a.reject(new C(I.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zi(n,r.er)}var i}),IA.apply(this,arguments)}function wpe(t,e){const n=R(t),r=n.yc.get(e);if(r&&r.fc)return oe().add(r.key);{let i=oe();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}class Zm{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return _(function*(){n.serializer=uh(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function ez(t,e,n,r){return new Rfe(t,e,n,r)}(this.persistence,new ZH,e.initialUser,this.serializer)}createPersistence(e){return new w0(Hm.zs,this.serializer)}createSharedClientState(e){return new cz}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sc{initialize(e,n){var r=this;return _(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Dz(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=vpe.bind(null,r.syncEngine),yield function X0(t,e){return J0.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rpe}createDatastore(e){const n=uh(e.databaseInfo.databaseId),r=new Ufe(e.databaseInfo);return new Hfe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>Dz(this.syncEngine,a,0),o=lz.D()?new lz:new Lfe,new qfe(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new lpe(r,i,s,o,a,u);return c&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(){var e=_(function*(n){const r=R(n);D("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Ju(r),r.Pu.shutdown(),r.bu.set("Unknown")});return function(n){return e.apply(this,arguments)}}()(this.remoteStore)}}class ey{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class kpe{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=nj.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=_(function*(a){D("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(D("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(I.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=tc(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function ty(t,e){return NA.apply(this,arguments)}function NA(){return NA=_(function*(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=_(function*(s){r.isEqual(s)||(yield tz(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),NA.apply(this,arguments)}function MA(t,e){return kA.apply(this,arguments)}function kA(){return kA=_(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function PA(t){return OA.apply(this,arguments)}(t);D("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>yz(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>yz(e.remoteStore,s)),t._onlineComponents=e}),kA.apply(this,arguments)}function OA(){return OA=_(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ty(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function Mz(t){return"FirebaseError"===t.name?t.code===I.FAILED_PRECONDITION||t.code===I.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Rr("Error using user provided cache. Falling back to memory cache: "+n),yield ty(t,new Zm)}}else D("FirestoreClient","Using default OfflineComponentProvider"),yield ty(t,new Zm);return t._offlineComponents}),OA.apply(this,arguments)}function LA(){return LA=_(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),yield MA(t,t._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),yield MA(t,new sc))),t._onlineComponents}),LA.apply(this,arguments)}function oc(t){return VA.apply(this,arguments)}function VA(){return VA=_(function*(t){const e=yield function ny(t){return LA.apply(this,arguments)}(t),n=e.eventManager;return n.onListen=dpe.bind(null,e.syncEngine),n.onUnlisten=hpe.bind(null,e.syncEngine),n}),VA.apply(this,arguments)}function Vz(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Uz=new Map;function $z(t){if(A.isDocumentKey(t))throw new C(I.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new C(I.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=function iy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":V()}(t);throw new C(I.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Hz{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new C(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new C(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function jpe(t,e,n,r){if(!0===e&&!0===r)throw new C(I.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Vz(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new C(I.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new C(I.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new C(I.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hz({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new C(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new C(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hz(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Ude;switch(n.type){case"firstParty":return new Hde(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new C(I.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Uz.get(e);n&&(D("ComponentProvider","Removing Datastore"),Uz.delete(e),n.terminate())}(this),Promise.resolve()}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}}class tn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tn(this.firestore,e,this._query)}}class fi extends tn{constructor(e,n,r){super(e,n,$u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new A(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function zpe(t,e,...n){if(t=ti(t),function UA(t,e,n){if(!n)throw new C(I.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}("collection","path",e),t instanceof dh){const r=me.fromString(e,...n);return $z(r),new fi(t,null,r)}{if(!(t instanceof ht||t instanceof fi))throw new C(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return $z(r),new fi(t.firestore,null,r)}}class qpe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new P0(this,"async_queue_retry"),this.Xc=()=>{const n=Ym();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Ym();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Ym();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new xt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return _(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!Ss(n))throw n;D("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ct("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=Z0.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&V()}verifyOperationInProgress(){}sa(){var e=this;return _(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function BA(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class je extends dh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new qpe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gz(this),this._firestoreClient.terminate()}}function Kpe(t,e){const r="string"==typeof t?t:e||"(default)",i=Wl("object"==typeof t?t:pE(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=U2("firestore");s&&function Hpe(t,e,n,r={}){var i;const s=(t=pe(t,dh))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Bt.MOCK_USER;else{a=$2(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new C(I.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Bt(c)}t._authCredentials=new Bde(new ej(a,u))}}(i,...s)}return i}function Gz(t){var e,n,r;const i=t._freezeSettings(),s=(a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new vhe(t._databaseId,a,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Vz(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;t._firestoreClient=new kpe(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(Rt.fromBase64String(e))}catch(n){throw new C(I.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new na(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ac{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new C(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $A{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new C(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new C(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}const nge=new RegExp("[~\\*/\\[\\]]");function ay(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new C(I.INVALID_ARGUMENT,a+t+u)}class GA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rge(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class rge extends GA{data(){return super.data()}}function uy(t,e){return"string"==typeof e?function oy(t,e,n){if(e.search(nge)>=0)throw ay(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ac(...e.split("."))._internalPath}catch{throw ay(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof ac?e._internalPath:e._delegate._internalPath}class sge{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return As(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new $A(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tm(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}convertTimestamp(e){const n=xs(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);B(CH(r));const i=new Ho(r.get(1),r.get(3)),s=new A(r.popFirst(5));return i.isEqual(n)||ct(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lc extends GA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uy("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hy extends lc{data(e={}){return super.data(e)}}class dc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ia(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hy(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new C(I.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new hy(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ia(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new hy(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ia(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:age(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function age(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}class Bs extends sge{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}!function(t,e=!0){Ou=wu,cn(new Kt("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new je(new $de(n.getProvider("auth-internal")),new zde(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new C(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ge(Z$,"3.13.0",t),Ge(Z$,"3.13.0","esm2017")}();var wge={includeMetadataChanges:!1};function QA(t,e){return void 0===e&&(e=wge),new Ke(function(n){var r=function uge(t,...e){var n,r,i;t=ti(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||BA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(BA(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,c,l;if(t instanceof ht)c=pe(t.firestore,je),l=$u(t._key.path),u={next:d=>{e[o]&&e[o](function KA(t,e,n){const r=n.docs.get(e._key),i=new Bs(t);return new lc(t,i,e._key,r,new ia(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=pe(t,tn);c=pe(d.firestore,je),l=d._query;const h=new Bs(c);u={next:f=>{e[o]&&e[o](new dc(c,h,d,f))},error:e[o+1],complete:e[o+2]},function iG(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new C(I.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(d,h,f,p){const g=new ey(p),m=new sA(h,g,f);return d.asyncQueue.enqueueAndForget(_(function*(){return function eA(t,e){return tA.apply(this,arguments)}(yield oc(d),m)})),()=>{g.Dc(),d.asyncQueue.enqueueAndForget(_(function*(){return function nA(t,e){return rA.apply(this,arguments)}(yield oc(d),m)}))}}(function Et(t){return t._firestoreClient||Gz(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(c),l,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Sge(t,e){return void 0===e&&(e={}),function bge(t){return QA(t,{includeMetadataChanges:!0}).pipe(_e(function(e){return e.docs}))}(t).pipe(_e(function(n){return n.map(function(r){return function hG(t,e){void 0===e&&(e={});var n=t.data();return!t.exists()||"object"!=typeof n||null===n||e.idField&&(n[e.idField]=t.id),n}(r,e)})}))}class yh{constructor(e){return e}}const mG="firestore",JA=new F("angularfire2.firestore-instances");function Rge(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new yh(r)}}const Nge={provide:class Age{constructor(){return wg(mG)}},deps:[[new Ot,JA]]},Mge={provide:yh,useFactory:function xge(t,e){const n=vg(mG,t,e);return n&&new yh(n)},deps:[[new Ot,JA],Mo]};let yG=(()=>{class t{constructor(){Ge("angularfire",_g.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({providers:[Mge,Nge]}),t})();function kge(t,...e){return{ngModule:yG,providers:[{provide:JA,useFactory:Rge(t),multi:!0,deps:[Re,sr,gC,mC,[new Ot,Tb],[new Ot,Gb],...e]}]}}const Pge=Xl(Sge,!0),Oge=Xl(zpe,!0),Lge=Xl(Kpe,!0);let ZA=(()=>{class t{constructor(n,r){this._http=n,this.store=r,this.firestore=L(yh),this.compra="Cargando...",this.venta="Cargando...",this.getData()}getData(){this.refreshData(),this.intervale=setInterval(()=>{this.refreshData()},6e4)}refreshData(){let n=Oge(this.firestore,"tipo_cambio");Pge(n).subscribe(r=>{r.forEach(i=>{this.compra="\u20a1"+i.buy,this.venta="\u20a1"+i.sale})})}ngOnDestroy(){clearInterval(this.intervale)}}return t.\u0275fac=function(n){return new(n||t)(U(_F),U(yh))},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_G=(()=>{class t{constructor(){this.date=(new Date).toLocaleTimeString("en-US"),setInterval(()=>{this.date=(new Date).toLocaleTimeString("en-US")},1e3)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=_a({type:t,selectors:[["app-clock"]],decls:2,vars:1,consts:[[1,"time"]],template:function(n,r){1&n&&(ke(0,"span",0),mt(1),He()),2&n&&(qr(1),sw(r.date))},styles:[".time[_ngcontent-%COMP%]{font-weight:700;text-overflow:ellipsis;overflow:hidden;white-space:pre;color:#2f3686;text-align:right;font-size:1.7rem}@media screen and (max-width: 1081px){.time[_ngcontent-%COMP%]{font-size:1.2rem}}"]}),t})();const Fge=[{path:"",component:(()=>{class t{constructor(n,r,i){this.tipoCambio=n,this._renderer2=r,this._document=i,this.cambio="",this.cargo=!1}loadScript(){if(!this.cargo){this.cargo=!0;let n=this._renderer2.createElement("script");n.type="application/javascript",n.text="\n      function Marquee(selector, speed) {\n        const parentSelector = document.querySelector(selector);\n        const clone = parentSelector.innerHTML;\n        const firstElement = parentSelector.children[0];\n        let i = 0;\n        console.log(firstElement);\n        parentSelector.insertAdjacentHTML('beforeend', clone);\n        parentSelector.insertAdjacentHTML('beforeend', clone);\n\n        setInterval(function () {\n          firstElement.style.marginLeft = `-${i}px`;\n          if (i > firstElement.clientWidth) {\n            i = 0;\n          }\n          i = i + speed;\n        }, 0);\n      }\n\n      //after window is completed load\n      //1 class selector for marquee\n      //2 marquee speed 0.2\n      window.addEventListener('load', Marquee('.marquee', 0.6))\n        ",this._renderer2.appendChild(this._document.body,n)}}}return t.\u0275fac=function(n){return new(n||t)(H(ZA),H(nl),H(kn))},t.\u0275cmp=_a({type:t,selectors:[["app-show-static-view"]],decls:28,vars:4,consts:[[1,"de"],["src","assets/AirPak_Casa de Cambio-02 (1).png",1,"ms-3","imagen"],[1,"section","mx-3"],[1,"marquee","animate-charcter",2,"margin-top","0.2rem"],[1,"mx-4"],[1,"mx-5","px-5"],[1,"mx-2"],[1,"ms-5","ps-4","me-4"],[1,"me-3"]],template:function(n,r){1&n&&(ke(0,"div",0),ds(1,"img",1),ke(2,"div",2)(3,"div",3)(4,"div")(5,"span",4),mt(6,"Tipo de cambio"),He(),ke(7,"span",5),mt(8),He(),ke(9,"span",6)(10,"b"),mt(11,"|"),He()(),ke(12,"span",5),mt(13),He(),ke(14,"span",5)(15,"b"),mt(16,"-"),He()(),ke(17,"span",7),mt(18,"Exchange rate"),He(),ke(19,"span",5),mt(20),He(),ke(21,"span",6)(22,"b"),mt(23,"|"),He()(),ke(24,"span",5),mt(25),He()()()(),ke(26,"div",8),ds(27,"app-clock"),He()()),2&n&&(qr(8),Ir("Compra: ",r.tipoCambio.compra,""),qr(5),Ir("Venta: ",r.tipoCambio.venta," "),qr(7),Ir("Buy: ",r.tipoCambio.compra,""),qr(5),Ir("Sale: ",r.tipoCambio.venta," "))},dependencies:[_G],styles:[".de[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#cfcfcf;width:100vw;height:100vh;color:#2f3686}.animate-charcter[_ngcontent-%COMP%]{text-transform:uppercase;background-size:auto auto;background-clip:border-box;background-size:200% auto;color:#2f3686;display:inline-block;font-size:3.5rem}.imagen[_ngcontent-%COMP%]{width:140px}@media screen and (max-width: 1081px){.animate-charcter[_ngcontent-%COMP%]{font-size:2.5rem}.imagen[_ngcontent-%COMP%]{width:125px}}@keyframes _ngcontent-%COMP%_textclip{to{background-position:200% center}}@keyframes _ngcontent-%COMP%_marquee{0%{margin-left:100%;transform:translate(0)}to{margin-left:0;transform:translate(-100%)}}.section[_ngcontent-%COMP%]{overflow:hidden;height:100vh;display:flex;align-items:center}.section[_ngcontent-%COMP%]   .marquee[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_marquee 22s linear infinite;display:inline-block;white-space:nowrap}"]}),t})()},{path:"static",component:(()=>{class t{constructor(n){this.tipoCambio=n}}return t.\u0275fac=function(n){return new(n||t)(H(ZA))},t.\u0275cmp=_a({type:t,selectors:[["app-banner-view"]],decls:28,vars:4,consts:[[1,"de"],["src","assets/AirPak_Casa de Cambio-02 (1).png",1,"ms-3","imagen"],[1,"section","mx-3"],[1,"marquee","animate-charcter",2,"margin-top","0.2rem"],[1,"mx-4"],[1,"mx-5","px-5"],[1,"mx-2"],[1,"ms-5","ps-4","me-4"],[1,"me-3"]],template:function(n,r){1&n&&(ke(0,"div",0),ds(1,"img",1),ke(2,"div",2)(3,"div",3)(4,"div")(5,"span",4),mt(6,"Tipo de cambio"),He(),ke(7,"span",5),mt(8),He(),ke(9,"span",6)(10,"b"),mt(11,"|"),He()(),ke(12,"span",5),mt(13),He(),ke(14,"span",5)(15,"b"),mt(16,"-"),He()(),ke(17,"span",7),mt(18,"Exchange rate"),He(),ke(19,"span",5),mt(20),He(),ke(21,"span",6)(22,"b"),mt(23,"|"),He()(),ke(24,"span",5),mt(25),He()()()(),ke(26,"div",8),ds(27,"app-clock"),He()()),2&n&&(qr(8),Ir("Compra: ",r.tipoCambio.compra,""),qr(5),Ir("Venta: ",r.tipoCambio.venta," "),qr(7),Ir("Buy: ",r.tipoCambio.compra,""),qr(5),Ir("Sale: ",r.tipoCambio.venta," "))},dependencies:[_G],styles:[".de[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100vw;height:100vh;color:#2f3686}.animate-charcter[_ngcontent-%COMP%]{text-transform:uppercase;background-size:auto auto;background-clip:border-box;background-size:200% auto;color:#2f3686;display:inline-block;font-size:3.5rem}.imagen[_ngcontent-%COMP%]{width:140px}@media screen and (max-width: 1081px){.animate-charcter[_ngcontent-%COMP%]{font-size:2.5rem}.imagen[_ngcontent-%COMP%]{width:125px}}@keyframes _ngcontent-%COMP%_textclip{to{background-position:200% center}}@keyframes _ngcontent-%COMP%_marquee{0%{margin-left:100%;transform:translate(0)}to{margin-left:0;transform:translate(-100%)}}.section[_ngcontent-%COMP%]{overflow:hidden;height:100vh;display:flex;align-items:center}.section[_ngcontent-%COMP%]   .marquee[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_marquee 22s linear infinite;display:inline-block;white-space:nowrap}"]}),t})()}];let Vge=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({imports:[k2.forRoot(Fge),k2]}),t})(),Uge=(()=>{class t{constructor(){this.title="my-app"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=_a({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&ds(0,"router-outlet")},dependencies:[jI]}),t})();const Bge_firebase={projectId:"pruebas-664d0",appId:"1:657289792450:web:a3bd4b7dbf52c5f170e45b",databaseURL:"https://pruebas-664d0-default-rtdb.firebaseio.com",storageBucket:"pruebas-664d0.appspot.com",apiKey:"AIzaSyD6LlS67KEORBvH3anoT1kzTdwFinrpqSc",authDomain:"pruebas-664d0.firebaseapp.com",messagingSenderId:"657289792450",measurementId:"G-WL671X5KJX"},vG="@firebase/database";let ex="";class jge{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Wt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:ql(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Hge{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return Fi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const IG=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jge(e)}}catch{}return new Hge},sa=IG("localStorage"),tx=IG("sessionStorage"),hc=new To("@firebase/database"),EG=function(){let t=1;return function(){return t++}}(),TG=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,x(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Vne;n.update(e);const r=n.digest();return ng.encodeByteArray(r)},_h=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=_h.apply(null,r):e+="object"==typeof r?Wt(r):r,e+=" "}return e};let oa=null,CG=!0;const Ht=function(...t){if(!0===CG&&(CG=!1,null===oa&&!0===tx.get("logging_enabled")&&function(t,e){x(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(hc.logLevel=Y.VERBOSE,oa=hc.log.bind(hc),e&&tx.set("logging_enabled",!0)):"function"==typeof t?oa=t:(oa=null,tx.remove("logging_enabled"))}(!0)),oa){const e=_h.apply(null,t);oa(e)}},vh=function(t){return function(...e){Ht(t,...e)}},nx=function(...t){const e="FIREBASE INTERNAL ERROR: "+_h(...t);hc.error(e)},pi=function(...t){const e=`FIREBASE FATAL ERROR: ${_h(...t)}`;throw hc.error(e),new Error(e)},gn=function(...t){const e="FIREBASE WARNING: "+_h(...t);hc.warn(e)},py=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},$s="[MIN_NAME]",es="[MAX_NAME]",aa=function(t,e){if(t===e)return 0;if(t===$s||e===es)return-1;if(e===$s||t===es)return 1;{const n=AG(t),r=AG(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},qge=function(t,e){return t===e?0:t<e?-1:1},wh=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Wt(e))},rx=function(t){if("object"!=typeof t||null===t)return Wt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=Wt(e[r]),n+=":",n+=rx(t[e[r]]);return n+="}",n},bG=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function zt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const SG=function(t){x(!py(t),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const c=[];for(u=52;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const l=c.join("");let d="";for(u=0;u<64;u+=8){let h=parseInt(l.substr(u,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Yge=new RegExp("^-?(0*)\\d{1,10}$"),AG=function(t){if(Yge.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},fc=function(t){try{t()}catch(e){setTimeout(()=>{throw gn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ih=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class eme{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tme{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(Ht("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gn(e)}}let Eh=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const kG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LG="websocket",FG="long_polling";class sx{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sa.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function VG(t,e,n){let r;if(x("string"==typeof e,"typeof type must == string"),x("object"==typeof n,"typeof params must == object"),e===LG)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==FG)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function nme(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return zt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class rme{constructor(){this.counters_={}}incrementCounter(e,n=1){Fi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Cne(this.counters_)}}const ox={},ax={};function ux(t){const e=t.toString();return ox[e]||(ox[e]=new rme),ox[e]}class sme{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&fc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class js{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vh(e),this.stats_=ux(n),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),VG(n,FG,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new sme(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cx((...s)=>{const[o,a,u,c,l]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&kG.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){js.forceAllow_=!0}static forceDisallow(){js.forceDisallow_=!0}static isAvailable(){return!(!js.forceAllow_&&(js.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Wt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=F2(n),i=bG(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Wt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class cx{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=EG(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=cx.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ht("frame writing exception"),a.stack&&Ht(a.stack),Ht(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ht("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ht("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let my=null;typeof MozWebSocket<"u"?my=MozWebSocket:typeof WebSocket<"u"&&(my=WebSocket);let pc=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vh(this.connId),this.stats_=ux(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&kG.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),VG(n,LG,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sa.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new my(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==my&&!t.forceDisallow_}static previouslyFailed(){return sa.isInMemoryStorage||!0===sa.get("previous_websocket_failure")}markConnectionHealthy(){sa.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=ql(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(x(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Wt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=bG(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),GG=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[js,pc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=pc&&pc.isAvailable();let i=r&&!pc.previouslyFailed();if(n.webSocketOnly&&(r||gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[pc];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class JG{constructor(e,n,r,i,s,o,a,u,c,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vh("c:"+this.id+":"),this.transportManager_=new GG(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ih(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=wh("t",e),r=wh("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=wh("t",e),r=wh("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=wh("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?nx("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nx("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ih(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ih(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ZG{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class e4{constructor(e){this.allowedEvents_=e,this.listeners_={},x(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){x(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class yy extends e4{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ZI()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yy}getInitialEvent(e){return x("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ce{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function we(){return new Ce("")}function ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Hs(t){return t.pieces_.length-t.pieceNum_}function Ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ce(t.pieces_,e)}function dx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Th(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function r4(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ce(e,0)}function We(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ce)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ce(n,0)}function ce(t){return t.pieceNum_>=t.pieces_.length}function Dn(t,e){const n=ue(t),r=ue(e);if(null===n)return e;if(n===r)return Dn(Ne(t),Ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function hx(t,e){if(Hs(t)!==Hs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function hr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Hs(t)>Hs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Ame{constructor(e,n){this.errorPrefix_=n,this.parts_=Th(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=cg(this.parts_[r]);i4(this)}}function i4(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ua(t))}function ua(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class fx extends e4{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new fx}getInitialEvent(e){return x("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ch=1e3;let vy,ca=(()=>{class t extends ZG{constructor(n,r,i,s,o,a,u,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=vh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ch,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fx.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&yy.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Wt(o)),x(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new _u,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),x(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,u=>{const c=u.d,l=u.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),"ok"!==l&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&Fi(n,"w")){const i=vu(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=og(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=og(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),x(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Wt(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):nx("Unrecognized action received from server: "+Wt(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){x(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ch,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ch,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ch),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return _(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let u=!1,c=null;const l=function(){c?c.close():(u=!0,s())};n.realtime_={close:l,sendRequest:function(f){x(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);u?Ht("getToken() completed but was canceled"):(Ht("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,c=new JG(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,g=>{gn(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),u||(n.repoInfo_.nodeAdmin&&gn(f),l())}}})()}interrupt(n){Ht("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ht("Resuming connection for reason: "+n),delete this.interruptReasons_[n],H2(this.interruptReasons_)&&(this.reconnectDelay_=Ch,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>rx(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new Ce(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Ht("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ht("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+ex.replace(/\./g,"-")]=1,ZI()?n["framework.cordova"]=1:j2()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=yy.getInstance().currentlyOnline();return H2(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class le{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new le(e,n)}}class _y{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new le($s,e),i=new le($s,n);return 0!==this.compare(r,i)}minPost(){return le.MIN}}class a4 extends _y{static get __EMPTY_NODE(){return vy}static set __EMPTY_NODE(e){vy=e}compare(e,n){return aa(e.name,n.name)}isDefinedOn(e){throw yu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return le.MIN}maxPost(){return new le(es,vy)}makePost(e,n){return x("string"==typeof e,"KeyIndex indexValue must always be a string."),new le(e,vy)}toString(){return".key"}}const gi=new a4;class wy{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let gx,Mr=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Un.EMPTY_NODE,this.right=o??Un.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Un.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Un.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Un{constructor(e,n=Un.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Un(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mr.BLACK,null,null))}remove(e){return new Un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new wy(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new wy(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new wy(this.root_,null,this.comparator_,!0,e)}}function Lme(t,e){return aa(t.name,e.name)}function px(t,e){return aa(t,e)}Un.EMPTY_NODE=new class Ome{copy(e,n,r,i,s){return this}insert(e,n,r){return new Mr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const u4=function(t){return"number"==typeof t?"number:"+SG(t):"string:"+t},c4=function(t){if(t.isLeafNode()){const e=t.val();x("string"==typeof e||"number"==typeof e||"object"==typeof e&&Fi(e,".sv"),"Priority must be a string or number.")}else x(t===gx||t.isEmpty(),"priority of unexpected type.");x(t===gx||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let l4,d4,h4,gc=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,x(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),c4(this.priorityNode_)}static set __childrenNodeConstructor(n){l4=n}static get __childrenNodeConstructor(){return l4}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ce(n)?this:".priority"===ue(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=ue(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(x(".priority"!==i||1===Hs(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ne(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+u4(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?SG(this.value_):this.value_,this.lazyHash_=TG(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(x(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return x(s>=0,"Unknown leaf type: "+r),x(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Le=new class Bme extends _y{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?aa(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return le.MIN}maxPost(){return new le(es,new gc("[PRIORITY-POST]",h4))}makePost(e,n){const r=d4(e);return new le(n,new gc("[PRIORITY-POST]",r))}toString(){return".priority"}},$me=Math.log(2);class jme{constructor(e){this.count=parseInt(Math.log(e+1)/$me,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Iy=function(t,e,n,r){t.sort(e);const i=function(u,c){const l=c-u;let d,h;if(0===l)return null;if(1===l)return d=t[u],h=n?n(d):d,new Mr(h,d.node,Mr.BLACK,null,null);{const f=parseInt(l/2,10)+u,p=i(u,f),g=i(f+1,c);return d=t[f],h=n?n(d):d,new Mr(h,d.node,Mr.BLACK,p,g)}},a=function(u){let c=null,l=null,d=t.length;const h=function(p,g){const m=d-p,v=d;d-=p;const y=i(m+1,v),E=t[m],M=n?n(E):E;f(new Mr(M,E.node,g,null,y))},f=function(p){c?(c.left=p,c=p):(l=p,c=p)};for(let p=0;p<u.count;++p){const g=u.nextBitIsOne(),m=Math.pow(2,u.count-(p+1));g?h(m,Mr.BLACK):(h(m,Mr.BLACK),h(m,Mr.RED))}return l}(new jme(t.length));return new Un(r||e,a)};let mx;const mc={};class ts{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return x(mc&&Le,"ChildrenNode.ts has not been loaded"),mx=mx||new ts({".priority":mc},{".priority":Le}),mx}get(e){const n=vu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Un?n:null}hasIndex(e){return Fi(this.indexSet_,e.toString())}addIndex(e,n){x(e!==gi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(le.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Iy(r,e.getCompare()):mc;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const l=Object.assign({},this.indexes_);return l[u]=a,new ts(l,c)}addToIndexes(e,n){const r=ag(this.indexes_,(i,s)=>{const o=vu(this.indexSet_,s);if(x(o,"Missing index implementation for "+s),i===mc){if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(le.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Iy(a,o.getCompare())}return mc}{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new le(e.name,a))),u.insert(e,e.node)}});return new ts(r,this.indexSet_)}removeFromIndexes(e,n){const r=ag(this.indexes_,i=>{if(i===mc)return i;{const s=n.get(e.name);return s?i.remove(new le(e.name,s)):i}});return new ts(r,this.indexSet_)}}let Dh,ie=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&c4(this.priorityNode_),this.children_.isEmpty()&&x(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dh||(Dh=new t(new Un(px),null,ts.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dh}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Dh:r}}getChild(n){const r=ue(n);return null===r?this:this.getImmediateChild(r).getChild(Ne(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(x(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new le(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Dh:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=ue(n);if(null===i)return r;{x(".priority"!==ue(n)||1===Hs(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Ne(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Le,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+u4(this.getPriority().val())+":"),this.forEachChild(Le,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":TG(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new le(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new le(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new le(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,le.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,le.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===bh?-1:0}withIndex(n){if(n===gi||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===gi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Le),s=r.getIterator(Le);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===gi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const bh=new class Hme extends ie{constructor(){super(new Un(px),ie.EMPTY_NODE,ts.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ie.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(le,{MIN:{value:new le($s,ie.EMPTY_NODE)},MAX:{value:new le(es,bh)}}),a4.__EMPTY_NODE=ie.EMPTY_NODE,gc.__childrenNodeConstructor=ie,function Fme(t){gx=t}(bh),function Ume(t){h4=t}(bh);const zme=!0;function et(t,e=null){if(null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),x(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new gc(t,et(e));if(t instanceof Array||!zme){let n=ie.EMPTY_NODE;return zt(t,(r,i)=>{if(Fi(t,r)&&"."!==r.substring(0,1)){const s=et(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(et(e))}{const n=[];let r=!1;if(zt(t,(o,a)=>{if("."!==o.substring(0,1)){const u=et(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new le(o,u)))}}),0===n.length)return ie.EMPTY_NODE;const s=Iy(n,Lme,o=>o.name,px);if(r){const o=Iy(n,Le.getCompare());return new ie(s,et(e),new ts({".priority":o},{".priority":Le}))}return new ie(s,et(e),ts.Default)}}!function Vme(t){d4=t}(et);class yx extends _y{constructor(e){super(),this.indexPath_=e,x(!ce(e)&&".priority"!==ue(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?aa(e.name,n.name):s}makePost(e,n){const r=et(e),i=ie.EMPTY_NODE.updateChild(this.indexPath_,r);return new le(n,i)}maxPost(){const e=ie.EMPTY_NODE.updateChild(this.indexPath_,bh);return new le(es,e)}toString(){return Th(this.indexPath_,0).join("/")}}const _x=new class Gme extends _y{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?aa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return le.MIN}maxPost(){return le.MAX}makePost(e,n){const r=et(e);return new le(n,r)}toString(){return".value"}};function Ah(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class wx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Le}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return x(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return x(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$s}hasEnd(){return this.endSet_}getIndexEndValue(){return x(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return x(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:es}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return x(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Le}copy(){const e=new wx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function p4(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Le?n="$priority":t.index_===_x?n="$value":t.index_===gi?n="$key":(x(t.index_ instanceof yx,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Wt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Wt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Wt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Wt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Wt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function g4(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Le&&(e.i=t.index_.toString()),e}class Ty extends ZG{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=vh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(x(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ty.getListenId_(e,r),a={};this.listens_[o]=a;const u=p4(e._queryParams);this.restRequest_(s+".json",u,(c,l)=>{let d=l;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),vu(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,n){const r=Ty.getListenId_(e,n);delete this.listens_[r]}get(e){const n=p4(e._queryParams),r=e._path.toString(),i=new _u;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rE(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=ql(a.responseText)}catch{gn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&gn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Zme{constructor(){this.rootNode_=ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function Cy(){return{value:null,children:new Map}}function _c(t,e,n){if(ce(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=ue(e);t.children.has(r)||t.children.set(r,Cy()),_c(t.children.get(r),e=Ne(e),n)}}function Cx(t,e,n){null!==t.value?n(e,t.value):function eye(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{Cx(i,new Ce(e.toString()+"/"+r),n)})}class tye{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&zt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class iye{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new tye(e);const r=1e4+2e4*Math.random();Ih(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;zt(e,(i,s)=>{s>0&&Fi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ih(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Tt=(()=>((Tt=Tt||{})[Tt.OVERWRITE=0]="OVERWRITE",Tt[Tt.MERGE=1]="MERGE",Tt[Tt.ACK_USER_WRITE=2]="ACK_USER_WRITE",Tt[Tt.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Tt))();function Sx(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Dy{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Tt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ce(this.path)){if(null!=this.affectedTree.value)return x(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ce(e));return new Dy(we(),n,this.revert)}}return x(ue(this.path)===e,"operationForChild called for unrelated child."),new Dy(Ne(this.path),this.affectedTree,this.revert)}}class la{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Tt.OVERWRITE}operationForChild(e){return ce(this.path)?new la(this.source,we(),this.snap.getImmediateChild(e)):new la(this.source,Ne(this.path),this.snap)}}class vc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Tt.MERGE}operationForChild(e){if(ce(this.path)){const n=this.children.subtree(new Ce(e));return n.isEmpty()?null:n.value?new la(this.source,we(),n.value):new vc(this.source,we(),n)}return x(ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vc(this.source,Ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class zs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ce(e))return this.isFullyInitialized()&&!this.filtered_;const n=ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Nh(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>function uye(t,e,n){if(null==e.childName||null==n.childName)throw yu("Should only compare child_ events.");const r=new le(e.childName,e.snapshotNode),i=new le(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,u)),o.forEach(a=>{const u=function aye(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function by(t,e){return{eventCache:t,serverCache:e}}function Mh(t,e,n,r){return by(new zs(e,n,r),t.serverCache)}function y4(t,e,n,r){return by(t.eventCache,new zs(e,n,r))}function Sy(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function da(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Ax;class Fe{constructor(e,n=(()=>(Ax||(Ax=new Un(qge)),Ax))()){this.value=e,this.children=n}static fromObject(e){let n=new Fe(null);return zt(e,(r,i)=>{n=n.set(new Ce(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:we(),value:this.value};if(ce(e))return null;{const r=ue(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Ne(e),n);return null!=s?{path:We(new Ce(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ce(e))return this;{const n=ue(e),r=this.children.get(n);return null!==r?r.subtree(Ne(e)):new Fe(null)}}set(e,n){if(ce(e))return new Fe(n,this.children);{const r=ue(e),s=(this.children.get(r)||new Fe(null)).set(Ne(e),n),o=this.children.insert(r,s);return new Fe(this.value,o)}}remove(e){if(ce(e))return this.children.isEmpty()?new Fe(null):new Fe(null,this.children);{const n=ue(e),r=this.children.get(n);if(r){const i=r.remove(Ne(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new Fe(null):new Fe(this.value,s)}return this}}get(e){if(ce(e))return this.value;{const n=ue(e),r=this.children.get(n);return r?r.get(Ne(e)):null}}setTree(e,n){if(ce(e))return n;{const r=ue(e),s=(this.children.get(r)||new Fe(null)).setTree(Ne(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Fe(this.value,o)}}fold(e){return this.fold_(we(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(We(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,we(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(ce(e))return null;{const s=ue(e),o=this.children.get(s);return o?o.findOnPath_(Ne(e),We(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,we(),n)}foreachOnPath_(e,n,r){if(ce(e))return this;{this.value&&r(n,this.value);const i=ue(e),s=this.children.get(i);return s?s.foreachOnPath_(Ne(e),We(n,i),r):new Fe(null)}}foreach(e){this.foreach_(we(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(We(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class kr{constructor(e){this.writeTree_=e}static empty(){return new kr(new Fe(null))}}function kh(t,e,n){if(ce(e))return new kr(new Fe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Dn(i,e);return s=s.updateChild(o,n),new kr(t.writeTree_.set(i,s))}{const i=new Fe(n),s=t.writeTree_.setTree(e,i);return new kr(s)}}}function xx(t,e,n){let r=t;return zt(n,(i,s)=>{r=kh(r,We(e,i),s)}),r}function _4(t,e){if(ce(e))return kr.empty();{const n=t.writeTree_.setTree(e,new Fe(null));return new kr(n)}}function Rx(t,e){return null!=ha(t,e)}function ha(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Dn(n.path,e)):null}function v4(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Le,(r,i)=>{e.push(new le(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new le(r,i.value))}),e}function Gs(t,e){if(ce(e))return t;{const n=ha(t,e);return new kr(null!=n?new Fe(n):t.writeTree_.subtree(e))}}function Nx(t){return t.writeTree_.isEmpty()}function wc(t,e){return w4(we(),t.writeTree_,e)}function w4(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(x(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=w4(We(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(We(t,".priority"),r)),n}}function Ay(t,e){return D4(e,t)}function pye(t,e){if(t.snap)return hr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&hr(We(t.path,n),e))return!0;return!1}function mye(t){return t.visible}function I4(t,e,n){let r=kr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)hr(n,o)?(a=Dn(n,o),r=kh(r,a,s.snap)):hr(o,n)&&(a=Dn(o,n),r=kh(r,we(),s.snap.getChild(a)));else{if(!s.children)throw yu("WriteRecord should have .snap or .children");if(hr(n,o))a=Dn(n,o),r=xx(r,a,s.children);else if(hr(o,n))if(a=Dn(o,n),ce(a))r=xx(r,we(),s.children);else{const u=vu(s.children,ue(a));if(u){const c=u.getChild(Ne(a));r=kh(r,we(),c)}}}}}return r}function E4(t,e,n,r,i){if(r||i){const s=Gs(t.visibleWrites,e);return!i&&Nx(s)?n:i||null!=n||Rx(s,we())?wc(I4(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(hr(c.path,e)||hr(e,c.path))},e),n||ie.EMPTY_NODE):null}{const s=ha(t.visibleWrites,e);if(null!=s)return s;{const o=Gs(t.visibleWrites,e);return Nx(o)?n:null!=n||Rx(o,we())?wc(o,n||ie.EMPTY_NODE):null}}}function xy(t,e,n,r){return E4(t.writeTree,t.treePath,e,n,r)}function Mx(t,e){return function yye(t,e,n){let r=ie.EMPTY_NODE;const i=ha(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Le,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Gs(t.visibleWrites,e);return n.forEachChild(Le,(o,a)=>{const u=wc(Gs(s,new Ce(o)),a);r=r.updateImmediateChild(o,u)}),v4(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return v4(Gs(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function T4(t,e,n,r){return function _ye(t,e,n,r,i){x(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=We(e,n);if(Rx(t.visibleWrites,s))return null;{const o=Gs(t.visibleWrites,s);return Nx(o)?i.getChild(n):wc(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function Ry(t,e){return function wye(t,e){return ha(t.visibleWrites,e)}(t.writeTree,We(t.treePath,e))}function kx(t,e,n){return function vye(t,e,n,r){const i=We(e,n),s=ha(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?wc(Gs(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function C4(t,e){return D4(We(t.treePath,e),t.writeTree)}function D4(t,e){return{treePath:t,writeTree:e}}class Cye{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;x("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),x(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,Ah(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,function Sh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,function yc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw yu("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Ah(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const b4=new class Dye{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class Px{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new zs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kx(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:da(this.viewCache_),s=function Tye(t,e,n,r,i,s){return function Iye(t,e,n,r,i,s,o){let a;const u=Gs(t.visibleWrites,e),c=ha(u,we());if(null!=c)a=c;else{if(null==n)return[];a=wc(u,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&l.length<i;)0!==d(f,r)&&l.push(f),f=h.getNext();return l}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function S4(t,e,n,r,i,s){const o=e.eventCache;if(null!=Ry(r,n))return e;{let a,u;if(ce(n))if(x(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=da(e),d=Mx(r,c instanceof ie?c:ie.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=xy(r,da(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ue(n);if(".priority"===c){x(1===Hs(n),"Can't have a priority with additional path components");const l=o.getNode();u=e.serverCache.getNode();const d=T4(r,n,l,u);a=null!=d?t.filter.updatePriority(l,d):o.getNode()}else{const l=Ne(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const h=T4(r,n,o.getNode(),u);d=null!=h?o.getNode().getImmediateChild(c).updateChild(l,h):o.getNode().getImmediateChild(c)}else d=kx(r,c,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),c,d,l,i,s):o.getNode()}}return Mh(e,a,o.isFullyInitialized()||ce(n),t.filter.filtersNodes())}}function Ny(t,e,n,r,i,s,o,a){const u=e.serverCache;let c;const l=o?t.filter:t.filter.getIndexedFilter();if(ce(n))c=l.updateFullNode(u.getNode(),r,null);else if(l.filtersNodes()&&!u.isFiltered()){const f=u.getNode().updateChild(n,r);c=l.updateFullNode(u.getNode(),f,null)}else{const f=ue(n);if(!u.isCompleteForPath(n)&&Hs(n)>1)return e;const p=Ne(n),m=u.getNode().getImmediateChild(f).updateChild(p,r);c=".priority"===f?l.updatePriority(u.getNode(),m):l.updateChild(u.getNode(),f,m,p,b4,null)}const d=y4(e,c,u.isFullyInitialized()||ce(n),l.filtersNodes());return S4(t,d,n,i,new Px(i,d,s),a)}function Ox(t,e,n,r,i,s,o){const a=e.eventCache;let u,c;const l=new Px(i,e,s);if(ce(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Mh(e,c,!0,t.filter.filtersNodes());else{const d=ue(n);if(".priority"===d)c=t.filter.updatePriority(e.eventCache.getNode(),r),u=Mh(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Ne(n),f=a.getNode().getImmediateChild(d);let p;if(ce(h))p=r;else{const g=l.getCompleteChild(d);p=null!=g?".priority"===dx(h)&&g.getChild(r4(h)).isEmpty()?g:g.updateChild(h,r):ie.EMPTY_NODE}u=f.equals(p)?e:Mh(e,t.filter.updateChild(a.getNode(),d,p,h,l,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return u}function A4(t,e){return t.eventCache.isCompleteForChild(e)}function x4(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Lx(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=ce(n)?r:new Fe(null).setTree(n,r);const l=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){const p=x4(0,e.serverCache.getNode().getImmediateChild(d),h);u=Ny(t,u,new Ce(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!l.hasChild(d)&&!f){const g=x4(0,e.serverCache.getNode().getImmediateChild(d),h);u=Ny(t,u,new Ce(d),g,i,s,o,a)}}),u}function Fye(t,e){const n=da(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ce(e)&&!n.getImmediateChild(ue(e)).isEmpty())?n.getChild(e):null}function M4(t,e,n,r){e.type===Tt.MERGE&&null!==e.source.queryId&&(x(da(t.viewCache_),"We should always have a full cache before handling merges"),x(Sy(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function Aye(t,e,n,r,i){const s=new Cye;let o,a;if(n.type===Tt.OVERWRITE){const c=n;c.source.fromUser?o=Ox(t,e,c.path,c.snap,r,i,s):(x(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ce(c.path),o=Ny(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===Tt.MERGE){const c=n;c.source.fromUser?o=function Rye(t,e,n,r,i,s,o){let a=e;return r.foreach((u,c)=>{const l=We(n,u);A4(e,ue(l))&&(a=Ox(t,a,l,c,i,s,o))}),r.foreach((u,c)=>{const l=We(n,u);A4(e,ue(l))||(a=Ox(t,a,l,c,i,s,o))}),a}(t,e,c.path,c.children,r,i,s):(x(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Lx(t,e,c.path,c.children,r,i,a,s))}else if(n.type===Tt.ACK_USER_WRITE){const c=n;o=c.revert?function kye(t,e,n,r,i,s){let o;if(null!=Ry(r,n))return e;{const a=new Px(r,e,i),u=e.eventCache.getNode();let c;if(ce(n)||".priority"===ue(n)){let l;if(e.serverCache.isFullyInitialized())l=xy(r,da(e));else{const d=e.serverCache.getNode();x(d instanceof ie,"serverChildren would be complete if leaf node"),l=Mx(r,d)}c=t.filter.updateFullNode(u,l,s)}else{const l=ue(n);let d=kx(r,l,e.serverCache);null==d&&e.serverCache.isCompleteForChild(l)&&(d=u.getImmediateChild(l)),c=null!=d?t.filter.updateChild(u,l,d,Ne(n),a,s):e.eventCache.getNode().hasChild(l)?t.filter.updateChild(u,l,ie.EMPTY_NODE,Ne(n),a,s):u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=xy(r,da(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Ry(r,we()),Mh(e,c,o,t.filter.filtersNodes())}}(t,e,c.path,r,i,s):function Nye(t,e,n,r,i,s,o){if(null!=Ry(i,n))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(ce(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ny(t,e,n,u.getNode().getChild(n),i,s,a,o);if(ce(n)){let c=new Fe(null);return u.getNode().forEachChild(gi,(l,d)=>{c=c.set(new Ce(l),d)}),Lx(t,e,n,c,i,s,a,o)}return e}{let c=new Fe(null);return r.foreach((l,d)=>{const h=We(n,l);u.isCompleteForPath(h)&&(c=c.set(l,u.getNode().getChild(h)))}),Lx(t,e,n,c,i,s,a,o)}}(t,e,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Tt.LISTEN_COMPLETE)throw yu("Unknown operation type: "+n.type);o=function Mye(t,e,n,r,i){const s=e.serverCache;return S4(t,y4(e,s.getNode(),s.isFullyInitialized()||ce(n),s.isFiltered()),n,r,b4,i)}(t,e,n.path,r,s)}const u=s.getChanges();return function xye(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Sy(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(function f4(t){return{type:"value",snapshotNode:t}}(Sy(e)))}}(e,o,u),{viewCache:o,changes:u}}(t.processor_,i,e,n,r);return function Sye(t,e){x(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),x(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),x(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,function k4(t,e,n,r){return function oye(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function qme(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),Nh(t,i,"child_removed",e,r,n),Nh(t,i,"child_added",e,r,n),Nh(t,i,"child_moved",s,r,n),Nh(t,i,"child_changed",e,r,n),Nh(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}(t,s.changes,s.viewCache.eventCache.getNode(),null)}let My,Py;function Fx(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return x(null!=s,"SyncTree gave us an op for an invalid query."),M4(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(M4(o,e,n,r));return s}}function qs(t,e){let n=null;for(const r of t.views.values())n=n||Fye(r,e);return n}class U4{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fe(null),this.pendingWriteTree_=function Eye(){return{visibleWrites:kr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Vx(t,e,n,r,i){return function lye(t,e,n,r,i){x(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=kh(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Ic(t,new la({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Ks(t,e,n=!1){const r=function hye(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function fye(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);x(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&pye(a,r.path)?i=!1:hr(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function gye(t){t.visibleWrites=I4(t.allWrites,mye,we()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=_4(t.visibleWrites,r.path):zt(r.children,u=>{t.visibleWrites=_4(t.visibleWrites,We(r.path,u))}),!0))}(t.pendingWriteTree_,e)){let s=new Fe(null);return null!=r.snap?s=s.set(we(),!0):zt(r.children,o=>{s=s.set(new Ce(o),!0)}),Ic(t,new Dy(r.path,s,n))}return[]}function Ph(t,e,n){return Ic(t,new la({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Ly(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=qs(a,Dn(o,e));if(c)return c});return E4(i,e,s,n,!0)}function Ic(t,e){return $4(e,t.syncPointTree_,null,Ay(t.pendingWriteTree_,we()))}function $4(t,e,n,r){if(ce(t.path))return j4(t,e,n,r);{const i=e.get(we());null==n&&null!=i&&(n=qs(i,we()));let s=[];const o=ue(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,l=C4(r,o);s=s.concat($4(a,u,c,l))}return i&&(s=s.concat(Fx(i,t,r,n))),s}}function j4(t,e,n,r){const i=e.get(we());null==n&&null!=i&&(n=qs(i,we()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=C4(r,o),l=t.operationForChild(o);l&&(s=s.concat(j4(l,a,u,c)))}),i&&(s=s.concat(Fx(i,t,r,n))),s}function Bx(t,e){return t.tagToQueryMap.get(e)}function $x(t){const e=t.indexOf("$");return x(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ce(t.substr(0,e))}}function jx(t,e,n){const r=t.syncPointTree_.get(e);return x(r,"Missing sync point for query tag that we're tracking"),Fx(r,n,Ay(t.pendingWriteTree_,e),null)}class Hx{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Hx(n)}node(){return this.node_}}class zx{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=We(this.path_,e);return new zx(this.syncTree_,n)}node(){return Ly(this.syncTree_,this.path_)}}const i_e=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},z4=function(t,e,n){return t&&"object"==typeof t?(x(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?s_e(t[".sv"],e,n):"object"==typeof t[".sv"]?o_e(t[".sv"],e):void x(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},s_e=function(t,e,n){if("timestamp"===t)return n.timestamp;x(!1,"Unexpected server value: "+t)},o_e=function(t,e,n){t.hasOwnProperty("increment")||x(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&x(!1,"Unexpected increment value: "+r);const i=e.node();if(x(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},G4=function(t,e,n,r){return qx(e,new zx(n,t),r)},Gx=function(t,e,n){return qx(t,new Hx(e),n)};function qx(t,e,n){const r=t.getPriority().val(),i=z4(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=z4(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new gc(a,et(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new gc(i))),o.forEachChild(Le,(a,u)=>{const c=qx(u,e.getImmediateChild(a),n);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}class Wx{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Vy(t,e){let n=e instanceof Ce?e:new Ce(e),r=t,i=ue(n);for(;null!==i;){const s=vu(r.node.children,i)||{children:{},childCount:0};r=new Wx(i,r,s),n=Ne(n),i=ue(n)}return r}function fa(t){return t.node.value}function Kx(t,e){t.node.value=e,Qx(t)}function q4(t){return t.node.childCount>0}function Uy(t,e){zt(t.node.children,(n,r)=>{e(new Wx(n,t,r))})}function W4(t,e,n,r){n&&!r&&e(t),Uy(t,i=>{W4(i,e,!0,r)}),n&&r&&e(t)}function Fh(t){return new Ce(null===t.parent?t.name:Fh(t.parent)+"/"+t.name)}function Qx(t){null!==t.parent&&function c_e(t,e,n){const r=function a_e(t){return void 0===fa(t)&&!q4(t)}(n),i=Fi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Qx(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Qx(t))}(t.parent,t.name,t)}const l_e=/[\[\].#$\/\u0000-\u001F\u007F]/,d_e=/[\[\].#$\u0000-\u001F\u007F]/,Yx=10485760,By=function(t){return"string"==typeof t&&0!==t.length&&!l_e.test(t)},Uh=function(t,e,n){const r=n instanceof Ce?new Ame(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+ua(r));if("function"==typeof e)throw new Error(t+"contains a function "+ua(r)+" with contents = "+e.toString());if(py(e))throw new Error(t+"contains "+e.toString()+" "+ua(r));if("string"==typeof e&&e.length>Yx/3&&cg(e)>Yx)throw new Error(t+"contains a string greater than "+Yx+" utf8 bytes "+ua(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(zt(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!By(o)))throw new Error(t+" contains an invalid key ("+o+") "+ua(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function xme(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=cg(e),i4(t)})(r,o),Uh(t,a,r),function Rme(t){const e=t.parts_.pop();t.byteLength_-=cg(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+ua(r)+" in addition to actual children.")}},Y4=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!By(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),function(t){return"string"==typeof t&&0!==t.length&&!d_e.test(t)}(t)}(n))throw new Error(function ug(t,e){return`${t} failed: ${e} argument `}(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class g_e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Zn(t,e,n){(function $y(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!hx(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)})(t,n),function J4(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(m_e(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,r=>hr(r,e)||hr(e,r))}function m_e(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();oa&&Ht("event: "+n.toString()),fc(r)}}}const y_e=25;class __e{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g_e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cy(),this.transactionQueueTree_=new Wx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function eq(t){const n=t.infoData_.getNode(new Ce(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function $h(t){return i_e({timestamp:eq(t)})}function tq(t,e,n,r,i){t.dataUpdateCount++;const s=new Ce(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=ag(n,c=>et(c));o=function Jye(t,e,n,r){const i=Bx(t,r);if(i){const s=$x(i),o=s.path,a=s.queryId,u=Dn(o,e),c=Fe.fromObject(n);return jx(t,o,new vc(Sx(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{const u=et(n);o=function B4(t,e,n,r){const i=Bx(t,r);if(null!=i){const s=$x(i),o=s.path,a=s.queryId,u=Dn(o,e);return jx(t,o,new la(Sx(a),u,n))}return[]}(t.serverSyncTree_,s,u,i)}else if(r){const u=ag(n,c=>et(c));o=function Qye(t,e,n){const r=Fe.fromObject(n);return Ic(t,new vc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,u)}else{const u=et(n);o=Ph(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Tc(t,s)),Zn(t.eventQueue_,a,o)}function nq(t,e){Zx(t,"connected",e),!1===e&&function T_e(t){Ec(t,"onDisconnectEvents");const e=$h(t),n=Cy();Cx(t.onDisconnect_,we(),(i,s)=>{const o=G4(i,s,t.serverSyncTree_,e);_c(n,i,o)});let r=[];Cx(n,we(),(i,s)=>{r=r.concat(Ph(t.serverSyncTree_,i,s));const o=function rR(t,e){const n=Fh(sq(t,e)),r=Vy(t.transactionQueueTree_,e);return function u_e(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{iR(t,i)}),iR(t,r),W4(r,i=>{iR(t,i)}),n}(t,i);Tc(t,o)}),t.onDisconnect_=Cy(),Zn(t.eventQueue_,we(),r)}(t)}function Zx(t,e,n){const r=new Ce("/.info/"+e),i=et(n);t.infoData_.updateSnapshot(r,i);const s=Ph(t.infoSyncTree_,r,i);Zn(t.eventQueue_,r,s)}function jy(t){return t.nextWriteId_++}function Ec(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ht(n,...e)}function nR(t,e,n){return Ly(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function Hy(t,e=t.transactionQueueTree_){if(e||zy(t,e),fa(e)){const n=oq(t,e);x(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function R_e(t,e,n){const r=n.map(c=>c.currentWriteId),i=nR(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const l=n[c];x(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=Dn(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,c=>{Ec(t,"transaction put response",{path:u.toString(),status:c});let l=[];if("ok"===c){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(Ks(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();zy(t,Vy(t.transactionQueueTree_,e)),Hy(t,t.transactionQueueTree_),Zn(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)fc(d[h])}else{if("datastale"===c)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{gn("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Tc(t,e)}},o)}(t,Fh(e),n)}else q4(e)&&Uy(e,n=>{Hy(t,n)})}function Tc(t,e){const n=sq(t,e),r=Fh(n);return function N_e(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=Dn(n,u.path);let d,l=!1;if(x(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,d=u.abortReason,i=i.concat(Ks(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=y_e)l=!0,d="maxretry",i=i.concat(Ks(t.serverSyncTree_,u.currentWriteId,!0));else{const h=nR(t,u.path,o);u.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Uh("transaction failed: Data returned ",f,u.path);let p=et(f);"object"==typeof f&&null!=f&&Fi(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=u.currentWriteId,v=$h(t),y=Gx(p,h,v);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=jy(t),o.splice(o.indexOf(m),1),i=i.concat(Vx(t.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally)),i=i.concat(Ks(t.serverSyncTree_,m,!0))}else l=!0,d="nodata",i=i.concat(Ks(t.serverSyncTree_,u.currentWriteId,!0))}Zn(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}zy(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)fc(r[a]);Hy(t,t.transactionQueueTree_)}(t,oq(t,n),r),r}function sq(t,e){let n,r=t.transactionQueueTree_;for(n=ue(e);null!==n&&void 0===fa(r);)r=Vy(r,n),n=ue(e=Ne(e));return r}function oq(t,e){const n=[];return aq(t,e,n),n.sort((r,i)=>r.order-i.order),n}function aq(t,e,n){const r=fa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Uy(e,i=>{aq(t,i,n)})}function zy(t,e){const n=fa(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Kx(e,n.length>0?n:void 0)}Uy(e,r=>{zy(t,r)})}function iR(t,e){const n=fa(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(x(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(x(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ks(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Kx(e,void 0):n.length=s+1,Zn(t.eventQueue_,Fh(e),i);for(let o=0;o<r.length;o++)fc(r[o])}}const sR=function(t,e){const n=P_e(t),r=n.namespace;return"firebase.com"===n.domain&&pi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new sx(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Ce(n.pathString)}},P_e=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let l=t.indexOf("/");-1===l&&(l=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=function M_e(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(l,d)));const h=function k_e(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gn(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class er{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ce(this._path)?null:dx(this._path)}get ref(){return new Pr(this._repo,this._path)}get _queryIdentifier(){const e=g4(this._queryParams),n=rx(e);return"{}"===n?"default":n}get _queryObject(){return g4(this._queryParams)}isEqual(e){if(!((e=ti(e))instanceof er))return!1;const n=this._repo===e._repo,r=hx(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function bme(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class Pr extends er{constructor(e,n){super(e,n,new wx,!1)}get parent(){const e=r4(this._path);return null===e?null:new Pr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Bye(t){x(!My,"__referenceConstructor has already been defined"),My=t})(Pr),function Gye(t){x(!Py,"__referenceConstructor has already been defined"),Py=t}(Pr);const aR={};class eve{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function v_e(t,e,n){if(t.stats_=ux(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ty(t.repoInfo_,(r,i,s,o)=>{tq(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>nq(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ca(t.repoInfo_,e,(r,i,s,o)=>{tq(t,r,i,s,o)},r=>{nq(t,r)},r=>{!function w_e(t,e){zt(e,(n,r)=>{Zx(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function ime(t,e){const n=t.toString();return ax[n]||(ax[n]=e()),ax[n]}(t.repoInfo_,()=>new iye(t.stats_,t.server_)),t.infoData_=new Zme,t.infoSyncTree_=new U4({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=Ph(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Zx(t,"connected",!1),t.serverSyncTree_=new U4({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);Zn(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pr(this._repo,we())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function X_e(t,e){const n=aR[e];(!n||n[t.key]!==t)&&pi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function iq(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&pi("Cannot call "+e+" on a deleted database.")}}function tve(t=pE(),e){const n=Wl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=U2("database");r&&function nve(t,e,n,r={}){(t=ti(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&pi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Eh(Eh.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:$2(r.mockUserToken,t.app.options.projectId);s=new Eh(o)}!function Q_e(t,e,n,r){t.repoInfo_=new sx(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(n,...r)}return n}ca.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},ca.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function rve(t){(function $ge(t){ex=t})(wu),cn(new Kt("database",(e,{instanceIdentifier:n})=>function Y_e(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ht("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u,c,o=sR(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,s=`http://${c}?ns=${a.namespace}`,o=sR(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const l=i&&u?new Eh(Eh.OWNER):new tme(t.name,t.options,e);Y4("Invalid Firebase Database URL",o),ce(o.path)||pi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function J_e(t,e,n,r){let i=aR[e.name];i||(i={},aR[e.name]=i);let s=i[t.toURLString()];return s&&pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new __e(t,!1,n,r),i[t.toURLString()]=s,s}(a,t,l,new eme(t.name,n));return new eve(d,t)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Ge(vG,"0.14.4",t),Ge(vG,"0.14.4","esm2017")}();class uR{constructor(e){return e}}const mq="database",cR=new F("angularfire2.database-instances");function uve(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new uR(r)}}const cve={provide:class ove{constructor(){return wg(mq)}},deps:[[new Ot,cR]]},lve={provide:uR,useFactory:function ave(t,e){const n=vg(mq,t,e);return n&&new uR(n)},deps:[[new Ot,cR],Mo]};let dve=(()=>{class t{constructor(){Ge("angularfire",_g.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=rr({providers:[lve,cve]}),t})();function hve(t,...e){return{ngModule:dve,providers:[{provide:cR,useFactory:uve(t),multi:!0,deps:[Re,sr,gC,mC,[new Ot,Tb],[new Ot,Gb],...e]}]}}const fve=Xl(tve,!0);let pve=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t,bootstrap:[Uge]}),t.\u0275inj=rr({providers:[ZA],imports:[aZ,Vge,FZ,gae(()=>mae(Bge_firebase)),hve(()=>fve()),yG,kge(()=>Lge())]}),t})();sZ().bootstrapModule(pve).catch(t=>console.error(t))}},xe=>{xe(xe.s=622)}]);